<script src="~/Scripts/Lib/Jquery/select2.min.js"></script>
<link href="~/Content/SharedCss/select2/select2.css" rel="stylesheet" />

<br />
<style>
    .label-provider-type {
        color: #333;
        border: 1px solid #ccc;
        border-radius: 3px;
        /*padding: 4px 4px 5px 7px;*/
    }

        .label-provider-type > i {
            padding-left: 10px;
            color: #b94a48;
        }

        .label-provider-type:hover {
            background-color: #eee;
            text-decoration: none;
        }

    .modal.fade.in {
        overflow-x: hidden;
        overflow-y: auto;
    }
</style>

<div class="col-lg-12 zero-padding-left-right-div">
    <div class="col-lg-6">
        <label class="control-label">Business Entity :</label>
        <div id="BEID">
            <select class="form-control input-sm" data-val="true" data-val-required="Please select Business Entity" ng-model="tempObject.BusinessEntityID" name="BE">
                <option selected disabled hidden value="">-Select-</option>
                <option ng-repeat="be in BusinessEntities track by $index" value="{{be.OrganizationGroupID}}" ng-click="showBE(be.GroupName);">{{be.GroupName}}</option>
            </select>
        </div>
        <span ng-if="tempObject.BusinessEntityID == null && isHasError" class="text-danger field-validation-error">
            <span>Please select the Business Entity.</span>
        </span>
    </div>
    @*<div ng-if="tempObject.BusinessEntityID != null" class="col-lg-6">
            <label class=""></label>
            <div class="zero-padding-left-right-div">
                <span>
                    <span class="label label-provider-type">
                        {{selectedBE}}

                    </span>
                </span>
            </div>
        </div>*@
</div>
<div class="clearfix"></div>
<br />


<div class="col-lg-12 zero-padding-left-right-div">
    <div class="col-lg-6">
        <label class="control-label">Line of Business :</label>

        <div class="zero-padding-left-right-div">
            <input class="form-control input-sm" ng-class="{'input-validation-error':tempObject.ContractLOBs.length == 0 && isHasError}" ng-model="LOBName" ng-focus="showContryCodeDiv('LOBdiv')" placeholder="Select LOB" />
            <span ng-if="tempObject.ContractLOBs.length == 0 && isHasError" class="text-danger field-validation-error">
                <span>Please select the LOB.</span>
            </span>
            <div class="ProviderTypeSelectAutoList popover fade bottom in" role="tooltip" id="LOBdiv">
                <table class="table table-striped table-bordered table-hover table-condensed">
                    <tbody>
                        <tr ng-repeat="c in filteredContractLOBsList = (ContractLOBsList | filter:LOBName) track by $index" ng-click="SelectLOBName(c)" class="pointer">
                            <td>{{c.LOBName}}</td>
                        </tr>
                        <tr ng-if="ContractLOBsList.length == 0">
                            <td>No data..... </td>
                        </tr>
                        <tr ng-if="ContractLOBsList.length > 0 && filteredContractLOBsList.length == 0">
                            <td>Title not found..... </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div ng-if="tempObject.ContractLOBs.length > 0" class="col-lg-6">
        <label class=""></label>
        <div class="zero-padding-left-right-div">
            <span ng-repeat="tpt in tempObject.ContractLOBs track by $index">
                <span class="label label-provider-type">
                    {{tpt.LOBName}}
                    <i class="fa fa-close pointer" ng-click="RemoveCoveringPhysiciansType(tpt)"></i>
                    <input type="hidden" name="tempObject.ContractLOBs[{{$index}}].LOBID" value="{{tpt.LOBID}}" />
                    &nbsp;&nbsp;
                </span>
            </span>
        </div>
    </div>
</div>
<div class="clearfix"></div>
<br />
<div class="col-lg-12 zero-padding-left-right-div">
    <div class="col-lg-6">
        <label class="control-label">Speciality :</label>
        <div class="zero-padding-left-right-div">
            <input class="form-control input-sm" ng-class="{'input-validation-error':tempObject.ContractSpecialties.length == 0 && isHasError}" ng-model="SpecialityName" ng-focus="showContryCodeDiv('Specialitydiv')" placeholder="Select Speciality" />
            <span ng-if="tempObject.ContractSpecialties.length == 0 && isHasError" class="text-danger field-validation-error">
                <span>Please select the Speciality.</span>
            </span>
            <div class="ProviderTypeSelectAutoList popover fade bottom in" role="tooltip" id="Specialitydiv">
                <table class="table table-striped table-bordered table-hover table-condensed" style="margin-bottom: 0px;">
                    <tbody>
                        <tr ng-repeat="c in filteredContractSpecialityList = (ContractSpecialityList | filter:SpecialityName)" ng-click="SelectSpecialityName(c)" class="pointer">
                            <td>{{c.Specialty.Name}}</td>
                        </tr>
                        <tr ng-if="ContractSpecialityList.length == 0">
                            <td>No data..... </td>
                        </tr>
                        <tr ng-if="ContractSpecialityList.length > 0 && filteredContractSpecialityList.length == 0">
                            <td>Title not found..... </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div ng-if="tempObject.ContractSpecialties.length > 0" class="col-lg-6">
        <label class=""></label>
        <div class="zero-padding-left-right-div">
            <span ng-repeat="tpt in tempObject.ContractSpecialties track by $index">
                <span class="label label-provider-type">
                    {{tpt.SpecialtyName}}
                    <i class="fa fa-close pointer" ng-click="RemoveContractSpecialties(tpt)"></i>
                    <input type="hidden" name="tempObject.ContractContractSpecialties[{{$index}}].ProfileSpecialtyID" value="{{tpt.ProfileSpecialtyID}}" />
                    &nbsp;&nbsp;
                </span>
            </span>
        </div>
    </div>
</div>
<div class="clearfix"></div>
<br />
<div class="col-lg-12 zero-padding-left-right-div">
    <div class="col-lg-6">
        <label class="control-label">Locations :</label>
        <div class="zero-padding-left-right-div">
            <input class="form-control input-sm" ng-class="{'input-validation-error':tempObject.ContractPracticeLocations.length == 0 && isHasError}" ng-model="LocationsName" ng-focus="showContryCodeDiv('Locationsdiv')" placeholder="Select Locations" />
            <span ng-if="tempObject.ContractPracticeLocations.length == 0 && isHasError" class="text-danger field-validation-error">
                <span>Please select the Locations.</span>
            </span>
            <div class="ProviderTypeSelectAutoList popover fade bottom in" role="tooltip" id="Locationsdiv">
                <table class="table table-striped table-bordered table-hover table-condensed" style="margin-bottom: 0px;">
                    <tbody>
                        <tr ng-repeat="c in filteredContractLocationsList = (ContractLocationsList | filter:LocationsName)" ng-click="SelectLocationsName(c)" class="pointer">
                            <td>{{c.Facility.FacilityName}} - {{c.Facility.Street}}, {{c.Facility.City}}, {{c.Facility.State}}, {{c.Facility.Country}}</td>
                        </tr>
                        <tr ng-if="ContractLocationsList.length == 0">
                            <td>No data..... </td>
                        </tr>
                        <tr ng-if="ContractLocationsList.length > 0 && filteredContractLocationsList.length == 0">
                            <td>Title not found..... </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div ng-if="tempObject.ContractPracticeLocations.length > 0" class="col-lg-6">
        <label class=""></label>
        <div class="zero-padding-left-right-div">
            <span ng-repeat="tpt in tempObject.ContractPracticeLocations track by $index">
                <span class="label label-provider-type">
                    {{tpt.LocationsName}} - {{tpt.StreetName}}, {{tpt.CityName}}, {{tpt.StateName}}, {{tpt.CountryName}}
                    <i class="fa fa-close pointer" ng-click="RemoveContractLocations(tpt)"></i>
                    <input type="hidden" name="tempObject.ContractPracticeLocations[{{$index}}].ProfilePracticeLocationID" value="{{tpt.ProfilePracticeLocationID}}" />
                    &nbsp;&nbsp;
                </span>
            </span>
        </div>
    </div>
</div>
<div class="clearfix"></div>
<br />
<div class="col-lg-12 zero-padding-left-right-div">
    <div class="col-lg-3 pull-right"><button class="btn btn-sm btn-primary pull-right" ng-click="ShowDetailTable(tempObject);">Add</button></div>
</div>
<div class="clearfix"></div>
<div ng-show="activeMessageDiv=='LoadedSuccess'" class="alert alert-success" role="alert">
    <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
    <i class="fa fa-2x fa-arrow-up"></i> {{messageDesc}}
</div>
<div class="clearfix"></div>
<div class="col-lg-12 zero-padding-left-right-div" id="LoadPlan" ng-if="LoadedData != null">
    <br />
    <table class="table table-bordered table-striped table-hover">
        <!-- ngInclude: templates.header -->
        <thead>
            <tr>
                <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Business Entity</th>
                <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Line Of Business</th>
                <th class="col-lg-1 col-md-1 col-sm-1 col-xs-1">Specialty</th>
                <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Location</th>
                <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2" ng-show="credentialingInfo.IsDelegated == 'YES'">Initial Credentialing Date</th>
                <th class="col-lg-2 col-md-2 col-sm-2 col-xs-2">Select Document</th>
                <th class="col-lg-3 col-md-3 col-sm-3 col-xs-3">Action</th>
            </tr>
            @*<tr>
                <th><input type="text" class="form-control input-sm"></th>
                <th><input type="text" class="form-control input-sm"></th>
                <th><input type="text" class="form-control input-sm"></th>
                <th><input type="text" class="form-control input-sm"></th>
                <th><input type="text" ng-show="credentialingInfo.IsDelegated == 'YES'" class="form-control input-sm"></th>
                <th></th>
                <th></th>
            </tr>*@
        </thead>
        <tbody>
            <tr ng-repeat="c in LoadedData track by $index">
                <td>{{c.BusinessEntity.GroupName}}</td>
                <td>
                    <span ng-repeat="s in c.ContractLOBs">
                        <i ng-if="$index>0">,</i><br ng-if="$index>0" />
                        <span>
                            {{s.LOB.LOBName}}
                        </span>
                    </span>
                </td>
                <td>
                    <span ng-repeat="s in c.ContractSpecialties">
                        <i ng-if="$index>0">,</i><br ng-if="$index>0" />
                        {{s.ProfileSpecialty.Specialty.Name}}
                    </span>
                </td>
                <td>
                    <span ng-repeat="s in c.ContractPracticeLocations">
                        <i ng-if="$index>0">,</i><br ng-if="$index>0" />
                        {{s.ProfilePracticeLocation.Facility.FacilityName}} - {{s.ProfilePracticeLocation.Facility.Street}}, {{s.ProfilePracticeLocation.Facility.City}}, {{s.ProfilePracticeLocation.Facility.State}}, {{s.ProfilePracticeLocation.Facility.Country}}
                    </span>
                </td>
                <td ng-show="credentialingInfo.IsDelegated == 'YES'">{{c.InitialCredentialingDate || 'Not Available' | date:'MM-dd-yyyy'}}</td>
                <td>
                    @*<button type="button" class="btn btn-info btn-xs" data-toggle="modal" data-target="#selectDoc">Select Document</button> <button class="btn btn-xs btn-default"><i class="fa fa-eye"></i></button>*@
                    <a class="btn btn-info btn-xs" data-toggle="modal" data-target="#selectTemplate" ng-click="SetRequestId(c)">Select Document</a> <button class="btn btn-xs btn-default" ng-click="SetRequestId(c);viewDocument(c.CredentialingContractRequestID,@ViewBag.CredentialingInfo)"><i class="fa fa-eye"></i></button>

                </td>
                <td>
                    <button class="btn btn-xs btn-danger" ng-click="loadedWarning(c);"><i class="fa fa-minus-circle"></i></button>
                    @*  <a class="btn btn-xs btn-primary"><i class="fa fa-envelope"></i></a>*@
                </td>
            </tr>
            @*<tr ng-if="LoadedData.length != '0'" ng-repeat="c in LoadedData">
                <td>{{c.BusinessEntity}}</td>
                <td> <span ng-repeat="s in c.ContractLOBs"><i ng-if="$index>0">,</i><br ng-if="$index>0" />{{s.LOBName}}</span></td>
                <td> <span ng-repeat="s in c.ContractSpecialties"><i ng-if="$index>0">,</i><br ng-if="$index>0" />{{s.SpecialtyName}}</span></td>
                <td> <span ng-repeat="s in c.ContractPracticeLocations"><i ng-if="$index>0">,</i><br ng-if="$index>0" />{{s.LocationsName}}</span></td>
                <td ng-show="credentialingInfo.IsDelegated == 'YES'">{{c.Date}}</td>
                <td>
                    <a class="btn btn-info btn-xs" data-toggle="modal" data-target="#selectTemplate" ng-click="SetRequestId(c.CredentialingContractRequestID)">Select Document</a> <button class="btn btn-xs btn-default" ng-click="viewDocument(@ViewBag.CredentialingInfo)"><i class="fa fa-eye"></i></button>
                 </td>
                <td>
                    <button class="btn btn-xs btn-danger" ng-click="loadedWarning(c);"><i class="fa fa-minus-circle"></i></button>

                </td>
                </tr>*@
        </tbody>
    </table>
    &nbsp;&nbsp;
</div>
<div class="modal fade" id="loadedWarningModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Warning!!!!</h4>
            </div>
            <div class="modal-body">
                Do you really want to remove this record from loaded list ?
                @*<input type="hidden" name="StateLicenseInformationID" value="{{tempStateLicense.StateLicenseInformationID}}" />
                    <input type="hidden" name="StatusType" value="2" />*@
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" ng-click="RemoveLoadedContract(tempRemoveLoadedData)">Remove</button>
            </div>

        </div>
    </div>
</div>


@* model *@
<div class="modal fade" id="selectTemplate" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true" my-Modal>
    <div class="modal-dialog" style="width:90%;">
        <div class="modal-content col-lg-12">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Select Template</h4>
            </div>
            <div class="modal-body">
                <div class="col-lg-12">
                    <div class="container-fluid">

                        <!-- Page Heading -->
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="col-lg-12">

                                    <ul class="list-group">
                                        <li class="list-group-item" ng-repeat="temp in templateList"><label><input type="checkbox" ng-model="temp.check" ng-change="setSelectedTemplated($index)" />{{temp.name}}</label></li>
                                    </ul>
                                </div>
                                <div class="col-lg-12" ng-show="showerror">
                                    <label class="text-danger">* Select Template</label>
                                </div>
                            </div>
                            <div class="col-lg-9" style="height:450px;">
                                <iframe style="height:100%;width:100%" src="/Content/Document/A2HC Provider Profile for Wellcare.pdf"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" ng-click="SelectDocument(@ViewBag.CredentialingInfo)">Done</button>
            </div>
        </div>
    </div>
</div>
@* model *@


<script>
    $(document).ready(function () {
        $(".ProviderTypeSelectAutoList").hide();
        window.focus();

    });
</script>