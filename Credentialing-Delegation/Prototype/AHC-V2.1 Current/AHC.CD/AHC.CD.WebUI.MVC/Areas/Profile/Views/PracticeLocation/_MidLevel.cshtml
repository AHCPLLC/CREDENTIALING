@using AHC.CD.WebUI.MVC.Areas.Profile.Attributes
<div class="form-style">
    <fieldset>
        <legend>
            Mid-Level Practitioners
        </legend>

        <div id="CredentialingContact">
            <div class="col-lg-12 zero-padding-left-right-div">
                <table ng-hide="PracticeLocationDetail.MidLevels.length > 0" class="table table-bordered table-condensed customtbodyStyle table-striped">
                    <thead>
                        <tr>
                            <td ng-hide="visibilityControl=='addMidLevel'">
                                No Data Available For Mid Level Practitioner  !
                                @if (ProfileActionValidator.IsAuthorized(ProfileActionType.Add, ViewBag.Roles, false))
                                {
                                    <span>
                                        Please click on <button id="noMidLevels" class="btn btn-xs btn-success" ng-click="operateViewAndAddControl('addMidLevel')" data-toggle="tooltip" data-placement="right" title="Add new"><i class="fa fa-plus"></i></button>
                                        to Add Mid-Level Practitioner
                                    </span>
                                }
                            </td>
                        </tr>
                    </thead>
                </table>
                <table ng-hide="PracticeLocationDetail.MidLevels.length <1" class="table table-bordered table-condensed table-striped customtbodyStyle">
                    <thead>

                        <tr>
                            <th>Name</th>
                            <th>Practitioner License</th>
                            <th>Action</th>
                        </tr>

                    </thead>
                    <tbody ng-repeat="midLevel in PracticeLocationDetail.MidLevels">

                        <tr>
                            <td>{{midLevel.PractitionerFirstName}}</td>
                            <td>{{midLevel.PractitionerLicense}}</td>
                            <td>
                                @if (ProfileActionValidator.IsAuthorized(ProfileActionType.View, ViewBag.Roles, false))
                                {
                                    <button class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View" ng-click="viewMidLevel($index,midLevel)" ng-hide="viewShowMidLevel"><i class="fa fa-eye"></i></button>
                                }
                                @if (ProfileActionValidator.IsAuthorized(ProfileActionType.Edit, ViewBag.Roles, false))
                                {
                                    <button class="btn btn-xs btn-primary" data-toggle="tooltip" data-placement="top" title="Edit" ng-click="editMidLevel($index,midLevel)" ng-hide="editShowMidLevel"><i class="fa fa-edit"></i></button>
                                }
                                @if (ProfileActionValidator.IsAuthorized(ProfileActionType.Add, ViewBag.Roles, false))
                                {
                                    <button data-toggle="tooltip" data-placement="right" title="Add New" ng-hide="$index+1!=primaryPracticeLocations.MidLevel.length" class="btn btn-xs btn-success" ng-click="addMidLevel()"><i class="fa fa-plus"></i></button>
                                }
                            </td>
                        </tr>
                        <tr ng-show="viewShowMidLevel && midLevel==midLevel">
                            <td colspan="6" id="MidLevelEditDiv{{$index}}" class="editTableDataStyle">
                                @Html.Partial("~/Areas/Profile/Views/PracticeLocation/_ViewMidLevel.cshtml")
                            </td>
                        </tr>
                        <tr ng-show="editShowMidLevel && midLevel==midLevel">
                            <td colspan="6" id="midLevelEditDiv{{$index}}" class="editTableDataStyle">
                                @Html.Partial("~/Areas/Profile/Views/PracticeLocation/_AddEditMidLevel.cshtml")
                            </td>
                        </tr>
                    </tbody>

                </table>

            </div>

            <div class="clearfix"></div>

            @if (ProfileActionValidator.IsAuthorized(ProfileActionType.Add, ViewBag.Roles, false))
            {
                <fieldset ng-show="visibilityControl==('addMidLevel')">
                    <legend>
                        Add Mid-Level Practitioner
                    </legend>
                    <div id="newMidLevelFormDiv">
                        <form id="addnewMidLevel">
                            @Html.Partial("~/Areas/Profile/Views/PracticeLocation/_AddEditMidLevel.cshtml")
                        </form>    
                        <div ng-show="activeMessageDiv=='addedNewMidLevel'" class="alert alert-danger" role="alert">
                            <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
                            <i class="fa fa-2x fa-arrow-up"></i> {{messageDesc}}
                        </div>
                        <div class="col-md-12 form-group">

                            <button type="button" class="btn btn-warning btn-sm" ng-click="operateCancelControl('');resetDates();">Cancel</button>
                            <button type="submit" class="btn btn-primary btn-sm pull-right" ng-click="saveMidLevel(PracticeLocationDetail.PracticeLocationDetailID)">Save</button>

                        </div>
                    </div>
                </fieldset>
            }
        </div>
    </fieldset>
</div>
