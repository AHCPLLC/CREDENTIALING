@{
    ViewBag.Title = "Business Entity Mapping";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/Scripts/Lib/Jquery/jquery-1.11.0.js"></script>
<script src="~/Scripts/Lib/Lodash/lodash.min.js"></script>
<script src="~/Scripts/Lib/Angular/angular.min.js"></script>
<script src="~/Areas/Credentialing/Scripts/BusinessEntity/BusinessEntityController.js"></script>

<div id="page-wrapper" ng-app="BEApp" ng-controller="BEController">
    <div class="container-fluid">
        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li>
                        <i class="fa fa-check-square-o"></i> Business Entity
                    </li>
                </ol>
            </div>
        </div>
        <div class="row" ng-cloak>
            <div class="panel panel-default form-style">
                <div class="panel-heading">
                    <i class="fa fa-check-square-o"></i> Business Entity Mapping
                    <a ng-click="IsNewAdd = true;" ng-disabled="IsNewAdd" class="btn btn-xs btn-primary pull-right" tooltip data-toggle="tooltip" data-placement="top" title="Add New">
                        <i class="fa fa-plus"></i> Add
                    </a>
                </div>
                <div class="panel-body">
                    <div ng-if="IsNewAdd" class="col-lg-12 zero-padding-left-right-div" style="border-bottom: 1px solid #eee;margin-bottom: 15px;">
                        <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
                            <label class="control-label small">Business Entity :</label>
                            <div class="form-group">
                                <select ng-model="FilterData.GroupID" class="form-control input-sm">
                                    <option selected disabled>-Select-</option>
                                    <option ng-repeat="g in Groups" value="{{g.GroupID}}">{{g.Name}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
                            <label class="control-label small">Plan :</label>
                            <div class="form-group">
                                <select ng-model="FilterData.PlanID" class="form-control input-sm">
                                    <option selected disabled>-Select-</option>
                                    <option ng-repeat="p in Plans" value="{{p.PlanID}}">{{p.PlanTitle}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-12">
                            <br />
                            <button ng-click="SaveData(FilterData);" ng-disabled="!FilterData.GroupID || !FilterData.PlanID" class="btn btn-sm btn-success">Add</button>
                            <span>&nbsp;&nbsp;&nbsp;</span>
                            <button ng-click="CancelAdd();" class="btn btn-sm btn-warning">Cancel</button>
                        </div>
                    </div>

                    <div class="clearfix"></div>

                    <fieldset>
                        <legend>Business Entity Mapping - List</legend>
                        <div class="legend2 pull-right">
                            <a ng-click="IsHistoryView=true;" class="btn btn-xs btn-warning" tooltip data-toggle="tooltip" data-placement="top" title="View History"><i class="fa fa-clock-o"></i></a>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 zero-padding-left-right-div">
                            <table class="table table-bordered table-condensed">
                                <thead>
                                    <tr>
                                        <th class="col-lg-2 col-md-2">Business Entity</th>
                                        <th class="col-lg-2 col-md-2">Plan</th>
                                        <th class="col-lg-2 col-md-2">Added By</th>
                                        <th class="col-lg-2 col-md-2"> Date</th>
                                        <th class="col-lg-2 col-md-2">Status</th>
                                        <th class="col-lg-1 col-md-1">Action</th>
                                    </tr>
                                    <tr>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="bepm in BEPlanMappings track by $index">
                                        <td>{{bepm.Group.Name}}</td>
                                        <td>{{bepm.Plan.PlanTitle}}</td>
                                        <td>{{bepm.LoggedBy}}</td>
                                        <td>{{bepm.LastModifiedDate | date:sort}}</td>
                                        <td>{{bepm.Status}}</td>
                                        <td>
                                            <button ng-click="RemoveBE(bepm);" class="btn btn-xs btn-danger"><i class="fa fa-minus-circle"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </fieldset>

                    <fieldset ng-if="IsHistoryView">
                        <legend>Business Entity Mapping - History List</legend>
                        <div class="legend2 pull-right">
                            <a ng-click="HideHistory();" class="btn btn-xs btn-danger" tooltip data-toggle="tooltip" data-placement="top" title="Hide History"><i class="fa fa-eye-slash"></i></a>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 zero-padding-left-right-div">
                            <table class="table table-bordered table-condensed">
                                <thead>
                                    <tr>
                                        <th class="col-lg-2 col-md-2">Business Entity</th>
                                        <th class="col-lg-2 col-md-2">Plan</th>
                                        <th class="col-lg-2 col-md-2">Added By</th>
                                        <th class="col-lg-2 col-md-2"> Date</th>
                                        <th class="col-lg-2 col-md-2">Terminated By</th>
                                    </tr>
                                    <tr>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                        <th><input type="text" class="form-control input-sm"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="bepm in BEPlanMappings track by $index">
                                        <td>{{bepm.Group.Name}}</td>
                                        <td>{{bepm.Plan.PlanTitle}}</td>
                                        <td>{{bepm.LoggedBy}}</td>
                                        <td>{{bepm.LastModifiedDate | date:sort}}</td>
                                        <td>{{bepm.ChangedBy}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </fieldset>

                    <!--------------------- Alert Modal --------------->
                    <!-- Modal -->
                    <div class="modal fade" id="BEConfirmation" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Confirmation - Remove Mapping</h4>
                                </div>
                                <div class="modal-body">
                                    <span>sjgfjshdfjhdjhfjd<br />
                                    fkhdjfhdjhfjdhf<br />
                                    sfbshfghshf
                                    {{SeletcedData}}
                                    </span>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-xs btn-default" data-dismiss="modal">No</button>
                                    <button ng-click="Confirmation(SeletcedData);" type="button" class="btn btn-xs btn-primary">Yes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end modal -->
                </div>
            </div>
        </div>
    </div>
</div>




