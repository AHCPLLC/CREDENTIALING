@model AHC.CD.WebUI.MVC.Areas.Initiation.Models.UsersList
@{
    ViewBag.Title = "ViewUsers";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section AddToHead{
    <link href="~/Content/SharedCss/app.css" rel="stylesheet" />
    <link href="~/Content/SharedCss/AngularStrapDatepicker.css" rel="stylesheet" />
    <script src="~/Scripts/Lib/Jquery/jquery-1.11.0.js"></script>
    <script src="~/Scripts/Lib/Bootstrap/jasny-bootstrap.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/Lib/Angular/angular.min.js"></script>
    <script src="~/Scripts/Lib/CDN Service/angular-strap.min.js"></script>
    <script src="~/Scripts/Lib/CDN Service/angular-strap.tpl.min.js"></script>
    <script src="~/Scripts/Custom/ResetPassword.js"></script>
    <script>
        $(document).ready(function () {
            $('#updatebutton').attr('disabled', true);
        });
    </script>
}
<div id="page-wrapper" ng-app="Resetpasswordapp" ng-controller="ResetPasswordController" ng-init="Getlist()" ng-cloak>
    <div class="container-fluid">
        <div class="row" style="margin-top:2px">
            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li>
                        <i class="fa fa-dashboard"></i>  <a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Dashboard/Index">Dashboard</a>
                    </li>
                    <li class="active">
                        <i class="fa fa-list"></i> Change Role of an Existing User
                    </li>
                </ol>
            </div>
        </div>
        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel-body">
                    <p id="para" style="color:red" hidden>Please enter valid Email ID</p>
                    <p id="para1" style="color:red" hidden>No Details found with this Email ID</p>
                    <table id="userstable" ng-show="1==1" class='table table-striped table-bordered customtbodyStyle small wrap-words'>
                        <thead>
                            <tr>
                                <th class='col-lg-2 col-md-2 col-sm-2 '>
                                    Email
                                </th>
                                <th class='col-lg-2 col-md-2 col-sm-2 '>
                                    Name
                                </th>
                                <th class='col-lg-2 col-md-2 col-sm-2 '>
                                    Role
                                </th>
                                <th class='col-lg-2 col-md-2 col-sm-2 '>
                                    Change Role
                                </th>
                                <th class='col-lg-2 col-md-2 col-sm-2 '>
                                    Update
                                </th>
                                <th class='col-lg-2 col-md-2 col-sm-2 '>
                                    Reset Password
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat='p in mydata'>

                                <td>{{p.Email}}</td>
                                <td>{{p.Name}}</td>
                                <td>{{p.Role}}</td>
                                <td>
                                    <select id="selectid" data-val="true" data-val-required="Please select the Role*" name="RoleCode" ng-model="user.RoleCode" class="form-control input-sm">
                                        <option value="">Change Role</option>
                                        <option ng-repeat="role in Roles" value="{{role.Code}}" ng-selected="user.RoleCode == role.Code">{{role.Name}}</option>
                                    </select>
                                </td>
                                <td>
                                    <button id="updatebutton" data-toggle="tooltip" data-placement="bottom" title="Update" class="btn btn-sm btn-info" ng-click="ChangeRole(user.RoleCode,p.Email)"><i class="fa fa-chevron-circle-right"></i></button>
                                </td>
                                <td>
                                    <button id="updatebutton1" data-toggle="tooltip" data-placement="bottom" title="Reset Password" class="btn btn-sm btn-info" ng-click=""><i class="fa fa-fire"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="row">
                        <span id="successpara" style="color:green;text-align:center;" hidden><label><h4>Role Updated successfully</h4></label></span>
                    </div>
                    <p id="failurepara" style="color:green" hidden>Error occured while updating the Role. Please try Later.</p>
                </div>
            </div>
        </div>
    </div>
</div>

