@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section AddToHead{
    <link href="~/Content/SharedCss/app.css" rel="stylesheet" />
    <link href="~/Content/SharedCss/jasny-bootstrap.css" rel="stylesheet" />
    <link href="~/Content/SharedCss/AngularStrapDatepicker.css" rel="stylesheet" />
    <link href="~/Content/Provider/ng-table.css" rel="stylesheet" />
    <script src="~/Scripts/Lib/Jquery/jquery-1.11.0.js"></script>
    <script src="~/Scripts/Lib/Bootstrap/jasny-bootstrap.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/Lib/Angular/angular.min.js"></script>
    <script src="~/Scripts/Lib/Angular/ng-table.js"></script>
    <script src="~/Scripts/Lib/CDN%20Service/angular-strap.min.js"></script>
    <script src="~/Scripts/Lib/CDN%20Service/angular-strap.tpl.min.js"></script>
    <script src="~/Scripts/Lib/Angular/ng-table-resizable-columns.js"></script>
    <script src="~/Scripts/Custom/TaskTracker/LoadingInterceptor.js"></script>
    <script src="~/Scripts/Custom/TaskTracker/TaskTracker.js"></script>
}
<style>
    /* styles for validation helpers */
    .field-validation-error {
        color: #b94a48;
    }

    .field-validation-valid {
        display: none;
    }

    input.input-validation-error {
        border: 1px solid #b94a48;
    }

    select.input-validation-error {
        border: 1px solid #b94a48;
    }

    input[type="checkbox"].input-validation-error {
        border: 0 none;
    }

    .validation-summary-errors {
        color: #b94a48;
    }

    .validation-summary-valid {
        display: none;
    }

    .emptyData {
        color: "#E27B7B";
    }

    /*Provider Type Style*/
    .label-provider-type {
        color: #333;
        border: 1px solid #ccc;
        border-radius: 3px;
        /*padding: 4px 4px 5px 7px;*/
    }

        .label-provider-type > i {
            padding-left: 10px;
            color: #b94a48;
        }

        .label-provider-type:hover {
            background-color: #eee;
            text-decoration: none;
        }
</style>


<div id="page-wrapper" ng-app="TrackerApp" ng-cloak>
    <div class="container-fluid" ng-controller="TrackerCtrl" ng-init="progressbar = false;LoadData()">
        <!-- Page Heading -->
        <div class="row">
            <ol class="breadcrumb">
                <li>
                    <i class="fa fa-dashboard"></i>  <a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Dashboard/Index">Dashboard</a>
                </li>
                @*<li class="active">
                        <i class="fa fa-list-alt"></i> Verfications
                    </li>*@
            </ol>
        </div>
        <!-- /.row -->
        <!-- Page Heading -->
        <div class="row">


            <div class="panel panel-default content-panel">

                <div class="panel-heading">
                    <h3 class="panel-title">Daily Task</h3>
                </div>
                
                <div class="panel-body">
                    @*<div loading-status-message style="position:fixed; display:none;width:1086px;height:521px;background-color:#000;z-index:100;opacity:0.4">Loading...</div>*@
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 zero-padding-left-right-div form-style" ng-if="!addView && !editView && !detailView" style="border-top: 1px solid #eee; padding-top: 10px;">
                        <fieldset>
                            <legend>
                                Daily Task Overview
                            </legend>

                            <div class="legend2 pull-right">
                                <button ng-click="showAddView()" class="btn btn-xs btn-primary" tooltip data-toggle="tooltip" data-placement="top" title="Add New"><i class="fa fa-plus"></i></button>
                            </div>
                            <div class="progress col-lg-12" ng-if="!progressbar" ng-cloak>
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                    Loading...Please wait...
                                </div>
                            </div>
                            <div ng-if="progressbar">

                                <div class="col-lg-12 zero-padding-left-right-div">
                                    <div ng-show="activeMessageDiv=='successfullySaved'" class="alert alert-success" role="alert">
                                        <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
                                        {{messageDesc}}
                                    </div>
                                    <div ng-show="activeMessageDiv=='errorInitiated'" class="col-lg-12">
                                        <div class="alert alert-danger" role="alert">
                                            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                                            <span class="sr-only">Error:</span>
                                            <span>{{messageDesc}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div ng-show="data.length==0 && progressbar">
                                    <label>No Tasks Assigned.</label>
                                </div>
                                <table ng-show="data.length>0 && progressbar" ng-table="tableParams" show-filter="true" class="table table-hover ng-table-resizable-columns ng-table-rowselected">

                                    <tbody>
                                        <tr ng-repeat="c in $data track by $index">

                                            <td class=" wrap-words col-lg-2" data-title="'Provider Name'" header-class="text-left" sortable="'ProviderName'" filter="{ 'ProviderName': 'text' }">{{c.ProviderName}}</td>
                                            <td class=" wrap-words col-lg-2" data-title="'Subject'" header-class="text-left" sortable="'Subject'" filter="{ 'Subject': 'text' }">{{c.Subject}}</td>
                                            <td class=" wrap-words col-lg-2" data-title="'Sub Section Name'" header-class="text-left" sortable="'SubSectionName'" filter="{ 'SubSectionName': 'text' }">{{c.SubSectionName}}</td>
                                            @*<td class=" wrap-words col-lg-2" data-title="'Task Status'" header-class="text-left" sortable="'TaskStatusType'" filter="{ 'TaskStatusType': 'text' }">{{c.TaskStatusType}}</td>*@
                                            <td class=" wrap-words col-lg-2" data-title="'Next FollowUp Date'" header-class="text-left" sortable="'NextFollowUpDate'" filter="{ 'NextFollowUpDate': 'text' }">{{c.NextFollowUpDate}}</td>
                                            <td class=" wrap-words col-lg-2" data-title="'Task Status'" header-class="text-left" sortable="'CompleteStatus'" filter="{ 'CompleteStatus': 'text' }">{{c.CompleteStatus}}</td>
                                            <td class=" wrap-words col-lg-2" data-title="'Action'" header-class="text-left">
                                                <a class="btn btn-xs btn-default" href='@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Profile/MasterProfile/ProviderProfile/{{c.ProfileID}}{{c.TabID}}{{c.SubSectionID}}' tooltip data-toggle="tooltip" data-placement="top" title="Redirect"><i class="fa fa-repeat"></i></a>
                                                <button class="btn btn-xs btn-default" ng-click="showDetailView(c)" tooltip data-toggle="tooltip" data-placement="top" title="View"><i class="fa fa-eye"></i></button>
                                                <button class="btn btn-xs btn-primary" ng-click="showEditview(c)" tooltip data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-edit"></i></button>
                                                <button class="btn btn-xs btn-danger" data-toggle="tooltip" data-placement="top" title="Close" ng-click="inactiveWarning(c);" tooltip><i class="fa fa-remove"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>




                                @*<table class='table table-striped table-bordered customtbodyStyle small wrap-words'>
                <thead>
                    <tr>
                        <th class='col-lg-3 col-md-3 col-sm-3 col-xs-3'>
                            <a class="pointer">PROVIDER NAME</a>
                        </th>
                        <th class='col-lg-1 col-md-1 col-sm-1 col-xs-1'>
                            <a class="pointer">SUBJECT</a>
                        </th>
                        <th class='col-lg-2 col-md-1 col-sm-1 col-xs-2'>
                            <a class="pointer">SUB SECTION NAME</a>
                        </th>
                        <th class='col-lg-2 col-md-2 col-sm-2 col-xs-2'>
                            <a class="pointer">ASSIGN TO</a>
                        </th>
                        <th class='col-lg-2 col-md-2 col-sm-2 col-xs-2'>
                            <a class="pointer">NEXT FOLLOW UP DATE</a>
                        </th>
                        <th class='col-lg-2 col-md-2 col-sm-2 col-xs-2'>ACTION</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input class="form-control input-sm" /></td>
                        <td><input class="form-control input-sm" /></td>
                        <td><input class="form-control input-sm" /></td>
                        <td><input class="form-control input-sm" /></td>
                        <td><input class="form-control input-sm" data-date-format="MM/dd/yyyy" data-bs-datepicker="bs-datepicker" ng-model="fgu" /></td>
                        <td></td>
                    </tr>

                    <tr ng-repeat='task in DailyTasks track by $index' style="background-color: #f9f9f9;">
                        <td>{{task.ProviderName}}</td>
                        <td>{{task.Subject}}</td>
                        <td>{{task.SubSectionName}}</td>
                        <td>{{task.AssignedTo}}</td>
                        <td>{{task.NextFollowUpDate | date:'MM/dd/yyyy'}}</td>
                        <td>
                            <a class="btn btn-xs btn-default" href='@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Profile/MasterProfile/ProviderProfile/{{task.ProfileID}}#identification#StateLicense' tooltip data-toggle="tooltip" data-placement="top" title="Redirect"><i class="fa fa-repeat"></i></a>
                            <button class="btn btn-xs btn-default" ng-click="showDetailView(task)" tooltip data-toggle="tooltip" data-placement="top" title="View"><i class="fa fa-eye"></i></button>
                            <button class="btn btn-xs btn-primary" ng-click="showEditview(task)" tooltip data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-edit"></i></button>
                            <button class="btn btn-xs btn-danger" data-toggle="tooltip" data-placement="top" title="Inactive" ng-click="inactiveWarning(task);" tooltip><i class="fa fa-minus-circle"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>*@









                            </div>
                        </fieldset>

                    </div>

                    <div ng-if="addView" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 zero-padding-left-right-div form-style">
                        <fieldset>
                            <legend>
                                Add New Task
                            </legend>
                            <div class="legend2 pull-right">
                                <button ng-click="cancelAdd()" class="btn btn-xs btn-default" tooltip data-toggle="tooltip" data-placement="top" title="close"><i class="fa fa-close"></i></button>
                            </div>
                            <div id="newFormDiv">
                                @Html.Partial("~/Views/TaskTracker/_AddEditTask.cshtml")
                            </div>
                        </fieldset>

                    </div>
                    <div ng-if="editView" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 zero-padding-left-right-div form-style">
                        <fieldset>
                            <legend>
                                Edit Task
                            </legend>
                            <div class="legend2 pull-right">
                                <button ng-click="cancelEdit()" class="btn btn-xs btn-default" tooltip data-toggle="tooltip" data-placement="top" title="close"><i class="fa fa-close"></i></button>
                            </div>
                            <div id="editFormDiv">
                                @Html.Partial("~/Views/TaskTracker/_AddEditTask.cshtml")
                            </div>
                        </fieldset>
                    </div>
                    <div ng-if="detailView" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 zero-padding-left-right-div form-style">
                        <fieldset>
                            <legend>
                                View Task
                            </legend>
                            <div class="legend2 pull-right">
                                <button ng-click="cancelView()" class="btn btn-xs btn-default" tooltip data-toggle="tooltip" data-placement="top" title="close"><i class="fa fa-close"></i></button>
                            </div>
                            <div id="detailFormDiv">
                                @Html.Partial("~/Views/TaskTracker/_ViewTask.cshtml")
                            </div>
                        </fieldset>

                    </div>
                </div>
            </div>


        </div>
        <div class="modal fade" id="inactiveWarningModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="removeTask">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">Warning!!!!</h4>
                        </div>
                        <div class="col-lg-12 text-center" ng-show="isRemoved">
                            <div style="margin-top:2%;">
                                <img src="~/Content/Images/ajax-loader.gif" style="width:50px;" /> Please Wait..
                            </div>
                        </div>
                        <div class="modal-body" ng-show="!isRemoved">
                            Do you really want to Close the Task ?
                            <input type="hidden" name="TaskTrackerId" value="{{task.TaskTrackerId}}" />
                            @*<input type="hidden" name="StatusType" value="2" />*@
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" ng-click="removeTask()" data-dismiss="modal">Continue</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</div>

