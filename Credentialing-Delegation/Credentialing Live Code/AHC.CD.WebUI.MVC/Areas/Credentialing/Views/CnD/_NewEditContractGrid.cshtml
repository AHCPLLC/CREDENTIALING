
@model AHC.CD.WebUI.MVC.Areas.Credentialing.Models.Loading.ContractGridViewModel
<script src="~/Scripts/Lib/Bootstrap/jasny-bootstrap.js"></script>
<link href="~/Content/SharedCss/jasny-bootstrap.css" rel="stylesheet" />

<style>
    .table {
        width: 100%;
        max-width: 100%;
        margin-bottom: 0px;
    }

    .ProviderTypeSelectAutoList1.popover.bottom {
        margin-top: 54px;
    }
    .rowColor {
        background-color: rgba(100, 149, 237, 0.72);
    }
</style>
<div>
    <form name="myForm" enctype="multipart/form-data" class="form-style">
        <div class="col-lg-12 form-group">
            <div class="col-lg-4">
                <label class="control-label small">NPI:</label>
                <div>
                    <i class="data-label" style="font-size:larger">{{tempContractData[0].NPINumber}}</i>
                </div>
            </div>
            <div class="col-lg-4">
                <label class="control-label small">Provider:</label>
                <div>
                    <i class="data-label" style="font-size:larger">{{tempContractData[0].ProviderName}}</i>
                </div>
            </div>
            <div class="col-lg-4">
                <label class="control-label small">Plan:</label>
                <div>
                    <i class="data-label" style="font-size:larger">{{tempContractData[0].PlanName || 'Not Available'}}</i>
                </div>
            </div>
            @*<div class="col-lg-4">
                <label class="control-label small">LOB:</label>
                <div>
                    <i class="data-label">{{LOBNameEdit || 'Not Available'}}</i>
                </div>
            </div>*@
        </div>

        <div class="panel-body">           
            <table class="table table-bordered table-condensed customtbodyStyle table-striped">
                <thead>
                    <tr class="rowColor">
                        <th>Business Entity</th>
                        <th>LOB</th>
                        <th>Initial Cred. Date*</th>
                        <th>Provider ID</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody ng-repeat="c in tempContractData track by $index">
                    <tr>
                        <td>{{c.BE}}</td>
                        <td>{{c.LOBName}}</td>                       
                        <td id="dataContainer{{$index}}">
                            <span ng-show="ShowVisibility =='QeditVisibility'+$index" id="dataSpan">
                                @Html.HiddenFor(model => model.ContractGridID, new { ng_value = "qTempObject.ContractGridID", data_ng_model = "qTempObject.ContractGridID" })
                                @Html.TextBoxFor(model => model.InitialCredentialingDate, new { data_ng_class = "{'input-validation-error':valid == false}", data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "qTempObject.InitialCredentialingDate", ng_change = "validityForQuickSave(c,$index)" })
                                <span ng-if="validRequired == false" class="text-danger field-validation-error">Initial Credentialing Date is required.</span>
                                <span ng-if="validFormat == false" class="text-danger field-validation-error">Please enter a valid date.</span>
                            </span>
                            <span ng-hide="ShowVisibility =='QeditVisibility'+$index">
                                <i class="data-label">{{c.InitiatedDate || 'Not Available' | date:'MM-dd-yyyy'}}</i>
                            </span>
                        </td>
                        <td>

                            <span ng-show="ShowVisibility =='QeditVisibility'+$index">
                                @Html.HiddenFor(model => model.Report.CredentialingContractInfoFromPlanID, new { ng_value = "qTempObject.Report.CredentialingContractInfoFromPlanID", data_ng_model = "qTempObject.Report.CredentialingContractInfoFromPlanID" })
                                @Html.TextBoxFor(model => model.Report.ProviderID, new { @class = "form-control input-sm", data_ng_model = "qTempObject.Report.ProviderID" })
                            </span>
                            <span ng-hide="ShowVisibility =='QeditVisibility'+$index">
                                <i class="data-label">{{c.ProviderID || 'Not Available'}}</i>
                            </span>
                        </td>
                        <td class="col-lg-2">
                            @*<button class="btn btn-xs btn-primary" ng-if=" (ShowVisibility!='QeditVisibility' +$index) && ViewOnlyMode" ng-click="SetVisibility('Qedit',$index);" tooltip data-toggle="tooltip" data-placement="left" title="Quick Edit"><i class="fa fa-pencil"></i></button>*@
                            @*<button class="btn btn-sm btn-warning" ng-if="ShowVisibility == 'QeditVisibility'+$index;" ng-click="ClearVisibility();" tooltip data-toggle="tooltip" data-placement="left" title="Cancel">Cancel</button>*@
                            <button type="submit" class="btn btn-sm btn-primary" ng-if="ShowVisibility == 'QeditVisibility'+$index;" ng-click="QuickSave(qTempObject,$index);" tooltip data-toggle="tooltip" data-placement="left" title="Confirm">Save</button>

                            @*<button ng-hide="Visibility =='editVisibility'+$index" class="btn btn-xs btn-primary" ng-click="Visibility='editVisibility'+$index;"><i class="fa fa-sort-down"></i></button>
                    <button ng-show="Visibility =='editVisibility'+$index" class="btn btn-xs btn-primary" ng-click="Visibility='closeEdit'+$index;"><i class="fa fa-sort-up"></i></button>*@
                            <button class="btn btn-xs btn-primary" ng-hide="ShowVisibility == 'QeditVisibility'+$index;" ng-click="SetVisibility('edit',$index);" tooltip data-toggle="tooltip" data-placement="left" title="Edit"><i class="fa fa-edit"></i></button>
                            <button class="btn btn-xs btn-default" ng-hide="ShowVisibility == 'QeditVisibility'+$index;" ng-click="SetVisibility('view',$index);" tooltip data-toggle="tooltip" data-placement="left" title="View"><i class="fa fa-eye"></i></button>
                            <button class="btn btn-xs btn-danger" ng-hide="ShowVisibility == 'QeditVisibility'+$index;" data-toggle="tooltip" data-placement="top" title="Remove" ng-click="initWarning(c,$index);" tooltip><i class="fa fa-minus-circle"></i></button>
                        </td>
                    </tr>
                    <tr ng-if="ShowVisibility =='editVisibility'+$index">
                        <td colspan="7">
                            <div id="PlanReportForm">
                                <form enctype="multipart/form-data" class="form-style">
                                    <div class="col-lg-12 form-group">
                                        @Html.HiddenFor(model => model.ContractGridID, new { ng_value = "eTempObject.ContractGridID" })
                                        @Html.HiddenFor(model => model.Report.CredentialingContractInfoFromPlanID, new { ng_value = "eTempObject.Report.CredentialingContractInfoFromPlanID", data_ng_model = "eTempObject.Report.CredentialingContractInfoFromPlanID" })

                                        <div class="col-lg-4">
                                            <label class="control-label small">Panel Status:</label>
                                            <div>

                                                <label class="radio-inline">
                                                    @Html.RadioButtonFor(model => model.Report.PanelStatusType, (int)(AHC.CD.Entities.MasterData.Enums.OpenCloseOption.Open), new { data_ng_model = "eTempObject.PanelStatusType" })Open
                                                </label>
                                                <label class="radio-inline">
                                                    @Html.RadioButtonFor(model => model.Report.PanelStatusType, (int)(AHC.CD.Entities.MasterData.Enums.OpenCloseOption.Close), new { data_ng_model = "eTempObject.PanelStatusType" })Close
                                                </label>

                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <label class="control-label small">Initial Credentialing Date *:</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.InitialCredentialingDate, new { data_val = "true", data_val_date = "Please enter date in mm/dd/yyyy format.", data_val_required = "Initial Credentialing Date is required.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "eTempObject.InitiatedDate", placeholder = "mm/dd/yyyy" })
                                            </div>
                                            @Html.ValidationMessageFor(model => model.InitialCredentialingDate, "", new { @class = "text-danger" })
                                        </div>
                                        <div class="col-lg-4">
                                            <label class="control-label small">Effective Date:</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.Report.InitiatedDate, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "eTempObject.EffectiveDate",  data_ng_change = "SetRecredentialingDate(eTempObject.EffectiveDate)", placeholder = "mm/dd/yyyy" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="col-lg-12 form-group">

                                        <div class="col-lg-4">
                                            <label class="control-label small">Welcome Letter Date:</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.Report.CredentialedDate, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "eTempObject.WelcomeLetterDate", placeholder = "mm/dd/yyyy" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <label class="control-label small">Termination Date:</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.Report.TerminationDate, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "eTempObject.TerminationDate", placeholder = "mm/dd/yyyy" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <label class="control-label small">Re-Credentialing Date:</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.Report.ReCredentialingDate, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "eTempObject.ReCredentialingDate", placeholder = "mm/dd/yyyy" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="col-lg-12 form-group">

                                        <div class="col-lg-4">
                                            <label class="control-label small">Group ID:</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.Report.GroupID, new { @class = "form-control input-sm", data_ng_model = "eTempObject.GroupID" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <label class="control-label small">Provider ID</label>
                                            <div>
                                                @Html.TextBoxFor(model => model.Report.ProviderID, new { @class = "form-control input-sm", data_ng_model = "eTempObject.ProviderID" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4 form-group">
                                            <label class="control-label small">Participating Status:</label>
                                            @Html.HiddenFor(model => model.Report.ParticipatingStatus, new { ng_value = "eTempObject.ParticipatingStatus" })
                                            @*<input type="hidden" name="ParticipatingStatus" value="{{eTempObject.Report.ParticipatingStatus}}" />*@
                                            <input class="form-control input-sm" autocomplete="off" ng-model="eTempObject.ParticipatingStatus" ng-focus="searchCumDropDown('statuslist')" />
                                            <div class="ProviderTypeSelectAutoList popover fade bottom in" role="tooltip" id="statuslist">
                                                <table class="table table-striped table-bordered table-hover table-condensed" style="margin-bottom: 0px;">
                                                    <tbody>
                                                        <tr ng-repeat="status in filteredstatuslist = (ParticipatingStatusList | filter:eTempObject.ParticipatingStatus) track by $index" ng-click="SelectStatus(status.ParticipatingStatus)" class="pointer">
                                                            <td>{{status.ParticipatingStatus}}</td>
                                                        </tr>
                                                        <tr ng-if="ParticipatingStatusList.length == 0">
                                                            <td>No data..... </td>
                                                        </tr>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>

                                    <div class="clearfix"></div>


                                    <input type="hidden" name="Report.WelcomeLetterPath" value="{{eTempObject.Report.WelcomeLetterPath}}" />
                                    <div class="col-lg-12 form-group">
                                        <div class="col-lg-12">
                                            <label class="control-label small">Welcome Letter:</label><br />
                                            <div class="form-group" ng-class="{'col-lg-11':eTempObject.Report.WelcomeLetterPath,'col-lg-12':!eTempObject.Report.WelcomeLetterPath}">
                                                <div class="fileinput fileinput-new input-group" data-provides="fileinput">
                                                    <div class="form-control jancyFileWrapTexts" data-trigger="fileinput">
                                                        <input type="hidden" />
                                                        <i class="glyphicon glyphicon-file fileinput-exists"></i>
                                                        <span class="fileinput-filename wraptext"></span>
                                                    </div>
                                                    <span class="input-group-addon btn btn-default btn-sm btn-file">
                                                        <span class="fileinput-new small">Select Supporting Document</span>
                                                        <span class="fileinput-exists">Change</span>
                                                        @Html.TextBoxFor(model => model.Report.WelcomeLetter, new { name = "Report.WelcomeLetter", ng_data_model = "tempObject.Report.WelcomeLetterPath", type = "file", onchange = "angular.element(this).scope().setFiles(this)" })
                                                    </span>
                                                    <a href="#" class="input-group-addon btn btn-default btn-sm fileinput-exists" data-dismiss="fileinput" ng-click="clearFile()">Remove</a>
                                                </div>
                                                @Html.ValidationMessageFor(model => model.Report.WelcomeLetterPath, "", new { ng_value = "eTempObject.Report.WelcomeLetterPath" })
                                            </div>
                                            <div ng-show="eTempObject.Report.WelcomeLetterPath" class="col-lg-1">
                                                <a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{eTempObject.Report.WelcomeLetterPath}}" target="_blank"><i class="fa fa-2x fa-file"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="col-lg-12">
                                        <div class="col-lg-12">
                                            <button type="button" class="btn btn-warning btn-sm" ng-click="ClearVisibility();">Cancel</button>
                                            <button type="submit" class="btn btn-primary btn-sm pull-right" ng-click="SaveReport(eTempObject,$index)">Submit</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="ShowVisibility =='viewVisibility'+$index">
                        <td colspan="7">
                            <div class="col-lg-12 form-group">

                                <div class="col-lg-4">
                                    <label class="control-label small">Panel Status:</label>
                                    <div>
                                        <i ng-if="c.PanelStatusType == 1" class="data-label">Open</i>
                                        <i ng-if="c.PanelStatusType == 2" class="data-label">Close</i>
                                        <i ng-if="c.PanelStatusType != 2 && c.PanelStatusType != 1" class="data-label">Not Available</i>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="control-label small">Initial Credentialing Date: *</label>
                                    <div>
                                        <i class="data-label">{{c.InitiatedDate || 'Not Available' | date: "MM-dd-yyyy"}}</i>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="control-label small">Effective Date:</label>
                                    <div>
                                        <i class="data-label">{{c.EffectiveDate || 'Not Available' | date: "MM-dd-yyyy"}}</i>
                                    </div>
                                </div>

                            </div>
                            <div class="clearfix"></div>
                            <div class="col-lg-12 form-group">

                                <div class="col-lg-4">
                                    <label class="control-label small">Welcome Letter Date:</label>
                                    <div>
                                        <i class="data-label">{{c.WelcomeLetterDate || 'Not Available' | date: "MM-dd-yyyy"}}</i>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="control-label small">Termination Date:</label>
                                    <div>
                                        <i class="data-label">{{c.TerminationDate || 'Not Available' | date: "MM-dd-yyyy"}}</i>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="control-label small">Re-Credentialing Date:</label>
                                    <div>
                                        <i class="data-label">{{c.ReCredentialingDate || 'Not Available' | date: "MM-dd-yyyy"}}</i>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-lg-12 form-group">

                                <div class="col-lg-4">
                                    <label class="control-label small">Group ID:</label>
                                    <div>
                                        <i class="data-label">{{c.GroupID || 'Not Available'}}</i>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="control-label small">Provider ID:</label>
                                    <div>
                                        <i class="data-label">{{c.ProviderID || 'Not Available'}}</i>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="control-label small">Welcome Letter</label>
                                    <div ng-show="c.Report.WelcomeLetterPath">
                                        <i class="data-label"><a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{c.Report.WelcomeLetterPath}}" class="pointer" target="_blank" tooltip data-toggle="tooltip" data-placement="top" title="Welcome Letter"><i class="fa fa-file"></i></a></i>
                                    </div>
                                    <div ng-hide="c.Report.WelcomeLetterPath">
                                        <i class="data-label">Not Available</i>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-lg-12">

                                <div class="col-lg-4">
                                    <label class="control-label small">Participating Status:</label>
                                    <div>
                                        <i class="data-label">{{c.ParticipatingStatus || 'Not Available'}}</i>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div><br />
                            <div class="col-lg-12">
                                <div class="col-lg-12">
                                    <div ng-show="activeMessageDiv=='ReportSaveSuccess'+$index" class="alert alert-success" role="alert">
                                        <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
                                        <i class="fa fa-2x fa-arrow-up"></i> {{messageDesc}}
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-lg-12">
                                <div class="col-lg-12">
                                    <button class="btn btn-sm btn-primary pull-right" ng-click="SetVisibility('edit',$index);"><i class="fa fa-edit">&nbsp;Edit</i></button>
                                    <button type="button" class="btn btn-warning btn-sm pull-left" ng-click="ClearVisibility();">Cancel</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
        
        <div class="col-lg-12">
            <div class="col-lg-12">
                <button type="button" class="btn btn-warning btn-sm" ng-click="cancelEdit();">Cancel</button>
                <button type="submit" class="btn btn-primary btn-sm pull-right" ng-click="SaveReport()">Submit</button>
            </div>
        </div>
    </form>
</div>
