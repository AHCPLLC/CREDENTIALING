@model AHC.CD.WebUI.MVC.Areas.Credentialing.Models.CredentialingCheckList.CredentialingAppointmentDetailViewModel

<div ng-if="tempObject.CredentialingInfo != undefined">
    <form id="CCMAction">
        @Html.HiddenFor(model => model.CredentialingAppointmentDetailID, new { ng_value = "tempObject.CredentialingInfo.CredentialingAppointmentDetailID" })


        <div class="col-lg-12 zero-padding-left-right-div" style="background-color: white; padding-top: 8px;">
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="SalutationType">Name</label>
                <div>
                    @*<span>Kellie Duffy</span>*@
                    <span>{{tempObject.CredentialingInfo.Name}}</span>
                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="FirstName">Type of practice</label>
                <div>
                    @*<span>Solo Practice</span>*@
                    <span>{{tempObject.CredentialingInfo.ProviderType ||'Not Available'}}</span>
                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="MiddleName">County</label>
                <div>
                    @*<span>Hernando</span>*@
                    <span>{{tempObject.CredentialingInfo.County || 'Not Available'}}</span>
                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="LastName">Specialty</label>
                <div>
                    @*<span>Family Practitioner</span>*@

                    <span>
                        {{tempObject.CredentialingInfo.Specialty ||'Not Available'}}
                    </span>


                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small">Board Certification</label>
                <div>
                    @*<span>Yes</span>*@
                    <span>{{tempObject.CredentialingInfo.BoardCertified|| 'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForBoardCertification!=null">({{tempObject.CredentialingInfo.RemarksForBoardCertification}})</span>
                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="SalutationType">Hospital Privileges</label>
                <div>
                    @*<span>St. Oak Hill Hospital</span>*@
                    <span>{{tempObject.CredentialingInfo.HospitalPrivileges||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForHospitalPrivileges!=null">({{tempObject.CredentialingInfo.RemarksForHospitalPrivileges}})</span>

                </div>
            </div>
        </div>
        <div class="col-lg-12 zero-padding-left-right-div" style="background-color: white; padding-top: 8px;">
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="FirstName">Covering Physicians</label>
                <div>
                    <span>
                        {{tempObject.CredentialingInfo.CoveringPhysicians||'Not Available'}}
                    </span>
                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="MiddleName">Gaps in Practice</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.GapsInPractice||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForGapsInPractice!=null">({{tempObject.CredentialingInfo.RemarksForGapsInPractice}})</span>

                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="LastName">Clean License</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.CleanLicense||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForCleanLicense!=null">({{tempObject.CredentialingInfo.RemarksForCleanLicense}})</span>

                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small">NPDB Issues</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.NPDBIssue||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForNPDBIssue!=null">({{tempObject.CredentialingInfo.RemarksForNPDBIssue}})</span>

                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="SalutationType">Malpractice issues</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.MalpracticeIssue||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForMalpracticeIssue!=null">({{tempObject.CredentialingInfo.RemarksForMalpracticeIssue}})</span>
                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small" for="FirstName">Years In practice</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.YearsInPractice||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForMalpracticeIssue!=null">({{tempObject.CredentialingInfo.RemarksForMalpracticeIssue}})</span>

                </div>
            </div>
        </div>
        <div class="col-lg-12 zero-padding-left-right-div" style="background-color: white; padding-top: 8px;">
            <div class="col-lg-4 form-group">
                <label class="control-label small" for="LastName">Site Visit Required. If yes, were there any issues</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.SiteVisitRequired||'Not Available'}}</span>
                    <span ng-if="tempObject.CredentialingInfo.RemarksForSiteVisitRequired!=null">({{tempObject.CredentialingInfo.RemarksForSiteVisitRequired}})</span>

                </div>
            </div>
            <div class="col-lg-4 form-group">
                <label class="control-label small" for="MiddleName">Welcome Letter Mailed Date</label>
                <div>
                    <span>{{tempObject.CredentialingInfo.WelcomeLetterMailedDate | date:"MM/dd/yyyy"}}</span>
                    <span ng-if="tempObject.CredentialingInfo.AssignedCCO!=null">({{tempObject.CredentialingInfo.AssignedCCO}})</span>


                </div>
            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small">Welcome Letter</label>

                @*<span><a data-toggle="tooltip" data-placement="right" title="" href="" target="_blank" data-original-title="Document"><i class="fa fa-2x fa-file"></i></a></span>*@
                <div class="col-lg-12 col-md-12 col-sm-12 zero-padding-left-right-div" ng-if="tempObject.CredentialingInfo.WelcomeLetterPath">
                    <a toggle data-toggle="tooltip" data-placement="bottom" title="Welcome Letter" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{tempObject.CredentialingInfo.WelcomeLetterPath}}" target="_blank"><i class="fa fa-2x fa-file"></i></a>
                    <i style="font-weight:100"></i>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 zero-padding-left-right-div" ng-if="!tempObject.CredentialingInfo.WelcomeLetterPath">
                    <span>Not Available</span>
                </div>

            </div>
            <div class="col-lg-2 form-group">
                <label class="control-label small">Attached document</label>

                @*<span><a data-toggle="tooltip" data-placement="right" title="" href="" target="_blank" data-original-title="Document"><i class="fa fa-2x fa-file"></i></a></span>*@
                @*<span><a data-toggle="tooltip" data-placement="right" title="" href="" target="_blank" data-original-title="Document"><i class="fa fa-2x fa-file"></i></a></span>*@
                <div class="col-lg-12 col-md-12 col-sm-12 zero-padding-left-right-div" ng-if="tempObject.CredentialingInfo.FileUploadPath">
                    <a toggle data-toggle="tooltip" data-placement="bottom" title="Attached Document" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{tempObject.CredentialingInfo.FileUploadPath}}" target="_blank"><i class="fa fa-2x fa-file"></i></a>
                    <i style="font-weight:100"></i>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 zero-padding-left-right-div" ng-if="!tempObject.CredentialingInfo.FileUploadPath">
                    <span>Not Available</span>
                </div>

            </div>
        </div>

        <div ng-if="appointment.Status=='Pending'||appointment.Status=='New'">
            <div class="col-lg-12 zero-padding-left-right-div" style="background-color: white; padding-top: 8px;">
                <div class="col-lg-4 form-group">
                    <div class="col-lg-12 zero-padding-left-right-div">
                        <label class="control-label small">Provider Level :</label>
                        <div>
                            @foreach (var value in Enum.GetValues(typeof(AHC.CD.Entities.MasterData.Enums.CredentialingLevel)))
                            {
                                <label class="radio-inline control-label">
                                    @Html.RadioButtonFor(model => model.CredentialingAppointmentResult.CredentialingLevel, (int)value, new { data_ng_model = "tempObject.CredentialingInfo.RecommendedLevel", data_ng_click = "getProviderLevelValue('@value')", Value = value }) @value.ToString()
                                </label>
                            }

                        </div>
                    </div>

                    <div class="col-lg-12 zero-padding-left-right-div form-group" style="margin-top:37px">
                        <label class="control-label small">Date :</label>
                        <div>
                            @Html.TextBoxFor(model => model.CredentialingAppointmentResult.SignedDate, new { style = "width:100%", data_ng_model = "tempObject.CredentialingInfo.AppointmentDate", data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", placeholder = "MM/DD/YYYY" })
                        </div>
                    </div>

                </div>
                <div class="col-lg-4 form-group">
                    <label class="control-label small">Remarks :</label>
                    <div>
                        @Html.TextAreaFor(Model => Model.CredentialingAppointmentResult.RemarkForApprovalStatus, new { style = "width:100%;height:108px", @cols = "20" })
                    </div>
                </div>

                <input type="hidden" name="CredentialingAppointmentResult.SignaturePath" value="{{image}}" />
                <div class="col-lg-4 form-group">
                    <label class="control-label small" for="">
                        Signature* :
                        <select class="input-xs" ng-init="SignatureOption='digitalsignature'" ng-model="SignatureOption" id="selectedOptionforSign" ng-value="SignaturePath == null?'digitalsignature':'reusedigitalsignature'" style="color:black" ng-change="signaturefunction()">
                            <option value="digitalsignature" ng-selected="SignaturePath == null">Digital Signature</option>
                            <option value="reusedigitalsignature" ng-selected="SignaturePath != null">Use Previous Signature</option>
                            <option value="upload">Upload Signature</option>
                        </select>
                    </label>

                    <div ng-show="showreusesignaturediv" class="fileinput fileinput-exists col-lg-8 col-md-8 col-sm-8 control-label">
                        <div>
                            <img id="image" ng-show="SignaturePath!=null" height="98" width="248" ng-src="{{SignaturePath}}" />
                            <span style="color:red" ng-show="SignaturePath==null" class="pull-left">No Previous Signature Found.</span>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div ng-show="showsignaturediv">
                        <span class="fileinput fileinput-exists col-lg-9 col-md-9 col-sm-9 control-label">
                            <canvas id="myCanvas" height="98" width="248" style="border: solid;" ng-signature-pad="signature"></canvas>
                            <span class="text-danger" style="color:red" ng-show="errormessageforsignature">Please Provide the Signature</span>
                            <canvas id='blank' style='display:none'></canvas>
                            @*<pre ng-bind="signature | json" hidden></pre>*@
                            @*<button ng-click="savedigitalsignature()" class="btn btn-success">Save</button>*@
                        </span>
                        <span class="col-lg-1">
                            <a id="clear" ng-click="cleardigitalsignature()" class="btn btn-xs btn-primary" style="margin-top: 83px; margin-left: 20px;">Clear</a>
                        </span>
                    </div>
                    <div class="clearfix"></div>
                    <div ng-show="showuploaddiv" class="fileinput fileinput-exists col-lg-9 col-md-9 col-sm-9 control-label" data-provides="fileinput">
                        @*<div class="fileinput-preview thumbnail file_preview_upload" style="width:100%;height:150px; line-height: 83px; background-image: url('/Content/Images/no-img.jpg'); background-size: 100% 97%;" data-trigger="fileinput"><img ng-src="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{tempObject.CredentialingAppointmentResult.SignaturePath}}"></div>*@
                        <div class="fileinput-preview thumbnail file_preview_upload" style="width:248px ;height:107px; line-height: 83px; background-image: url('/Content/Images/no-img.jpg'); background-size: 100% 97%; " data-trigger="fileinput">
                            <img ng-src="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{tempObject.CredentialingInfo.SignaturePath}}" ng-show="tempObject.CredentialingInfo.SignaturePath!=null">
                            @*@Html.ValidationMessageFor(m => m.CredentialingAppointmentResult.SignatureFile, "", new { data_ng_toggle = "check", @class = "text-danger", @id = "errorid" })*@
                        </div>
                        <div style="margin-top: -28px; margin-left: 254px;">
                            <span class="btn btn-primary btn-xs btn-file">
                                <span class="fileinput-new"><i class="fa fa-search"></i></span>
                                <span id="selectfile" class="fileinput-exists" tooltip data-toggle="tooltip" data-placement="bottom" title="Edit"><i class="fa fa-search"></i></span>
                                @Html.TextBoxFor(model => model.CredentialingAppointmentResult.SignatureFile, new { type = "file", data_ng_model = "tempObject.CredentialingInfo.SignaturePath", required = "required", data_ng_change = "checkUpload()" })
                            </span>
                            <button ng-if="form.$valid" class="btn btn-success btn-xs fileinput-exists" ng-init="check='true'" type="submit" tooltip data-toggle="tooltip" data-placement="bottom" title="Upload"><i class="fa fa-upload"></i></button>
                            <button ng-show="tempObject.CredentialingInfo.SignaturePath!=null && form.$valid" ng-click="ProfilePictureRemove(Provider.ProfilePhotoPath)" class="btn btn-danger btn-xs fileinput-exists" data-toggle="tooltip" data-placement="bottom" title="Remove"><i class="fa fa-trash"></i></button>

                            <span ng-if="form.$valid" ng-hide="valstaus">Please click on upload button to upload the selected picture.</span>
                        </div>
                        <span class="text-danger" style="color:red" ng-show="errormessageforuploadsignature">Please upload the Signature</span>

                    </div>
                </div>
                <input type="hidden" name="credentialingappointmentresult.approvalstatustype" value="{{SubmitApprovalStatus}}">
            </div>

            @*<div class="form-group" id="approvestat">
                    <label class="col-lg-5 col-md-5 col-sm-5 control-label">Status* :</label>
                    <div class="col-lg-6 col-md-6 col-sm-6 control-label">
                        @Html.EnumDropDownListFor(Model => Model.CredentialingAppointmentResult.ApprovalStatusType, "-- select --", new { @class = "form-control input-sm", data_ng_model = "approvalStatusType" })
                        @Html.ValidationMessageFor(m => m.CredentialingAppointmentResult.ApprovalStatusType, "", new { @class = "text-danger" })
                    </div>
                </div>*@
            <div class="col-lg-12 zero-padding-left-right-div" style="background-color: white; padding-bottom: 8px;">
                <span class="col-lg-4"><button @*get-siblings*@ @*ng-model="VisibilityControl"*@ class="ApprovalSubmission btn btn-danger btn-xs pull-left " ng-click="SubmitApproval('Reject')">Reject</button></span>
                <span class="col-lg-4" ng-if="appointment.Status=='New'"><button @*get-siblings*@ @*ng-model="VisibilityControl"*@ class="ApprovalSubmission btn btn-warning btn-xs" ng-click="SubmitApproval('put approval On Hold')" style="margin-left: 160px;">On Hold</button></span>
                <span class="" ng-class="{'col-lg-4': appointment.Status =='New','col-lg-8':  appointment.Status =='Pending'}">
                    <button @*get-siblings*@ @*ng-model="visibilitycontrol"*@ class="ApprovalSubmission btn btn-primary btn-xs pull-right" ng-click="SubmitApproval('Approve')">Approve</button>
                </span>
            </div>
        </div>
        <div ng-if="appointment.Status=='Approved'||appointment.Status=='Rejected'">
            <div class="col-lg-12 zero-padding-left-right-div" style="background-color: white;">

                <div class="col-lg-4 form-group">
                    <label class="control-label small" for="LastName">Signed Date</label>
                    <div>
                        <span>{{tempObject.CredentialingInfo.SignedDate | date:"MM/dd/yyyy"}}</span>
                    </div>
                </div>
                <div class="col-lg-2 form-group">
                    <label class="control-label small" for="LastName">Status</label>
                    <div>
                        <span>{{tempObject.CredentialingInfo.ApprovalStatus}}</span>
                    </div>
                </div>
                <div class="col-lg-2 form-group">
                    <label class="control-label small" for="LastName">Remark</label>
                    <div>
                        <span>{{tempObject.CredentialingInfo.RemarkForApprovalStatus}}</span>
                    </div>
                </div>
                <div class="col-lg-4 form-group">
                    <label class="control-label small" for="LastName">Signature</label>
                    <div>
                        <span><img src="{{tempObject.SignaturePath}}" style="height:70px;width:80%"></span>
                    </div>
                </div>
            </div>
        </div>


    </form>
</div>

@*<ccm-modal saving="savingStatus" message="Status" modal-id="StatusAction" modal-title="Confirm Submission" modal-message="Do you want to " modal-src="/CustomHTML/ApprovalModal.html" remove="ccmAction('CCMAction')"></ccm-modal>*@


<div id="StatusAction" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="panel panel-default">
            <div class="panel-heading ng-binding">
                Confirm Submission
                <button type="button" ng-disabled="saving" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
            </div>
            <div class="panel-body ng-binding">
                Do you want to {{Status}} ?
            </div>
            <div class="panel-footer">
                <div class="clearfix">
                    <button class="ApprovalSubmission btn btn-primary btn-sm pull-right" ng-click="ccmAction('CCMAction')">Yes</button>
                    @*to close the expanded row*@
                    <button class="ApprovalSubmission hidden" get-siblings id="closeExpendedRow"></button>
                    <button type="button" class="btn btn-default btn-sm pull-right" style="margin-right: 6px;" ng-click="ConfirmAppointmentApproval()">No</button>
                    <span class="pull-right">
                        <saving loading="SavingStatus"></saving>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="tempObject.CredentialingInfo == undefined">
    <div style="text-align:center;font-weight:bold;padding-top:10px">
        <img src="~/Content/Images/loading.gif" width="22px" />
        <h4> Loading...</h4>
    </div>
</div>

