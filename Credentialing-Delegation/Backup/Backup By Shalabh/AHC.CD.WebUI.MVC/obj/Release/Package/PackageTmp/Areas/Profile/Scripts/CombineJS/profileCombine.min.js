function showLocationList(a){$(a).parent().find(".ProviderTypeSelectAutoList").first().show()}profileApp.service("dynamicFormGenerateService",["$compile",function(a){this.getForm=function(b,c){return a(c)(b)}}]),profileApp.directive("tooltip",function(){return function(a,b){b.tooltip()}}),profileApp.filter("orderEmpty",function(){return function(a,b,c){var d,e,f;if(angular.isArray(a)){switch(d=a.filter(function(a){return a[b]}),e=a.filter(function(a){return!a[b]}),c){case"toBottom":f=d.concat(e);break;case"toTop":f=e.concat(d);break;default:f=a}return f}}}),profileApp.directive("validFile",function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){d.$setViewValue(b.val())},b.bind("change",function(){a.$apply(function(){d.$render()})})}}}),profileApp.controller("profileDemographicsController",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){$(document).ready(function(){$("#Loading_Message").text("Gathering Profile Data..."),c({method:"GET",url:"/Profile/MasterProfile/get?profileId="+profileId}).success(function(a){try{for(key in a)b.$emit(key,a[key]);$("#Loading_Message").text("Inserting Profile Data..."),$("#loadingData").hide("fast")}catch(c){$("#loadingData").hide("fast")}}).error(function(){$("#loadingData").hide("fast")})}),a.Provider={},a.message={},b.$on("ProfilePhotoPath",function(b,c){a.Provider.ProfilePhotoPath=c}),b.$on("PersonalDetail",function(b,c){a.Provider.PersonalDetails=c,a.Provider.PersonalDetails.MaritalStatusType||(a.Provider.PersonalDetails.MaritalStatusType="")}),b.$on("OtherLegalNames",function(b,c){if(c.length>0)for(var d in c)c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate);a.Provider.OtherLegalNames=c}),b.$on("HomeAddresses",function(b,c){if(c.length>0)for(var d in c)c[d].LivingEndDate=ConvertDateFormat(c[d].LivingEndDate),c[d].LivingFromDate=ConvertDateFormat(c[d].LivingFromDate);a.HomeAddresses=c}),b.$on("ContactDetail",function(b,c){if(c)for(var d in c.PreferredContacts)1==c.PreferredContacts[d].PreferredWrittenContactType&&(c.PreferredContacts[d].ContactType="Home Phone");a.Provider.ContactDetails=c}),b.$on("PersonalIdentification",function(b,c){a.Provider.PersonalIdentification=c}),b.$on("BirthInformation",function(b,c){c&&(c.DateOfBirth=ConvertDateFormat(c.DateOfBirth)),a.Provider.BirthInformation=c}),b.$on("VisaDetail",function(b,c){c&&c.VisaInfo&&(c.VisaInfo.VisaExpirationDate=ConvertDateFormat(c.VisaInfo.VisaExpirationDate),c.VisaInfo.VisaTypeID||(c.VisaInfo.VisaTypeID=""),c.VisaInfo.VisaStatusID||(c.VisaInfo.VisaStatusID=""),c.VisaInfo.CountryOfIssue||(c.VisaInfo.CountryOfIssue="")),a.Provider.VisaDetails=c}),b.$on("LanguageInfo",function(b,c){a.Provider.LanguageInfo=c}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),d.getMasterData("/Profile/MasterData/getallvisatypes").then(function(b){a.VisaTypes=b}),d.getMasterData("/Profile/MasterData/getallvisastatus").then(function(b){a.VisaStatuses=b}),a.Languages=Languages,a.CountryDialCodes=countryDailCodes,a.CountryOfissue=CountryOfissue,a.PreferredContacts=[{PreferredContactID:null,ContactType:"Home Phone",PreferredWrittenContactType:1,StatusType:1,PreferredIndex:1},{PreferredContactID:null,ContactType:"Fax",PreferredWrittenContactType:2,StatusType:1,PreferredIndex:2},{PreferredContactID:null,ContactType:"Mobile",PreferredWrittenContactType:3,StatusType:1,PreferredIndex:3},{PreferredContactID:null,ContactType:"Email",PreferredWrittenContactType:4,StatusType:1,PreferredIndex:4},{PreferredContactID:null,ContactType:"Pager",PreferredWrittenContactType:5,StatusType:1,PreferredIndex:5}],a.addressHomeAutocomplete=function(b){a.tempObject.City=b,b.length>1&&!angular.isObject(b)?e.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation1=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.addressAutocompleteForBirthInformation=function(b){a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?e.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setBirthAddressModels(b)},a.selectedLocation=function(b){a.setBirthAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetBirthAddressModels=function(){a.tempObject.StateOfBirth="",a.tempObject.CountryOfBirth=""},a.setBirthAddressModels=function(b){a.tempObject.CityOfBirth=b.City,a.tempObject.StateOfBirth=b.State,a.tempObject.CountryOfBirth=b.Country},a.ViewPersonalDetails=!0,a.PersonalDetailsToggle=function(c){"EditPersonalDetails"==c?(b.visibilityControl=c,a.getProviderTypesAndTempData()):b.visibilityControl=c},a.getProviderTypesAndTempData=function(){if(a.TempPersonalDetailsForEdit=angular.copy(a.Provider.PersonalDetails),a.tempProviderTypes=angular.copy(a.ProviderTypes),a.tempSelectedDeactivatedProviderTypes=[],a.TempPersonalDetailsForEdit)if(a.TempPersonalDetailsForEdit.ProviderTitles){for(var b=0;b<a.TempPersonalDetailsForEdit.ProviderTitles.length;b++)2==a.TempPersonalDetailsForEdit.ProviderTitles[b].StatusType&&(a.tempSelectedDeactivatedProviderTypes.push(a.TempPersonalDetailsForEdit.ProviderTitles[b]),a.TempPersonalDetailsForEdit.ProviderTitles.splice(b,1),b--);for(var b in a.TempPersonalDetailsForEdit.ProviderTitles)for(var c in a.tempProviderTypes)a.TempPersonalDetailsForEdit.ProviderTitles[b].ProviderType.ProviderTypeID==a.tempProviderTypes[c].ProviderTypeID&&1==a.TempPersonalDetailsForEdit.ProviderTitles[b].StatusType?a.tempProviderTypes.splice(c,1):a.TempPersonalDetailsForEdit.ProviderTitles[b].ProviderType.ProviderTypeID==a.tempProviderTypes[c].ProviderTypeID&&2==a.TempPersonalDetailsForEdit.ProviderTitles[b].StatusType&&(a.tempSelectedDeactivatedProviderTypes.push(a.TempPersonalDetailsForEdit.ProviderTitles[b]),a.TempPersonalDetailsForEdit.ProviderTitles.splice(b,1))}else a.TempPersonalDetailsForEdit.ProviderTitles=[];else a.TempPersonalDetailsForEdit={ProviderTitles:[]}},a.SelectProviderType=function(b){for(var c=!1,d=0;d<a.tempSelectedDeactivatedProviderTypes.length;d++)if(a.tempSelectedDeactivatedProviderTypes[d].ProviderType.ProviderTypeID==b.ProviderTypeID){a.tempSelectedDeactivatedProviderTypes[d].StatusType=1,a.TempPersonalDetailsForEdit.ProviderTitles.push(a.tempSelectedDeactivatedProviderTypes[d]),a.tempSelectedDeactivatedProviderTypes.splice(d,1),c=!0;break}c||a.TempPersonalDetailsForEdit.ProviderTitles.push({ProviderType:b,ProviderTitleID:null,ProviderTypeId:b.ProviderTypeID,StatusType:1}),a.tempProviderTypes.splice(a.tempProviderTypes.indexOf(b),1)},a.ActionProviderType=function(b,c){if("remove"==c)a.TempPersonalDetailsForEdit.ProviderTitles.splice(a.TempPersonalDetailsForEdit.ProviderTitles.indexOf(b),1),a.tempProviderTypes.push(b.ProviderType);else if("deactivate"==c){var d=0;for(var e in a.TempPersonalDetailsForEdit.ProviderTitles)1==a.TempPersonalDetailsForEdit.ProviderTitles[e].StatusType&&d++;b.StatusType=1==d?1:2}else"activate"==c&&(b.StatusType=1)},a.ProfileUpload=function(c){if(a.valstaus=!0,ResetFormForValidation($("#"+c)),$("#"+c).valid()){var d=$("#ProfilePic")[0];$.ajax({url:"/Profile/Demographic/FileUploadAsync?profileId="+profileId,type:"POST",data:new FormData(d),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl="",f.callAlertMessage("alertPersonalDetailsSuccess","Profile Picture uploaded successfully.","success",!0)):f.callAlertMessage("alertPersonalDetailsSuccess",c.status,"danger",!0)}})}},a.ProfilePictureRemove=function(c){$.ajax({url:"/Profile/Demographic/FileRemoveAsync?profileId="+profileId,type:"POST",data:new FormData(c),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl="",f.callAlertMessage("alertPersonalDetailsSuccess","Profile Picture removed successfully.","success",!0)):f.callAlertMessage("alertPersonalDetailsSuccess",c.status,"danger",!0)}})},a.DemographicsUpdatePersonalDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&a.TempPersonalDetailsForEdit.ProviderTitles.length>0?(a.isHasError=!1,$.ajax({url:"/Profile/Demographic/UpdatePersonalDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){if("true"==d.status){if(d.personalDetail.ProviderTitles.length>0)for(var e in d.personalDetail.ProviderTitles)for(var g=0;g<a.ProviderTypes.length;g++)d.personalDetail.ProviderTitles[e].ProviderTypeId==a.ProviderTypes[g].ProviderTypeID&&(d.personalDetail.ProviderTitles[e].ProviderType=a.ProviderTypes[g]);a.Provider.PersonalDetails=d.personalDetail,a.Provider.PersonalDetails.MaritalStatusType||(a.Provider.PersonalDetails.MaritalStatusType=""),FormReset($("#"+c)),b.visibilityControl="",f.callAlertMessage("alertPersonalDetailsSuccess","Personal Details updated successfully.","success",!0)}else f.callAlertMessage("alertPersonalDetailsError",d.status.split(","),"danger",!0)}})):a.isHasError=!0},a.saveOtherLegalName=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames.push(c.otherLegalName),b.visibilityControl="",FormReset(d),f.callAlertMessage("alertOtherLegalNameSuccess","Other Legal Name saved successfully.","success",!0)):f.callAlertMessage("alertOtherLegalNameError",c.status.split(","),"danger",!0)}})},a.updateOtherLegalName=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames[d]=c.otherLegalName,b.visibilityControl=d+"_ViewOtherLegalName",FormReset(e),f.callAlertMessage("alertOtherLegalNameSuccess"+d,"Other Legal Name updated successfully.","success",!0)):f.callAlertMessage("alertOtherLegalNameError"+d,c.status.split(","),"danger",!0)}})},a.saveHomeAddress=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.homeAddress.AddressPreferenceType)for(var e in a.HomeAddresses)if(1==a.HomeAddresses[e].AddressPreferenceType){a.HomeAddresses[e].AddressPreferenceType=2,a.HomeAddresses[e].AddressPreference="Secondary";break}c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),a.HomeAddresses.push(c.homeAddress),b.tempObject={},b.visibilityControl="",FormReset(d),f.callAlertMessage("alertHomeAddressSuccess","Home Address saved successfully.","success",!0)}else f.callAlertMessage("alertHomeAddressError",c.status.split(","),"danger",!0)}})},a.updateHomeAddress=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),1==c.homeAddress.AddressPreferenceType)for(var g in a.HomeAddresses)if(1==a.HomeAddresses[g].AddressPreferenceType){a.HomeAddresses[g].AddressPreferenceType=2,a.HomeAddresses[g].AddressPreference="Secondary";break}for(var g in a.HomeAddresses)a.HomeAddresses[g].HomeAddressID==c.homeAddress.HomeAddressID&&(a.HomeAddresses[g]=c.homeAddress);1==c.homeAddress.AddressPreferenceType?(b.visibilityControl="0_ViewHomeAddress",f.callAlertMessage("alertHomeAddressSuccess0","Home Address updated successfully.","success",!0)):(b.visibilityControl=d+"_ViewHomeAddress",f.callAlertMessage("alertHomeAddressSuccess"+d,"Home Address updated successfully.","success",!0)),FormReset(e)}else f.callAlertMessage("alertHomeAddressError"+d,c.status.split(","),"danger",!0)}})},a.removeHomeAddress=function(b){for(var c in a.HomeAddresses)if(b==c){a.HomeAddresses.splice(b,1);break}},a.ContactDetailsToggle=function(c){"EditContactDetails"==c?(b.visibilityControl=c,a.getTempContactDetailsForEdit()):(b.visibilityControl=c,a.ContactDetailsEmptyError=!1)},a.getTempContactDetailsForEdit=function(){if(a.TempContactDetailsForEdit=angular.copy(a.Provider.ContactDetails),a.TempPreferredWrittenContacts=angular.copy(a.PreferredWrittenContacts),a.TempPreferredContacts=angular.copy(a.PreferredContacts),null==a.TempContactDetailsForEdit)a.TempContactDetailsForEdit={PhoneDetails:[],EmailIDs:[],PreferredWrittenContacts:[],PreferredContacts:[]};else{if(a.TempContactDetailsForEdit.PhoneDetails.length>0){var b=a.getInactivatedDataArray(a.TempContactDetailsForEdit.PhoneDetails);a.TempContactDetailsForEdit.PhoneDetails=b.dataArray,a.tempSelectedDeactivatedPhonesDetails=b.temInactivatedData}if(a.TempContactDetailsForEdit.EmailIDs.length>0){var b=a.getInactivatedDataArray(a.TempContactDetailsForEdit.EmailIDs);a.TempContactDetailsForEdit.EmailIDs=b.dataArray,a.tempSelectedDeactivatedEmailIds=b.temInactivatedData}if(a.TempContactDetailsForEdit.PreferredContacts.length>0){var b=a.getInactivatedDataArray(a.TempContactDetailsForEdit.PreferredContacts);a.TempContactDetailsForEdit.PreferredContacts=b.dataArray,a.tempSelectedDeactivatedPreferredContacts=b.temInactivatedData}a.PreferredContactTypesArray=a.TempContactDetailsForEdit.PreferredContacts}},a.getInactivatedDataArray=function(a){for(var b=[],c=0;c<a.length;c++)2==a[c].StatusType&&(b.push(a[c]),a.splice(c,1),c--);return{dataArray:a,temInactivatedData:b}},a.PreferredContactTypesArray=[],a.addPreferredContactTypesToArray=function(b){var c=!0;for(var d in a.PreferredContactTypesArray)if(a.PreferredContactTypesArray[d].PreferredWrittenContactType==b){a.PreferredContactTypesArray[d].StatusType=1,c=!1;break}if(c)for(var d in a.tempSelectedDeactivatedPreferredContacts)if(a.tempSelectedDeactivatedPreferredContacts[d].PreferredWrittenContactType==b){a.tempSelectedDeactivatedPreferredContacts[d].StatusType=1,a.PreferredContactTypesArray.push(a.tempSelectedDeactivatedPreferredContacts[d]),c=!1;break}c&&a.PreferredContactTypesArray.push(a.PreferredContacts[b-1])},a.RemovePreferredContactTypesFromArray=function(b){for(var c in a.PreferredContactTypesArray){if(a.PreferredContactTypesArray[c].PreferredWrittenContactType==b&&a.PreferredContactTypesArray[c].PreferredContactID){a.PreferredContactTypesArray[c].StatusType=2;break}if(a.PreferredContactTypesArray[c].PreferredWrittenContactType==b&&!a.PreferredContactTypesArray[c].PreferredContactID){a.PreferredContactTypesArray.splice(a.PreferredContactTypesArray.indexOf(a.PreferredContactTypesArray[c]),1);break}}},a.selectedPrefferdContact=function(b,c){a.pcPriority=b,a.pcIndex=c},a.ChangePreferredContactsPriority=function(b){var c=a.PreferredContactTypesArray.indexOf(a.pcPriority);"increase"==b&&0!==c?(a.PreferredContactTypesArray[c].ProficiencyIndex=c,a.PreferredContactTypesArray[c-1].ProficiencyIndex=c+1,a.pcIndex=c-1):"decrease"==b&&c!==a.PreferredContactTypesArray.length-1&&(a.PreferredContactTypesArray[c].ProficiencyIndex=c+2,a.PreferredContactTypesArray[c+1].ProficiencyIndex=c+1,a.pcIndex=c+1),a.PreferredContactTypesArray.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.AddPhones=function(b,c){b.push({PhoneDetailID:null,Number:"",CountryCode:"+1",PhoneTypeEnum:c,Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(c)},a.AddEmail=function(b){b.push({EmailDetailID:null,EmailAddress:"",Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(4)},a.AddPager=function(){a.TempContactDetailsForEdit.CountryCode="+1",a.addPreferredContactTypesToArray(5)},a.RemovePager=function(){a.TempContactDetailsForEdit.CountryCode=a.putEmpty,a.TempContactDetailsForEdit.PagerNumber=a.putEmpty,a.RemovePreferredContactTypesFromArray(5)},a.RemoveContactDetails=function(a,b){b.splice(a,1)},a.PreferredContactChange=function(a,b){a.StatusType=b?1:2},a.PreferredContactPriority=function(a,b,c){"increase"==a?(c[b].PreferredIndex=b,c[b-1].PreferredIndex=b+1):"decrease"==a&&(c[b].PreferredIndex=b+2,c[b+1].PreferredIndex=b+1),c.sort(function(a,b){return a.PreferredIndex-b.PreferredIndex})},a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.ContactDetailsPhoneConditionFunction=function(a,b,c){if(b.length>0)for(var d in b)if(b[d].PhoneTypeEnum==c)if(d==b.indexOf(a))switch(b[d].PreferenceType){case 1:b[d].PreferenceType=2;break;case 2:b[d].PreferenceType=1;break;default:b[d].PreferenceType=1}else b[d].PreferenceType=2},a.ContactDetailsEmailConditionFunction=function(a,b){if(b.length>0)for(var c in b)if(c==a)switch(b[c].PreferenceType){case 1:b[c].PreferenceType=2;break;case 2:b[c].PreferenceType=1;break;default:b[c].PreferenceType=1}else b[c].PreferenceType=2},a.changeStausType=function(a){return a=1==a?2:1},a.showConfirmation=function(b,c,d){c.StatusType=a.changeStausType(c.StatusType);var e=b.indexOf(c);if(b[e]=c,"phone"==d){c.PhoneDetailID||a.RemoveContactDetails(e,b);var f=a.IsActiveContactDetails(b,c);f?a.addPreferredContactTypesToArray(c.PhoneTypeEnum):a.RemovePreferredContactTypesFromArray(c.PhoneTypeEnum)}else if("email"==d){c.EmailDetailID||a.RemoveContactDetails(e,b);var f=a.IsActiveEmailIds(b);f?a.addPreferredContactTypesToArray(4):a.RemovePreferredContactTypesFromArray(4)}},a.InactiveContactDetails=function(){$("#ConfirmationContactDetails").modal("hide")},a.IsActiveContactDetails=function(a,b){var c=!1;for(var d in a)if(b.PhoneTypeEnum==a[d].PhoneTypeEnum&&1==a[d].StatusType){c=!0;break}return c},a.IsActiveEmailIds=function(a){var b=!1;for(var c in a)if(1==a[c].StatusType){b=!0;break}return b},a.checkDuplicateData=function(b,c){if("phone"==c&&a.tempSelectedDeactivatedPhonesDetails)for(var d=0;d<a.tempSelectedDeactivatedPhonesDetails.length;d++)b.CountryCode==a.tempSelectedDeactivatedPhonesDetails[d].CountryCode&&b.Number==a.tempSelectedDeactivatedPhonesDetails[d].Number&&(b.PhoneDetailID=a.tempSelectedDeactivatedPhonesDetails[d].PhoneDetailID,b.StatusType=1);else if("email"==c&&a.tempSelectedDeactivatedEmailIds)for(var d=0;d<a.tempSelectedDeactivatedEmailIds.length;d++)b.EmailAddress==a.tempSelectedDeactivatedEmailIds[d].EmailAddress&&(b.EmailDetailID=a.tempSelectedDeactivatedEmailIds[d].EmailDetailID,b.StatusType=1)},a.saveContactDetails=function(c){ResetFormForValidation($("#"+c));var d=a.IsContactDetailsFormValidate();$("#"+c).valid()&&d?$.ajax({url:"/Profile/Demographic/UpdateContactDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.contactDetail)for(var e in d.contactDetail.PreferredContacts)1==d.contactDetail.PreferredContacts[e].PreferredWrittenContactType&&(d.contactDetail.PreferredContacts[e].ContactType="Home Phone");a.Provider.ContactDetails=d.contactDetail,a.TempContactDetailsForEdit=[],a.PreferredContactTypesArray=[],a.ContactDetailsEmptyError=!1,FormReset($("#"+c)),b.visibilityControl="",f.callAlertMessage("alertContactDetailsSuccess","Contact Details updated successfully.","success",!0)}else f.callAlertMessage("alertContactDetailsError",d.status.split(","),"danger",!0)},cache:!1,contentType:!1,processData:!1}):a.ContactDetailsEmptyError=!0},a.IsContactDetailsFormValidate=function(){var b=!1;return(a.TempContactDetailsForEdit.PhoneDetails.length>0||a.TempContactDetailsForEdit.EmailIDs.length>0||a.PreferredContactTypesArray.length>0)&&(b=!0),b},a.DemographicsPersonalIdentificationSave=function(c){ResetFormForValidation($("#"+c));$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdatePersonalIdentificationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.PersonalIdentification=d.personalIdentification,b.tempObject={},b.visibilityControl="",FormReset($("#"+c)),f.callAlertMessage("alertPersonalIdentificationSuccess","Personal Identification updated successfully.","success",!0)):f.callAlertMessage("alertPersonalIdentificationError",d.status.split(","),"danger",!0)}})},a.saveBirthInformation=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateBirthInformationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(d.birthInformation.DateOfBirth=ConvertDateFormat(d.birthInformation.DateOfBirth),a.Provider.BirthInformation=d.birthInformation,b.tempObject={},b.visibilityControl="",FormReset($("#"+c)),f.callAlertMessage("alertBirthInformationSuccess","Birth Information saved successfully.","success",!0)):f.callAlertMessage("alertBirthInformationError",d.status.split(","),"danger",!0)}})},a.saveEthnicityVisaDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateVisaDetailAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.visaDetail.VisaInfo){d.visaDetail.VisaInfo.VisaExpirationDate=ConvertDateFormat(d.visaDetail.VisaInfo.VisaExpirationDate);for(var e in a.VisaTypes)if(d.visaDetail.VisaInfo.VisaTypeID==a.VisaTypes[e].VisaTypeID){d.visaDetail.VisaInfo.VisaType=a.VisaTypes[e];break}for(var e in a.VisaStatuses)if(d.visaDetail.VisaInfo.VisaStatusID==a.VisaStatuses[e].VisaStatusID){d.visaDetail.VisaInfo.VisaStatus=a.VisaStatuses[e];break}d.visaDetail.VisaInfo.VisaTypeID||(d.visaDetail.VisaInfo.VisaTypeID=""),d.visaDetail.VisaInfo.VisaStatusID||(d.visaDetail.VisaInfo.VisaStatusID=""),d.visaDetail.VisaInfo.CountryOfIssue||(d.visaDetail.VisaInfo.CountryOfIssue="")}a.Provider.VisaDetails=d.visaDetail,b.tempObject={},b.visibilityControl="",f.callAlertMessage("alertVisaDetailsSuccess","Visa Details updated successfully.","success",!0),FormReset($("#"+c))}else f.callAlertMessage("alertVisaDetailsError",d.status.split(","),"danger",!0)},cache:!1,contentType:!1,processData:!1})},a.TempLanguageForEdit=[],a.SelectLanguageKnown=function(b){a.TempLanguageForEdit.KnownLanguages.push({KnownLanguageID:null,Language:b.name,ProficiencyIndex:a.TempLanguageForEdit.length}),a.tempLanguages.splice(a.tempLanguages.indexOf(b),1)},a.UnselectLanguage=function(b){for(c in a.TempLanguageForEdit.KnownLanguages)a.TempLanguageForEdit.KnownLanguages[c]==b&&a.TempLanguageForEdit.KnownLanguages.splice(a.TempLanguageForEdit.KnownLanguages.indexOf(b),1);for(var c in a.Languages)a.Languages[c].name==b.Language&&a.tempLanguages.push(a.Languages[c])},a.selectedLanguage=function(b,c){a.langForPriority=b,a.selectedIndex=c},a.PriorityChange=function(b){var c=a.TempLanguageForEdit.KnownLanguages.indexOf(a.langForPriority);"increase"==b?(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c,a.TempLanguageForEdit.KnownLanguages[c-1].ProficiencyIndex=c+1,a.selectedIndex=c-1):"decrease"==b&&(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c+2,a.TempLanguageForEdit.KnownLanguages[c+1].ProficiencyIndex=c+1,a.selectedIndex=c+1),a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.getArray=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.shoLanguageList=function(a){$("#"+a).show()},a.IsExistInArray=function(a,b){var c=[];return status=!0,angular.forEach(a,function(){-1===c.indexOf(b)?c.push(b):status=!1}),status},a.ViewLanguageKnown=!0,a.LanguageKnownToggle=function(c){"EditKnowLanguage"==c?(b.visibilityControl=c,a.getLanguagesAndTempData()):b.visibilityControl=c},a.getLanguagesAndTempData=function(){if(a.TempLanguageForEdit=angular.copy(a.Provider.LanguageInfo),a.tempLanguages=angular.copy(a.Languages),a.TempLanguageForEdit){for(var b in a.TempLanguageForEdit.KnownLanguages)for(var c in a.tempLanguages)a.TempLanguageForEdit.KnownLanguages[b].Language==a.tempLanguages[c].name&&a.tempLanguages.splice(c,1);a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})}else a.TempLanguageForEdit={KnownLanguages:[]};a.langForPriority=null,a.selectedIndex={}},a.saveLanguages=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateLanguagesAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.LanguageInfo=d.languageInfo,a.TempLanguageForEdit=[],FormReset($("#"+c)),b.visibilityControl="",f.callAlertMessage("alertLanguageKnownSuccess","Languages Know updated successfully.","success",!0)):f.callAlertMessage("alertLanguageKnownError",d.status.split(","),"danger",!0)}})}}]),$(document).click(function(a){$(a.target).hasClass("countryCodeClass")||0!==$(a.target).parents(".countryDailCodeContainer").length||$(".countryDailCodeContainer").hide(),$(a.target).hasClass("form-control")||0!==$(a.target).parents(".LanguageSelectAutoList").length||$(".LanguageSelectAutoList").hide(),$(a.target).hasClass("form-control")||0!==$(a.target).parents(".ProviderTypeSelectAutoList").length||$(".ProviderTypeSelectAutoList").hide()});var changeVisibilityOfCountryCode=function(){$(".countryDailCodeContainer").hide()};$(document).ready(function(){$(".countryDailCodeContainer").hide(),$(".ProviderTypeSelectAutoList").hide()}),profileApp.controller("educationController",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){a.masterSpecialties=[],d.getMasterData("/Profile/MasterData/GetAllSpecialities").then(function(b){a.masterSpecialties=b}),a.masterSchools=[],d.getMasterData("/Profile/MasterData/GetAllSchools").then(function(b){a.masterSchools=b}),a.masterCertifications=[],d.getMasterData("/Profile/MasterData/GetAllCertificates").then(function(b){a.masterCertifications=b}),a.masterDegrees=[],d.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.masterHospitals=[],d.getMasterData("/Profile/MasterData/GetAllHospitals").then(function(b){a.masterHospitals=b}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?e.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.SchoolInformation.City="",a.tempObject.SchoolInformation.State="",a.tempObject.SchoolInformation.Country=""},a.setAddressModels=function(b){a.tempObject.SchoolInformation.City=b.City,a.tempObject.SchoolInformation.State=b.State,a.tempObject.SchoolInformation.Country=b.Country},a.searchCumDropDown=function(a){$("#"+a).show()},a.addIntoSchoolDropDown=function(b,c){a.tempObject.SchoolInformation.SchoolName=b,$("#"+c).hide()},a.addIntoDegreeDropDown=function(b,c){a.tempObject.QualificationDegree=b,$("#"+c).hide()},a.addIntoHospitalDropDown=function(b,c){a.tempObject.HospitalName=b,$("#"+c).hide()},a.addIntoCMEDropDown=function(b,c){a.tempObject.Certification=b,$("#"+c).hide()},a.educationDetailViewModels=[],a.GraduationDetailViewModel=[],b.$on("EducationDetails",function(b,c){for(var d=0;d<c.length;d++)null!=c[d]&&(c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate),1==c[d].EducationQualificationType?a.educationDetailViewModels.push(c[d]):a.GraduationDetailViewModel.push(c[d]))}),a.saveUG=function(c,d){loadingOn();var e,g,h;"addeducationDetailViewModel"==a.visibilityControl?(h=$("#newUGFormDiv").find("form"),g="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editeducationDetailViewModel"&&(h=$("#ugEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?("addeducationDetailViewModel"==a.visibilityControl?(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels.push(c.educationDetails),b.operateCancelControl(),f.callAlertMessage("addedNewUGDetails","New Under Graduate/Professional School Details Added Successfully !!!!","success",!0)):a.visibilityControl==d+"_editeducationDetailViewModel"&&(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels[d]=c.educationDetails,b.operateViewAndAddControl(d+"_vieweducationDetailViewModel"),f.callAlertMessage("updatedUGDetails"+d,"Under Graduate/Professional School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(f.callAlertMessage("ErrorInUGDetails"+d,"","danger",!0),a.UGDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInUGDetails"+d,"","danger",!0),a.UGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.saveGraduation=function(c,d){loadingOn();var e,g,h;a.IndexValue=0,"addgraduationDetailViewModel"==a.visibilityControl?(h=$("#newGraduationFormDiv").find("form"),g="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(h=$("#graduationEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?("addgraduationDetailViewModel"==a.visibilityControl?(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel.push(c.educationDetails),b.operateCancelControl(),f.callAlertMessage("addedNewPGDetails","New Graduate/Medical School Details Added Successfully !!!!","success",!0)):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel[d]=c.educationDetails,b.operateViewAndAddControl(d+"_viewgraduationDetailViewModel"),f.callAlertMessage("updatedPGDetails"+d,"Graduate/Medical School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(f.callAlertMessage("ErrorInPGDetails"+d,"","danger",!0),a.PGDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInPGDetails"+d,"","danger",!0),a.PGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."
}}),loadingOff()},b.$on("ECFMGDetail",function(b,c){null!=c&&(c.ECFMGIssueDate=ConvertDateFormat(c.ECFMGIssueDate),a.ecfmgDetail=c)}),a.saveECFMGDetails=function(){loadingOn();var c,d,e;"editecfmgDetail"==a.visibilityControl&&(e=$("#ecfmgEditDiv").find("form"),d="/Profile/EducationHistory/UpdateECFMGDetailAsync?profileId="+profileId),ResetFormForValidation(e),c=e.valid(),c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInUGDetails=!1,"editecfmgDetail"==a.visibilityControl?(c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),b.operateCancelControl(),a.ecfmgDetail=c.ecfmgDetails,f.callAlertMessage("addedNewECFMGDetails","ECFMG Detail Saved Successfully !!!!","success",!0)):a.visibilityControl==IndexValue+"updateecfmgDetail"&&(c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),a.ecfmgDetail=c.ecfmgDetails,b.operateViewAndAddControl(IndexValue+"!editecfmgDetail"),f.callAlertMessage("updatedECFMGDetails"+IndexValue,"ECFMG Detail Saved Successfully !!!!","success",!0)),a.datePickerReset()):(f.callAlertMessage("ErrorInECFMGDetails"+IndexValue,"","danger",!0),a.ECFMGDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInECFMGDetails"+IndexValue,"","danger",!0),a.ECFMGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.ResidencyInternshipViewModel=[],b.$on("TrainingDetails",function(b,c){for(var d=0;d<c.length;d++)if(null!=c[d]){for(var e=0;e<c[d].ResidencyInternshipDetails.length;e++)c[d].ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].StartDate),c[d].ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].EndDate);a.ResidencyInternshipViewModel.push(c[d])}}),a.saveProgram=function(c,d){loadingOn();var e,g,h;"addresidencyInternshipViewModel"==a.visibilityControl?(h=$("#newProgramFormDiv").find("form"),g="/Profile/EducationHistory/AddTrainingDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(h=$("#programEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateTrainingDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){for(var e=0;e<c.TrainingDetails.ResidencyInternshipDetails.length;e++)null!=c.TrainingDetails.ResidencyInternshipDetails&&(c.TrainingDetails.ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c.TrainingDetails.ResidencyInternshipDetails[e].StartDate),c.TrainingDetails.ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c.TrainingDetails.ResidencyInternshipDetails[e].EndDate));a.ErrorInProgramDetails=!1,"addresidencyInternshipViewModel"==a.visibilityControl?(b.visibilityControl="addedNewProgramDetails",a.ResidencyInternshipViewModel.push(c.TrainingDetails),b.operateCancelControl(),f.callAlertMessage("addedNewProgramDetails","School Details Added Successfully. Use edit action to add Residency/Internship/fellowship Details!!!","success",!0)):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(a.ResidencyInternshipViewModel[d]=c.TrainingDetails,b.operateViewAndAddControl(d+"_viewresidencyInternshipViewModel"),f.callAlertMessage("updatedProgramDetails"+d,"School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)}else f.callAlertMessage("ErrorInProgramDetails"+d,"","danger",!0),a.ProgramDetailsErrorList=c.status.split(",")},error:function(){f.callAlertMessage("ErrorInProgramDetails"+d,"","danger",!0),a.ResidencyDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.AddView="Add",a.SetAddView=function(b){a.AddView=b},a.setPrimary=function(){try{if(a.ResidencyInternshipViewModel.length>0)for(var b=0;b<a.ResidencyInternshipViewModel.length;b++)for(var c=0;c<a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails.length;c++)a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails[c].PreferenceType="2",a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails[c].Preference="Secondary"}catch(d){}},a.updateResidencyForView=function(c,d,e){loadingOn();var g,h,i,j=c.TrainingDetailID;"addresidencyForView"==a.visibilitySecondControl?(h=$("#newViewResidencyDivFor"+a.AddView+j).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j):a.visibilitySecondControl==e+"_editresidencyForView"&&(h=$("#viewResidencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j),ResetFormForValidation(h),validationStatus=h.valid(),validationStatus&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(g){if("1"==d.PreferenceType&&a.setPrimary(),"true"==g.status){if(a.ErrorInResidencyDetails=!1,"addresidencyForView"==a.visibilitySecondControl){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails.push(g.ResidencyDetails);b.operateSecondCancelControl(),f.callAlertMessage("addedNewResidencyDetailsForView","New Residency/Internship/fellowship Details Added Successfully!!!","success",!0)}else if(a.visibilitySecondControl==e+"_editresidencyForView"){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails[e]=g.ResidencyDetails,c.ResidencyInternshipDetails[e]=g.ResidencyDetails);b.operateSecondViewAndAddControl(e+"_viewresidencyForView"),f.callAlertMessage("updatedResidencyDetailsForView"+e,"Residency/Internship/fellowship Details Updated Successfully !!!!","success",!0)}a.datePickerReset(),FormReset(h)}else f.callAlertMessage("ErrorInResidencyDetailsForView"+e,"","danger",!0),a.ResidencyDetailsErrorListForView=g.status.split(",")},error:function(){f.callAlertMessage("ErrorInResidencyDetailsForView"+e,"","danger",!0),a.ResidencyDetailsErrorListForView="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.updateResidency=function(c,d,e){loadingOn();var g,h,i,j=c.TrainingDetailID;"addresidency"==a.visibilitySecondControl?(h=$("#newResidencyDivFor"+a.AddView+j).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j):a.visibilitySecondControl==e+"_editresidency"&&(h=$("#residencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j),ResetFormForValidation(h),validationStatus=h.valid(),validationStatus&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(g){if("1"==d.PreferenceType&&a.setPrimary(),"true"==g.status){if(a.ErrorInResidencyDetails=!1,"addresidency"==a.visibilitySecondControl){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails.push(g.ResidencyDetails),c.ResidencyInternshipDetails.push(g.ResidencyDetails));b.operateSecondCancelControl(),f.callAlertMessage("addedNewResidencyDetails","New Residency/Internship/fellowship Details Added Successfully!!!","success",!0)}else if(a.visibilitySecondControl==e+"_editresidency"){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails[e]=g.ResidencyDetails,c.ResidencyInternshipDetails[e]=g.ResidencyDetails);b.operateSecondViewAndAddControl(e+"_viewresidency"),f.callAlertMessage("updatedResidencyDetails"+e,"Residency/Internship/fellowship Details Updated Successfully !!!!","success",!0)}a.datePickerReset(),FormReset(h)}else f.callAlertMessage("ErrorInResidencyDetails"+e,"","danger",!0),a.ResidencyDetailsErrorListForView=g.status.split(",")},error:function(){f.callAlertMessage("ErrorInResidencyDetails"+e,"","danger",!0),a.ResidencyDetailsErrorListForView="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.CertificationCMEViewModel=[],b.$on("CMECertifications",function(c,d){for(var e=0;e<d.length;e++)null!=d[e]&&(d[e].StartDate=ConvertDateFormat(d[e].StartDate),d[e].EndDate=ConvertDateFormat(d[e].EndDate),d[e].ExpiryDate=ConvertDateFormat(d[e].ExpiryDate),d[e].City=b.ConvertCity(d[e].City),a.CertificationCMEViewModel.push(d[e]))}),a.saveCertificate=function(c,d){loadingOn();var e,g,h;"addcertificationCMEViewModel"==a.visibilityControl?(e=$("#newCertificateFormDiv").find("form").valid(),h=$("#newCertificateFormDiv").find("form"),g="/Profile/EducationHistory/AddCMECertificationAsync?profileId="+profileId):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(e=$("#certificateEditDiv"+d).find("form").valid(),h=$("#certificateEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateCMECertificationAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInCMEDetails=!1,"addcertificationCMEViewModel"==a.visibilityControl?(c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel.push(c.CMEDetails),b.operateCancelControl(),f.callAlertMessage("addedNewCMEDetails","New PostGraduate Training/CME Details Added Successfully!!!","success",!0)):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel[d]=c.CMEDetails,b.operateViewAndAddControl(d+"_viewcertificationCMEViewModel"),f.callAlertMessage("updatedCMEDetails"+d,"PostGraduate Training/CME Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(f.callAlertMessage("ErrorInCMEDetails"+d,"","danger",!0),a.CMEDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInCMEDetails"+d,"","danger",!0),a.CMEDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.datePickerReset=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date,a.tempSecondObject.StartDate=new Date,a.tempSecondObject.EndDate=new Date,a.tempObject.ExpiryDate=new Date,a.tempObject.ECFMGIssueDate=new Date}catch(b){}}}]),profileApp.controller("identificationLicenseController",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){try{a.ProviderTypes=b}catch(c){}}),d.getMasterData("/Profile/MasterData/GetAllLicenseStatus").then(function(b){try{a.StateLicenseStatuses=b}catch(c){}}),angular.element(document).ready(function(){try{c.get("/Location/GetStates").then(function(b){a.States=b.data})}catch(b){}}),a.StateLicenses=[],b.$on("StateLicenses",function(b,c){try{a.StateLicenses=c;for(var d=0;d<a.StateLicenses.length;d++)a.StateLicenses[d].ProviderTypeID||(a.StateLicenses[d].ProviderTypeID=""),a.StateLicenses[d].StateLicenseStatusID||(a.StateLicenses[d].StateLicenseStatusID=""),a.StateLicenses[d].IssueState||(a.StateLicenses[d].IssueState=""),a.StateLicenses[d].IssueDate=ConvertDateFormat(a.StateLicenses[d].IssueDate),a.StateLicenses[d].ExpiryDate=ConvertDateFormat(a.StateLicenses[d].ExpiryDate),a.StateLicenses[d].CurrentIssueDate=ConvertDateFormat(a.StateLicenses[d].CurrentIssueDate)}catch(e){}}),a.IndexValue1="",a.saveStateLicense=function(c,d){loadingOn();var e,g,h,i,j,k,l;a.SLError="",i=c.ProviderTypeID,k=c.StateLicenseStatusID,a.IndexValue1=d;for(var m in a.ProviderTypes)try{if(a.ProviderTypes[m].ProviderTypeID==i){j=a.ProviderTypes[m];break}}catch(n){}for(var o in a.StateLicenseStatuses)try{if(a.StateLicenseStatuses[o].StateLicenseStatusID==k){l=a.StateLicenseStatuses[o];break}}catch(n){}if("addStateLicenseInformation"==a.visibilityControl)try{h=$("#newStateLicenseDiv").find("form"),g="/Profile/IdentificationAndLicense/AddStateLicenseAsync?profileId="+profileId}catch(n){}else if(a.visibilityControl==d+"_editStateLicenseInformation")try{h=$("#stateLicenseEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateStateLicenseAsync?profileId="+profileId}catch(n){}ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{if("true"==c.status){if(c.stateLicense.ProviderType=j,c.stateLicense.StateLicenseStatus=l,c.stateLicense.IssueDate=ConvertDateFormat(c.stateLicense.IssueDate),c.stateLicense.ExpiryDate=ConvertDateFormat(c.stateLicense.ExpiryDate),c.stateLicense.CurrentIssueDate=ConvertDateFormat(c.stateLicense.CurrentIssueDate),"addStateLicenseInformation"==a.visibilityControl){a.StateLicenses.push(c.stateLicense);for(var e=0;e<a.StateLicenses.length;e++)a.StateLicenses[e].ProviderTypeID||(a.StateLicenses[e].ProviderTypeID=""),a.StateLicenses[e].StateLicenseStatusID||(a.StateLicenses[e].StateLicenseStatusID=""),a.StateLicenses[e].IssueState||(a.StateLicenses[e].IssueState="");b.operateCancelControl(""),f.callAlertMessage("addedStateLicense","State License Information Saved Successfully!!!!","success",!0)}else{a.StateLicenses[d]=c.stateLicense;for(var e=0;e<a.StateLicenses.length;e++)a.StateLicenses[e].ProviderTypeID||(a.StateLicenses[e].ProviderTypeID=""),a.StateLicenses[e].StateLicenseStatusID||(a.StateLicenses[e].StateLicenseStatusID=""),a.StateLicenses[e].IssueState||(a.StateLicenses[e].IssueState="");b.operateViewAndAddControl(d+"_viewStateLicenseInformation"),f.callAlertMessage("updatedStateLicense"+d,"State License Information Updated Successfully!!!!","success",!0)}FormReset(h),a.resetDates()}else a.SLError=c.status.split(","),f.callAlertMessage("StateLicenseError","","danger",!0)}catch(g){}},error:function(){try{a.SLError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("StateLicenseError","","danger",!0)}catch(b){}}}),loadingOff()},d.getMasterData("/Profile/MasterData/GetAllDEASchedules").then(function(b){try{a.Schedules=b}catch(c){}}),a.FederalDEA=[],b.$on("FederalDEAInformations",function(b,c){try{a.FederalDEA=c;for(var d=0;d<a.FederalDEA.length;d++)a.FederalDEA[d].IssueDate=ConvertDateFormat(a.FederalDEA[d].IssueDate),a.FederalDEA[d].ExpiryDate=ConvertDateFormat(a.FederalDEA[d].ExpiryDate)}catch(e){}}),a.IndexValue2="",a.saveFederalDEALicense=function(c,d){loadingOn(),a.IndexValue2=d;var e,g,h;if("addDEAInformation"==a.visibilityControl)try{h=$("#newShowFederalDEALicenseDiv").find("form"),g="/Profile/IdentificationAndLicense/AddFederalDEALicenseAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editDEAInformation")try{h=$("#FederalDEALicenseEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateFederalDEALicenseAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),a.DEAError="",e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.federalDea.IssueDate=ConvertDateFormat(c.federalDea.IssueDate),c.federalDea.ExpiryDate=ConvertDateFormat(c.federalDea.ExpiryDate),"addDEAInformation"==a.visibilityControl?(a.FederalDEA.push(c.federalDea),b.operateCancelControl(""),f.callAlertMessage("addedDEA","DEA information saved successfully. !!!!","success",!0)):(a.FederalDEA[d]=c.federalDea,b.operateViewAndAddControl(d+"_viewDEAInformation"),f.callAlertMessage("updatedDEA"+d,"DEA Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.DEAError=c.status.split(","),f.callAlertMessage("DEAError","","danger",!0))}catch(e){}},error:function(){try{a.DEAError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("DEAError","","danger",!0)}catch(b){}}}),loadingOff()},a.CDSCInformations=[],b.$on("CDSCInformations",function(b,c){try{a.CDSCInformations=c;for(var d=0;d<a.CDSCInformations.length;d++)a.CDSCInformations[d].IssueDate=ConvertDateFormat(a.CDSCInformations[d].IssueDate),a.CDSCInformations[d].ExpiryDate=ConvertDateFormat(a.CDSCInformations[d].ExpiryDate)}catch(e){}}),a.CDSCError="",a.IndexValue5="",a.saveCDSCInformation=function(c,d){loadingOn(),a.IndexValue5=d;var e,g,h;if("addCDSCInformation"==a.visibilityControl)try{h=$("#newShowCDSCInformationDiv").find("form"),g="/Profile/IdentificationAndLicense/AddCDSCLicenseAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editCDSCInformation")try{h=$("#cDSCInformationEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateCDSCLicenseAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.CDSCInformation.IssueDate=ConvertDateFormat(c.CDSCInformation.IssueDate),c.CDSCInformation.ExpiryDate=ConvertDateFormat(c.CDSCInformation.ExpiryDate),"addCDSCInformation"==a.visibilityControl?(a.CDSCInformations.push(c.CDSCInformation),b.operateCancelControl(""),f.callAlertMessage("addedCDS","CDS information saved successfully. !!!!","success",!0)):(a.CDSCInformations[d]=c.CDSCInformation,b.operateViewAndAddControl(d+"_viewCDSCInformation"),f.callAlertMessage("updatedCDS"+d,"CDS Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.CDSCError=c.status.split(","),f.callAlertMessage("CDSCError","","danger",!0))}catch(e){}},error:function(){try{a.CDSCError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("CDSCError","","danger",!0)}catch(b){}}}),loadingOff()},a.MedicareInformations=[],b.$on("MedicareInformations",function(b,c){try{a.MedicareInformations=c;for(var d=0;d<a.MedicareInformations.length;d++)a.MedicareInformations[d].IssueDate=ConvertDateFormat(a.MedicareInformations[d].IssueDate)}catch(e){}}),a.IndexValue3="",a.saveMedicareInformation=function(c,d){loadingOn(),a.IndexValue3=d;var e,g,h;if("addMedicareInformation"==a.visibilityControl)try{h=$("#newShowMedicareInformationDiv").find("form"),g="/Profile/IdentificationAndLicense/AddMedicareInformationAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editMedicareInformation")try{h=$("#MedicareInformationEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateMedicareInformationAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),a.MedicareError="",e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.MedicareInformation.IssueDate=ConvertDateFormat(c.MedicareInformation.IssueDate),"addMedicareInformation"==a.visibilityControl?(a.MedicareInformations.push(c.MedicareInformation),b.operateCancelControl(""),f.callAlertMessage("addedMedicare","Medicare information saved successfully. !!!!","success",!0)):(a.MedicareInformations[d]=c.MedicareInformation,b.operateViewAndAddControl(d+"_viewMedicareInformation"),f.callAlertMessage("updatedMedicare"+d,"Medicare Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.MedicareError=c.status.split(","),f.callAlertMessage("MedicareError","","danger",!0))}catch(e){}},error:function(){try{a.MedicareError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("MedicareError","","danger",!0)}catch(b){}}}),loadingOff()},a.MedicaidInformations=[],b.$on("MedicaidInformations",function(b,c){try{a.MedicaidInformations=c;for(var d=0;d<a.MedicaidInformations.length;d++)a.MedicaidInformations[d].IssueDate=ConvertDateFormat(a.MedicaidInformations[d].IssueDate)}catch(e){}}),a.IndexValue4="",a.saveMedicaidInformation=function(c,d){loadingOn(),a.IndexValue4=d;var e,g,h;if("addMedicaidInformation"==a.visibilityControl)try{h=$("#newShowMedicaidInformationDiv").find("form"),g="/Profile/IdentificationAndLicense/AddMedicaidInformationAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editMedicaidInformation")try{h=$("#MedicaidInformationEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateMedicaidInformationAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),a.MedicaidError="",e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.MedicaidInformation.IssueDate=ConvertDateFormat(c.MedicaidInformation.IssueDate),"addMedicaidInformation"==a.visibilityControl?(a.MedicaidInformations.push(c.MedicaidInformation),b.operateCancelControl(""),f.callAlertMessage("addedMedicaid","Medicaid information saved successfully. !!!!","success",!0)):(a.MedicaidInformations[d]=c.MedicaidInformation,b.operateViewAndAddControl(d+"_viewMedicaidInformation"),f.callAlertMessage("updatedMedicaid"+d,"Medicaid Information Updated Successfully. !!!!","success",!0)),FormReset(h),a.resetDates()):(a.MedicaidError=c.status.split(","),f.callAlertMessage("MedicaidError","","danger",!0))}catch(e){}},error:function(){try{a.MedicaidError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("MedicaidError","","danger",!0)}catch(b){}}}),loadingOff()},a.OtherIdentificationNumbers={},b.$on("OtherIdentificationNumber",function(b,c){try{a.OtherIdentificationNumbers=c}catch(d){}}),a.clearCAQHCredentials=function(b){try{""==b&&(a.tempObject.CAQHUserName="",a.tempObject.CAQHPassword="")}catch(c){}},a.showOtherId=!1,a.OtherIdError="",a.saveOtherIdentificationNumber=function(c,d){loadingOn(),a.typeOfSave=0!=d.OtherIdentificationNumberID?"Edit":"Add",$("#"+c).valid()&&$.ajax({url:"/Profile/IdentificationAndLicense/UpdateOtherIdentificationNumberAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){try{"true"==e.status?(d.OtherIdentificationNumberID=e.OtherIdentificationNumber.OtherIdentificationNumberID,a.OtherIdentificationNumbers=angular.copy(d),FormReset($("#"+c)),a.ErrorId=!1,"Add"==a.typeOfSave?f.callAlertMessage("addedID","Other Identification information saved successfully. !!!!","success",!0):f.callAlertMessage("updatedID","Other Identification information updated successfully. !!!!","success",!0),b.visibilityControl=""):(a.OtherIdError=e.status.split(","),f.callAlertMessage("OtherIdError","","danger",!0))}catch(g){}},error:function(){try{a.OtherIdError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("OtherIdError","","danger",!0)}catch(b){}}}),loadingOff()},a.resetDates=function(){try{a.tempObject.IssueDate=new Date,a.tempObject.ExpiryDate=new Date,a.tempObject.CurrentIssueDate=new Date}catch(b){}}}]),profileApp.controller("practiceLocationController",["$scope","$rootScope","$http","$filter","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){a.PracticeLocationDetails=[],a.operateViewControlPracLoc=function(c){b.tempObject={},a.visibilityControlPracLoc=c},a.operateAddControlPracLoc=function(c){b.tempObject={},a.visibilityControlPracLoc="",b.operateViewAndAddControl(c)},b.$on("PracticeLocationDetails",function(b,c){if(console.log(c),a.PracticeLocationDetails=c,c)for(var d=0;d<a.PracticeLocationDetails.length;d++)a.PracticeLocationDetails[d].PracticeGeneralInformation.PracticeStartDate=ConvertDateFormat(a.PracticeLocationDetails[d].PracticeGeneralInformation.PracticeStartDate)}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.updateOfficeManager=function(){var c,d,e;e=$("#BusinessOfficeContactPersonForm"),d="/Profile/PracticeLocation/UpdateOfficeManagerAsync?profileId="+profileId,c=e.valid(),c&&($.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.practiceInterest=c.practiceInterest,b.visibilityControl="",a.ErrorInPracticeInterest=!1,b.visibilityControl="updatedOfficeManager",g.callAlertMessage("updatedOfficeManager","Practice Interest updated successfully !!!!","success",!0)):(g.callAlertMessage("errorOfficeManager"+index,"","danger",!0),a.errorPracticeInterest=c.status.split(","))},error:function(){g.callAlertMessage("errorOfficeManager"+index,"","danger",!0),a.errorOfficeManager="Sorry for Inconvenience !!!! Please Try Again Later..."}}),a.changePartial=!1)},a.saveGeneralInformaton=function(){var c=!1,d=null,e=null;e=$("#newPracLocDetailsForm"),d="/Profile/PracticeLocation/AddPracticeGeneralInformationAsync?profileId="+profileId,c=e.valid(),c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status&&(c.practiceLocationDetail.PracticeGeneralInformation.PracticeStartDate=ConvertDateFormat(c.practiceLocationDetail.PracticeGeneralInformation.PracticeStartDate),null===a.PracticeLocationDetails&&(a.PracticeLocationDetails=[]),a.PracticeLocationDetails.push(c.practiceLocationDetail),b.operateCancelControl(""))},error:function(){}})}}]),profileApp.controller("professionalAppCtrl",["$scope","$rootScope","$http","masterDataService","messageAlertEngine",function(a,b,c,d,e){a.ProfessionalAffiliations=[],a.resetDates=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date}catch(b){}},a.submitButtonText="Add",b.$on("ProfessionalAffiliationInfos",function(b,c){a.ProfessionalAffiliations=c;for(var d=0;d<a.ProfessionalAffiliations.length;d++)a.ProfessionalAffiliations[d].StartDate=ConvertDateFormat(a.ProfessionalAffiliations[d].StartDate),a.ProfessionalAffiliations[d].EndDate=ConvertDateFormat(a.ProfessionalAffiliations[d].EndDate)}),a.saveProfessionalAffiliation=function(c,d){loadingOn();var f,g,h;"addpa"==a.visibilityControl?(h=$("#newShowProfessionalAffiliationDiv").find("form"),g="/Profile/ProfessionalAffiliation/AddProfessionalAffiliation?profileId="+profileId):a.visibilityControl==d+"_editpa"&&(h=$("#professionalAffiliationEditDiv"+d).find("form"),g="/Profile/ProfessionalAffiliation/UpdateProfessionalAffiliation?profileId="+profileId),ResetFormForValidation(h),f=h.valid(),f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.professionalAffiliation.StartDate=ConvertDateFormat(c.professionalAffiliation.StartDate),c.professionalAffiliation.EndDate=ConvertDateFormat(c.professionalAffiliation.EndDate),a.visibilityControl!=d+"_editpa"?(a.ProfessionalAffiliations.push(c.professionalAffiliation),b.operateCancelControl(""),e.callAlertMessage("addedNewProfessionalAffiliation","Professional Affiliation saved successfully !!!!","success",!0)):(a.ProfessionalAffiliations[d]=c.professionalAffiliation,b.operateViewAndAddControl(d+"_viewpa"),e.callAlertMessage("updatedProfessionalAffiliation"+d,"Professional Affiliation updated successfully !!!!","success",!0)),a.IsProfessionalAffiliationHasError=!1,a.resetDates(),FormReset(h)):(e.callAlertMessage("errorProfessionalAffiliation"+d,"","danger",!0),a.errorProfessionalAffiliation=c.status.split(","))},error:function(){e.callAlertMessage("errorProfessionalAffiliation"+d,"","danger",!0),a.errorProfessionalAffiliation="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),$(document).ready(function(){}),profileApp.controller("LiabilityCtrl",["$scope","$rootScope","$http","masterDataService","messageAlertEngine",function(a,b,c,d,e){a.ProfessionalLiabilityInfoes=[],a.submitButtonText="Add",a.getLocation=function(){a.tempObject.InsuranceCarrierAddressID="",a.Location=a.masterInsuranceCarriers.filter(function(b){return b.InsuranceCarrierID==a.tempObject.InsuranceCarrierID})[0]},a.getAddress=function(){a.LocationAddress=a.Location.InsuranceCarrierAddresses.filter(function(b){return b.InsuranceCarrierAddressID==a.tempObject.InsuranceCarrierAddressID})[0],a.tempObject.InsuranceCarrierAddress=a.LocationAddress},a.resetDates=function(){try{a.tempObject.OriginalEffectiveDate=new Date,a.tempObject.EffectiveDate=new Date,a.tempObject.ExpirationDate=new Date}catch(b){}},d.getMasterData("/Profile/MasterData/GetAllInsuranceCarriers").then(function(b){a.masterInsuranceCarriers=b}),b.$on("ProfessionalLiabilityInfoes",function(b,c){a.ProfessionalLiabilityInfoes=c,console.log("Aagaya Data"),console.log(c);for(var d=0;d<a.ProfessionalLiabilityInfoes.length;d++)a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate),a.ProfessionalLiabilityInfoes[d].EffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].EffectiveDate),a.ProfessionalLiabilityInfoes[d].ExpirationDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].ExpirationDate)}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.cancelProfessionalLiabilty=function(){setProfessionalLiabiltyCancelParameters()},a.saveProfessionalLiabilty=function(c,d){loadingOn();var f,g,h;"addLi"==a.visibilityControl?(h=$("#newShowProfessionalLiabiltyDiv").find("form"),g="/Profile/ProfessionalLiability/AddProfessionalLiabilityAsync?profileId="+profileId):a.visibilityControl==d+"_editLi"&&(h=$("#professionalLiabiltyEditDiv"+d).find("form"),g="/Profile/ProfessionalLiability/UpdateProfessionalLiabilityAsync?profileId="+profileId,a.getLocation()),ResetFormForValidation(h),f=h.valid(),f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalLiability.OriginalEffectiveDate=ConvertDateFormat(c.professionalLiability.OriginalEffectiveDate),c.professionalLiability.EffectiveDate=ConvertDateFormat(c.professionalLiability.EffectiveDate),c.professionalLiability.ExpirationDate=ConvertDateFormat(c.professionalLiability.ExpirationDate),c.professionalLiability.InsuranceCarrierAddress=a.Location.InsuranceCarrierAddresses.filter(function(a){return a.InsuranceCarrierAddressID==c.professionalLiability.InsuranceCarrierAddressID})[0];for(var f=0;f<a.masterInsuranceCarriers.length;f++)if(a.masterInsuranceCarriers[f].InsuranceCarrierID==c.professionalLiability.InsuranceCarrierID){c.professionalLiability.InsuranceCarrier=a.masterInsuranceCarriers[f];break}a.visibilityControl!=d+"_editLi"?(a.ProfessionalLiabilityInfoes.push(c.professionalLiability),b.operateCancelControl(""),e.callAlertMessage("addedNewProfessionalLiability","Professional Liability saved successfully !!!!","success",!0)):(a.ProfessionalLiabilityInfoes[d]=c.professionalLiability,b.operateViewAndAddControl(d+"_viewLi"),e.callAlertMessage("updatedProfessionalLiability"+d,"Professional Liability updated successfully !!!!","success",!0)),a.IsProfLiabilityHasError=!1,b.tempObject={},a.resetDates(),FormReset(h)
}else e.callAlertMessage("errorProfessionalLiability"+d,"","danger",!0),a.errorProfessionalLiability=c.status.split(",")},error:function(){e.callAlertMessage("errorProfessionalLiability"+d,"","danger",!0),a.errorProfessionalLiability="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),$(document).ready(function(){}),profileApp.controller("ProfessionalReference",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){a.ProfessionalReferences=[],b.$on("ProfessionalReferenceInfos",function(b,c){a.ProfessionalReferences=c;for(var d=0;d<a.ProfessionalReferences.length;d++)a.ProfessionalReferences[d].SpecialtyID||(a.ProfessionalReferences[d].SpecialtyID=""),a.ProfessionalReferences[d].Degree||(a.ProfessionalReferences[d].Degree="")}),a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?e.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.CountryDialCodes=countryDailCodes;var g;a.removeDegree=function(b){return(b="? undefined:undefined ?")?"Not Available":(a.tempObject.Degree=b,b)},a.SelectProviderTitle=function(b){a.tempObject.ProviderTypeID=b.ProviderTypeID},a.shoLanguageList=function(a){$("#"+a).show()},a.submitButtonText="Add",a.changeButtonText=function(){a.submitButtonText="Update"==a.submitButtonText?"Add":"Update"},a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.masterSpecialties=[],a.masterDegrees=[],a.masterProviderTypes=[],d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.masterProviderTypes=b}),d.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.saveProfessionalReference=function(c,d){loadingOn();var e,h,i,j,k,l;k=c.SpecialtyID;for(var m in a.masterSpecialties)if(a.masterSpecialties[m].SpecialtyID==k){l=a.masterSpecialties[m];break}j=c.ProviderTypeID;for(var n in a.masterProviderTypes)if(a.masterProviderTypes[n].ProviderTypeID==j){g=a.masterProviderTypes[n];break}"addpr"==a.visibilityControl?(i=$("#newProfessionalReferenceFormDiv").find("form"),h="/Profile/ProfessionalReference/AddProfessionalReference?profileId="+profileId):a.visibilityControl==d+"_editpr"&&(i=$("#professionalReferenceEditDiv"+d).find("form"),console.log(i),h="/Profile/ProfessionalReference/UpdateProfessionalReference?profileId="+profileId),ResetFormForValidation(i),e=i.valid(),e&&$.ajax({url:h,type:"POST",data:new FormData(i[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(c.professionalReference.Specialty=l,c.professionalReference.ProviderType=g,a.visibilityControl!=d+"_editpr"){a.ProfessionalReferences.push(c.professionalReference);for(var e=0;e<a.ProfessionalReferences.length;e++)a.ProfessionalReferences[e].SpecialtyID||(a.ProfessionalReferences[e].SpecialtyID=""),a.ProfessionalReferences[e].Degree||(a.ProfessionalReferences[e].Degree="");b.operateCancelControl(""),f.callAlertMessage("addedNewProfessionalReference","Professional Reference saved successfully !!!!","success",!0)}else{a.ProfessionalReferences[d]=c.professionalReference;for(var e=0;e<a.ProfessionalReferences.length;e++)a.ProfessionalReferences[e].SpecialtyID||(a.ProfessionalReferences[e].SpecialtyID=""),a.ProfessionalReferences[e].Degree||(a.ProfessionalReferences[e].Degree="");b.operateViewAndAddControl(d+"_viewpr"),f.callAlertMessage("updatedProfessionalReference"+d,"Professional Reference updated successfully !!!!","success",!0)}a.IsProfessionalReferenceHasError=!1,FormReset(i)}else f.callAlertMessage("errorProfessionalReference"+d,"","danger",!0),a.errorProfessionalReference=c.status.split(",")},error:function(){f.callAlertMessage("errorProfessionalReference"+d,"","danger",!0),a.errorProfessionalReference="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),profileApp.controller("SpecialtyController",["$scope","$rootScope","$http","masterDataService","messageAlertEngine",function(a,b,c,d,e){a.Specialties=[],a.practiceInterest={},a.masterSpecialties=[],a.masterSpecialtyBoards=[],b.$on("SpecialtyDetails",function(b,c){a.Specialties=c;for(var d=0;d<a.Specialties.length;d++)null!=a.Specialties[d].SpecialtyBoardCertifiedDetail&&(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=a.Specialties[d].SpecialtyBoardNotCertifiedDetail&&(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate))}),b.$on("PracticeInterest",function(b,c){a.practiceInterest=c}),d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/getAllspecialtyBoards").then(function(b){a.masterSpecialtyBoards=b}),a.submitButtonText="Add",a.IndexValue=0,a.saveSpecialty=function(){loadingOn();var c,d,f;f=$("#newShowSpecialtyDiv").find("form"),d="/Profile/BoardSpecialty/AddSpecialityDetailAsync?profileId="+profileId,ResetFormForValidation(f),c=f.valid();var g=$(f[0]).find($("[name='SpecialtyID'] option:selected")).text(),h=$(f[0]).find($("[name='SpecialtyBoardCertifiedDetail.SpecialtyBoardID'] option:selected")).text();c&&$.ajax({url:d,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var d=0;d<a.Specialties.length;d++)"Primary"==a.Specialties[d].SpecialtyPreference&&(a.Specialties[d].SpecialtyPreference="Secondary",a.Specialties[d].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:g},c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoard={ID:c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoardID,Name:h}),null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties.push(c.specialty),a.ErrorInSpecialtyDetails=!1,b.operateCancelControl(""),e.callAlertMessage("addedNewBoardSpecialty","Specialty Details saved successfully !!!!","success",!0)}else e.callAlertMessage("errorSpecialty","","danger",!0),a.errorSpecialty=c.status.split(",")},error:function(){e.callAlertMessage("errorSpecialty","","danger",!0),a.errorSpecialty="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.updateSpecialty=function(c,d){loadingOn();var f,g,h;h=$("#specialtyEditDiv"+d).find("form"),g="/Profile/BoardSpecialty/UpdateSpecialityDetailAsync?profileId="+profileId,ResetFormForValidation(h),f=h.valid();var i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),j=$(h[0]).find($("[name='SpecialtyBoardCertifiedDetail.SpecialtyBoardID'] option:selected")).text();f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var f=0;f<a.Specialties.length;f++)"Primary"==a.Specialties[f].SpecialtyPreference&&f!=d&&(a.Specialties[f].SpecialtyPreference="Secondary",a.Specialties[f].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:i},c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoard={ID:c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoardID,Name:j}),null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties[d]=c.specialty,a.ErrorInSpecialtyDetails=!1,b.operateViewAndAddControl(d+"_viewboardSpecialty"),e.callAlertMessage("updatedBoardSpecialty"+d,"Specialty Details Updated Successfully !!!!","success",!0)}else e.callAlertMessage("errorSpecialty"+d,"","danger",!0),a.errorSpecialty=c.status.split(",")},error:function(){e.callAlertMessage("errorSpecialty"+d,"","danger",!0),a.errorSpecialty="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.setPrimary=function(){try{for(var b=0;b<a.Specialties.length;b++)a.Specialties[b].PreferenceType="2"}catch(c){}},a.savePracticeInterest=function(c){loadingOn();var d,f,g;a.typeOfSaveForPracticeInterest=c.PracticeInterestID?"Edit":"Add","editpracticeInterest"==a.visibilityControl&&(g=$("#editShowPracticeInterest").find("form"),f="/Profile/BoardSpecialty/UpdatePracticeInterestAsync?profileId="+profileId),ResetFormForValidation(g),d=g.valid(),d&&($.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.practiceInterest=c.practiceInterest,b.visibilityControl="",a.ErrorInPracticeInterest=!1,"Add"==a.typeOfSaveForPracticeInterest?(b.visibilityControl="addedNewPracticeInterest",e.callAlertMessage("addedNewPracticeInterest","Practice Interest saved successfully !!!!","success",!0)):(b.visibilityControl="updatedPracticeInterest",e.callAlertMessage("updatedPracticeInterest","Practice Interest updated successfully !!!!","success",!0))):(e.callAlertMessage("errorPracticeInterest","","danger",!0),a.errorPracticeInterest=c.status.split(","))},error:function(){e.callAlertMessage("errorPracticeInterest","","danger",!0),a.errorPracticeInterest="Sorry for Inconvenience !!!! Please Try Again Later..."}}),a.changePartial=!1),loadingOff()},b.getSpecilityForThisUser=function(){return a.Specialties},a.fillPercentageOfTime=function(b){a.tempObject.PercentageOfTime="1"==b?100:50},a.fillPreferenceType=function(b){a.tempObject.PreferenceType=100==b?1:100>b&&b>=0?2:""},a.clearOtherModel=function(c){"addboardSpecialty"==b.visibilityControl&&(1==c?a.tempObject.SpecialtyBoardNotCertifiedDetail=null:a.tempObject.SpecialtyBoardCertifiedDetail=null)},a.clearOtherOptions=function(c){"addboardSpecialty"==b.visibilityControl&&(1==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):2==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):3==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null))}}]),profileApp.controller("WorkHistoryController",["$scope","$rootScope","$http","$filter","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){a.resetDates=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date,a.tempObject.DischargeDate=new Date}catch(b){}},a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.currentlyWorkingChange=function(a){1==a&&(b.tempObject.EndDate=null,b.tempObject.DepartureReason=null)},a.militaryDischargeChange=function(a){"Other than honourable"!=a&&(b.tempObject.HonorableExplanation=null)},e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryBranches").then(function(b){a.militaryBranches=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryRanks").then(function(b){a.militaryRanks=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryPresentDuties").then(function(b){a.militaryPresentDuties=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryDischarges").then(function(b){a.militaryDischarges=b}),a.IndexValue=0,a.professionalWorkExperiences=[],b.$on("ProfessionalWorkExperiences",function(b,c){a.professionalWorkExperiences=c;for(var d=0;d<a.professionalWorkExperiences.length;d++)a.professionalWorkExperiences[d].StartDate=ConvertDateFormat(a.professionalWorkExperiences[d].StartDate),a.professionalWorkExperiences[d].EndDate=ConvertDateFormat(a.professionalWorkExperiences[d].EndDate)}),a.saveProfessionalWorkExperience=function(c,d){var e,f;"addProfessionalWorkExperience"==a.visibilityControl?(f=$("#newProfessionalWorkExperienceFormDiv").find("form"),e="/Profile/WorkHistory/AddProfessionalWorkExperienceAsync?profileId="+profileId):a.visibilityControl==d+"_editProfessionalWorkExperience"&&(f=$("#professionalWorkExperienceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateProfessionalWorkExperienceAsync?profileId="+profileId,ResetFormForValidation(f)),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalWorkExperience.StartDate=ConvertDateFormat(c.professionalWorkExperience.StartDate),c.professionalWorkExperience.EndDate=ConvertDateFormat(c.professionalWorkExperience.EndDate);var e=$(f[0]).find($("[name='ProviderTypeID'] option:selected")).text();c.professionalWorkExperience.ProviderType={ProviderTypeID:c.professionalWorkExperience.ProviderTypeID,Title:e},a.visibilityControl!=d+"_editProfessionalWorkExperience"?(a.professionalWorkExperiences.push(c.professionalWorkExperience),b.visibilityControl="addedNewProfessionalWorkExperience",g.callAlertMessage("addedNewProfessionalWorkExperience","Professional Work experience Information saved successfully !!!!","success",!0)):(a.professionalWorkExperiences[d]=c.professionalWorkExperience,b.visibilityControl="updatedProfessionalWorkExperience",g.callAlertMessage("addedNewProfessionalWorkExperience","Professional Work experience Information updated successfully !!!!","success",!0)),a.IsProfessionalWorkExperienceHasError=!1,FormReset(f),a.resetDates()}else g.callAlertMessage("addedNewProfessionalWorkExperience",c.status,"danger",!0)}})},a.publicHealthServices=[],b.$on("PublicHealthServices",function(b,c){a.publicHealthServices=c;for(var d=0;d<a.publicHealthServices.length;d++)a.publicHealthServices[d].StartDate=ConvertDateFormat(a.publicHealthServices[d].StartDate),a.publicHealthServices[d].EndDate=ConvertDateFormat(a.publicHealthServices[d].EndDate)}),a.savePublicHealthService=function(c,d){var e,f;"addPublicHealthService"==a.visibilityControl?(f=$("#newPublicHealthServiceFormDiv").find("form"),e="/Profile/WorkHistory/AddPublicHealthServiceAsync?profileId="+profileId):a.visibilityControl==d+"_editPublicHealthService"&&(f=$("#publicHealthServiceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdatePublicHealthServiceAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.publicHealthService.StartDate=ConvertDateFormat(c.publicHealthService.StartDate),c.publicHealthService.EndDate=ConvertDateFormat(c.publicHealthService.EndDate),a.visibilityControl!=d+"_editPublicHealthService"?(a.publicHealthServices.push(c.publicHealthService),b.visibilityControl="addedNewPublicHealthService",g.callAlertMessage("addedNewPublicHealthService","Public Health Service Information saved successfully !!!!","success",!0)):(a.publicHealthServices[d]=c.publicHealthService,b.visibilityControl="updatedPublicHealthService",g.callAlertMessage("addedNewPublicHealthService","Public Health Service Information updated successfully !!!!","success",!0)),a.IsPublicHealthServiceHasError=!1,FormReset(f),a.resetDates()):(a.IsPublicHealthServiceHasError=!0,a.PublicHealthServiceErrorList=c.status.split(","))}}),a.resetDates())},a.workGaps=[],b.$on("WorkGaps",function(b,c){a.workGaps=c;for(var d=0;d<a.workGaps.length;d++)a.workGaps[d].StartDate=ConvertDateFormat(a.workGaps[d].StartDate),a.workGaps[d].EndDate=ConvertDateFormat(a.workGaps[d].EndDate)}),a.saveWorkGap=function(c,d){var e,f;"addWorkGap"==a.visibilityControl?(f=$("#newWorkGapFormDiv").find("form"),e="/Profile/WorkHistory/AddWorkGapAsync?profileId="+profileId):a.visibilityControl==d+"_editWorkGap"&&(f=$("#workGapEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateWorkGapAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.workGap.StartDate=ConvertDateFormat(c.workGap.StartDate),c.workGap.EndDate=ConvertDateFormat(c.workGap.EndDate),a.visibilityControl!=d+"_editWorkGap"?(a.workGaps.push(c.workGap),b.visibilityControl="addedNewWorkGap",g.callAlertMessage("addedNewWorkGap","Work Gap Information saved successfully !!!!","success",!0)):(a.workGaps[d]=c.workGap,b.visibilityControl="updatedWorkGap",g.callAlertMessage("addedNewWorkGap","Work Gap Information updated successfully !!!!","success",!0)),a.IsWorkGapHasError=!1,FormReset(f),a.resetDates()):(a.IsWorkGapHasError=!0,a.WorkGapErrorList=c.status.split(","))}})},a.militaryServiceInformations=[],b.$on("MilitaryServiceInformations",function(b,c){a.militaryServiceInformations=c;for(var d=0;d<a.militaryServiceInformations.length;d++)a.militaryServiceInformations[d].StartDate=ConvertDateFormat(a.militaryServiceInformations[d].StartDate),a.militaryServiceInformations[d].DischargeDate=ConvertDateFormat(a.militaryServiceInformations[d].DischargeDate),a.militaryServiceInformations[d].MilitaryDischarge||(a.militaryServiceInformations[d].MilitaryDischarge="")}),a.saveMilitaryServiceInformation=function(c,d){var e,f;"addMilitaryServiceInformation"==a.visibilityControl?(f=$("#newMilitaryServiceInformationFormDiv").find("form"),e="/Profile/WorkHistory/AddMilitaryServiceInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMilitaryServiceInformation"&&(f=$("#militaryServiceInformationEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateMilitaryServiceInformationAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.militaryServiceInformation.MilitaryDischarge||(c.militaryServiceInformation.MilitaryDischarge=""),c.militaryServiceInformation.StartDate=ConvertDateFormat(c.militaryServiceInformation.StartDate),c.militaryServiceInformation.DischargeDate=ConvertDateFormat(c.militaryServiceInformation.DischargeDate),a.visibilityControl!=d+"_editMilitaryServiceInformation"?(a.militaryServiceInformations.push(c.militaryServiceInformation),b.visibilityControl="addedNewMilitaryServiceInformation",g.callAlertMessage("addedNewMilitaryServiceInformation","Military Service Information saved successfully !!!!","success",!0)):(a.militaryServiceInformations[d]=c.militaryServiceInformation,b.visibilityControl="updatedMilitaryServiceInformation",g.callAlertMessage("addedNewMilitaryServiceInformation","Military Service Information updated successfully !!!!","success",!0)),a.IsMilitaryServiceInfoHasError=!1,FormReset(f),a.resetDates()):(a.IsMilitaryServiceInfoHasError=!0,a.MilitaryServiceInfoErrorList=c.status.split(","))}}),a.resetDates())}}]),profileApp.controller("hospitalcltr",["$scope","$rootScope","$http","messageAlertEngine",function(a,b,c,d){$(document).ready(function(){c.get("/Profile/MasterData/GetAllHospitals").then(function(b){a.hospitals=b.data}),c.get("/Profile/MasterData/GetAllStaffCategories").then(function(b){a.staffCategories=b.data}),c.get("/Profile/MasterData/GetAllAdmittingPrivileges").then(function(b){a.admittingPrivileges=b.data}),c.get("/Profile/MasterData/GetAllHospitalContactPersons").then(function(b){a.ContactPersons=b.data})}),a.HaveHospitalPrivilege="True",a.HospitalPrivilegeInformations=[],b.$on("HospitalPrivilegeInformation",function(c,d){try{if(a.HospitalPrivilegeInformations=d,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length>0)for(var e=0;e<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;e++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate),a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate),a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].SpecialtyID||(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].SpecialtyID="")}catch(f){}}),a.locations="",a.filterData=function(b){try{a.locations=a.hospitals.filter(function(a){return a.HospitalID==b})[0].HospitalContactInfoes}catch(c){}},a.getAddress=function(b){try{a.LocationAddress=a.locations.filter(function(a){return a.HospitalContactInfoID==b})[0],a.tempObject.HospitalContactInfo=a.LocationAddress,a.contactPersons=a.LocationAddress.HospitalContactPersons}catch(c){}},a.getContactPersonDetail=function(b){try{a.contactPersonDetail=a.contactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0],a.tempObject.HospitalContactPerson=a.contactPersonDetail}catch(c){}},a.specialties=b.getSpecilityForThisUser(),a.getSpecialityForProvider=function(a){try{return b.getSpecilityForThisUser().filter(function(b){return b.Specialty.SpecialtyID==a})[0]}catch(c){}},a.getHospitalNameForProvider=function(b){try{return a.hospitals.filter(function(a){return a.HospitalID==b})[0]}catch(c){}},a.getStaffCategoryForProvider=function(b){try{return a.staffCategories.filter(function(a){return a.StaffCategoryID==b})[0]}catch(c){}},a.getHospitalLocationForProvider=function(b,c){try{return a.locations=a.hospitals.filter(function(a){return a.HospitalID==b})[0].HospitalContactInfoes,a.locations.filter(function(a){return a.HospitalContactInfoID==c})[0]}catch(d){}},a.getContactPersonForProvider=function(b){try{return a.ContactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0]}catch(c){}},a.getAdmittingPrivilageStatusForProvider=function(b){try{return a.admittingPrivileges.filter(function(a){return a.AdmittingPrivilegeID==b})[0]}catch(c){}},a.setPrimary=function(){try{for(var b=0;b<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;b++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[b].PreferenceType="2"}catch(c){}},a.indexVal="",a.visibilityControl="",a.tempObject={},a.operateViewAndAddControl=function(c){b.closeAlertMessage(),a.tempObject={},a.buttonLabel="Add",a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(d){}},a.operateEditControl=function(c,d){b.closeAlertMessage(),a.tempObject={},a.tempObject.selectedEduLocation={},a.buttonLabel="Update",a.tempObject=angular.copy(d),a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(e){}},a.operateCancelControl=function(){b.closeAlertMessage(),a.tempObject={},$(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid"),$(".input-validation-error").removeClass("input-validation-error").addClass("valid"),a.visibilityControl=""},a.message={desc:"",status:""},a.saveHopitalPrivilegeInformation=function(b){loadingOn(),a.message.desc="";var c,e;if($formDataHospitalPrivilege=$("#hospitalPrivilegeInfoForm"),c=$("#hospitalPrivilegeInfoForm").valid(),e="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeInfoAsync?profileId="+profileId,c){if("1"==b.HospitalPrivilegeYesNoOption)b.OtherAdmittingArrangements="",$($formDataHospitalPrivilege[0]).find($("[name='OtherAdmittingArrangements']")).val("");else try{a.HospitalPrivilegeInformations.HospitalPrivilegeDetails=[]}catch(f){}$.ajax({url:e,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(b){if("true"==b.status){try{a.HospitalPrivilegeInformations,a.HospitalPrivilegeInformations=angular.copy(b.hospitalPrivilegeInformation)}catch(c){}a.operateCancelControl(""),d.callAlertMessage("alertHospitalPrivilegeInformation","Hospital Privilege Information Saved Successfully!!!!","success",!0),a.resetDates()}else d.callAlertMessage("alertHospitalPrivilegeInformation",b.status,"danger",!0)},error:function(){d.callAlertMessage("alertHospitalPrivilegeInformation","Sorry for Inconvenience !!!! Please Try Again Later...","danger",!0)}})}loadingOff()},a.saveHospitalPrivilegeDetail=function(b,c){a.HospitalPrivilegeError="",a.indexVal=c;var e,f;"addhospitalPrivilegeInformation"==a.visibilityControl?(e=$("#newShowHosPrvDiv").find("form").valid(),$formDataHospitalPrivilege=$("#newShowHosPrvDiv").find("form"),f="/Profile/HospitalPrivilege/AddHospitalPrivilegeAsync?profileId="+profileId):(e=$("#hospitalPrivilegeInformationEditDiv"+c).find("form").valid(),$formDataHospitalPrivilege=$("#hospitalPrivilegeInformationEditDiv"+c).find("form"),f="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeAsync?profileId="+profileId),e&&$.ajax({url:f,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"1"==b.PreferenceType&&a.setPrimary(),"true"==e.status?("addhospitalPrivilegeInformation"==a.visibilityControl?(b.HospitalPrivilegeDetailID=e.id,b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.push(b),a.operateCancelControl(""),d.callAlertMessage("addedNewHospitalPrivilege","New Hospital Privilege Added Successfully !!!!","success",!0),a.tempObject={},a.tempObject={}):(b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[c]=b,a.operateViewAndAddControl(c+"_viewhospitalPrivilegeInformation"),d.callAlertMessage("updateHospitalPrivilege"+c,"Hospital Privilege Information Updated Successfully !!!!","success",!0)),a.resetDates()):(d.callAlertMessage("HospitalPrivilegeError","","danger",!0),a.HospitalPrivilegeError=e.status.split(","))},error:function(){d.callAlertMessage("HospitalPrivilegeError","","danger",!0),a.HospitalPrivilegeError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.resetDates=function(){try{a.tempObject.AffilicationStartDate=new Date,a.tempObject.AffiliationEndDate=new Date}catch(b){}}}]);