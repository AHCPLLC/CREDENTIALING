profileApp.service("dynamicFormGenerateService",["$compile",function(a){this.getForm=function(b,c){return a(c)(b)}}]),profileApp.directive("tooltip",function(){return function(a,b){b.tooltip()}}),profileApp.directive("validFile",function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){d.$setViewValue(b.val())},b.bind("change",function(){a.$apply(function(){d.$render()})})}}}),profileApp.controller("profileDemographicsController",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){$(document).ready(function(){$("#Loading_Message").text("Gathering Profile Data..."),c({method:"GET",url:"/Profile/MasterProfile/get?profileId="+profileId}).success(function(a){try{for(key in a)b.$emit(key,a[key]);$("#Loading_Message").text("Inserting Profile Data..."),$("#loadingData").hide("fast")}catch(c){$("#loadingData").hide("fast")}}).error(function(){$("#loadingData").hide("fast")})}),a.Provider={},a.message={},b.$on("ProfilePhotoPath",function(b,c){a.Provider.ProfilePhotoPath=c}),b.$on("PersonalDetail",function(b,c){a.Provider.PersonalDetails=c}),b.$on("OtherLegalNames",function(b,c){if(c.length>0)for(var d in c)c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate);a.Provider.OtherLegalNames=c}),b.$on("HomeAddresses",function(b,c){if(c.length>0)for(var d in c)c[d].LivingEndDate=ConvertDateFormat(c[d].LivingEndDate),c[d].LivingFromDate=ConvertDateFormat(c[d].LivingFromDate);a.HomeAddresses=c}),b.$on("ContactDetail",function(b,c){a.Provider.ContactDetails=c}),b.$on("PersonalIdentification",function(b,c){a.Provider.PersonalIdentification=c}),b.$on("BirthInformation",function(b,c){c&&(c.DateOfBirth=ConvertDateFormat(c.DateOfBirth)),a.Provider.BirthInformation=c}),b.$on("VisaDetail",function(b,c){c&&c.VisaInfo&&(c.VisaInfo.VisaExpirationDate=ConvertDateFormat(c.VisaInfo.VisaExpirationDate)),a.Provider.VisaDetails=c}),b.$on("LanguageInfo",function(b,c){a.Provider.LanguageInfo=c}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),d.getMasterData("/Profile/MasterData/getallvisatypes").then(function(b){a.VisaTypes=b}),d.getMasterData("/Profile/MasterData/getallvisastatus").then(function(b){a.VisaStatuses=b}),a.Languages=Languages,a.CountryDialCodes=countryDailCodes,a.CountryOfissue=CountryOfissue,a.PreferredContacts=[{PreferredContactID:null,ContactType:"Home Phone",PreferredWrittenContactType:1,StatusType:1,PreferredIndex:1},{PreferredContactID:null,ContactType:"Fax",PreferredWrittenContactType:2,StatusType:1,PreferredIndex:2},{PreferredContactID:null,ContactType:"Mobile",PreferredWrittenContactType:3,StatusType:1,PreferredIndex:3},{PreferredContactID:null,ContactType:"Email",PreferredWrittenContactType:4,StatusType:1,PreferredIndex:4},{PreferredContactID:null,ContactType:"Pager",PreferredWrittenContactType:5,StatusType:1,PreferredIndex:5}],a.addressHomeAutocomplete=function(b){a.resetAddressModels(),a.tempObject.City=b,b.length>2&&!angular.isObject(b)?a.Locations=e.getLocations(b):b.length<3&&!angular.isObject(b)?a.Locations=[]:angular.isObject(b)&&a.setAddressModels(b)},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.addressAutocompleteForBirthInformation=function(b){a.resetBirthAddressModels(),a.tempObject.CityOfBirth=b,b.length>2&&!angular.isObject(b)?a.Locations=e.getLocations(b):b.length<3&&!angular.isObject(b)?a.Locations=[]:angular.isObject(b)&&a.setBirthAddressModels(b)},a.resetBirthAddressModels=function(){a.tempObject.CityOfBirth="",a.tempObject.StateOfBirth="",a.tempObject.CountryOfBirth=""},a.setBirthAddressModels=function(b){a.tempObject.CityOfBirth=b.City,a.tempObject.StateOfBirth=b.State,a.tempObject.CountryOfBirth=b.Country},a.ViewPersonalDetails=!0,a.PersonalDetailsToggle=function(c){"EditPersonalDetails"==c?(b.visibilityControl=c,a.getProviderTypesAndTempData()):b.visibilityControl=c},a.getProviderTypesAndTempData=function(){if(a.TempPersonalDetailsForEdit=angular.copy(a.Provider.PersonalDetails),a.tempProviderTypes=angular.copy(a.ProviderTypes),a.TempPersonalDetailsForEdit)if(a.TempPersonalDetailsForEdit.ProviderTitles)for(var b in a.TempPersonalDetailsForEdit.ProviderTitles)for(var c in a.tempProviderTypes)a.TempPersonalDetailsForEdit.ProviderTitles[b].ProviderType.ProviderTypeID==a.tempProviderTypes[c].ProviderTypeID&&a.tempProviderTypes.splice(c,1);else a.TempPersonalDetailsForEdit.ProviderTitles=[];else a.TempPersonalDetailsForEdit={ProviderTitles:[]}},a.SelectProviderType=function(b){a.TempPersonalDetailsForEdit.ProviderTitles.push({ProviderType:b,ProviderTitleID:null,ProviderTypeId:b.ProviderTypeID,StatusType:1}),a.tempProviderTypes.splice(a.tempProviderTypes.indexOf(b),1)},a.ActionProviderType=function(b,c){if("remove"==c)a.TempPersonalDetailsForEdit.ProviderTitles.splice(a.TempPersonalDetailsForEdit.ProviderTitles.indexOf(b),1),a.tempProviderTypes.push(b.ProviderType);else if("deactivate"==c){var d=0;for(var e in a.TempPersonalDetailsForEdit.ProviderTitles)1==a.TempPersonalDetailsForEdit.ProviderTitles[e].StatusType&&d++;b.StatusType=1==d?1:2}else"activate"==c&&(b.StatusType=1)},a.ProfileUpload=function(c){if(a.valstaus=!0,ResetFormForValidation($("#"+c)),$("#"+c).valid()){var d=$("#ProfilePic")[0];$.ajax({url:"/Profile/Demographic/FileUploadAsync?profileId="+profileId,type:"POST",data:new FormData(d),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl="",f.callAlertMessage("alertPersonalDetailsSuccess","Profile Picture uploaded successfully.","success",!0)):f.callAlertMessage("alertPersonalDetailsSuccess",c.status,"danger",!0)}})}},a.ProfilePictureRemove=function(c){$.ajax({url:"/Profile/Demographic/FileRemoveAsync?profileId="+profileId,type:"POST",data:new FormData(c),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl="",f.callAlertMessage("alertPersonalDetailsSuccess","Profile Picture removed successfully.","success",!0)):f.callAlertMessage("alertPersonalDetailsSuccess",c.status,"danger",!0)}})},a.DemographicsUpdatePersonalDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&a.TempPersonalDetailsForEdit.ProviderTitles.length>0?(a.isHasError=!1,$.ajax({url:"/Profile/Demographic/UpdatePersonalDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){if("true"==d.status){if(d.personalDetail.ProviderTitles.length>0)for(var e in d.personalDetail.ProviderTitles)for(var g=0;g<a.ProviderTypes.length;g++)d.personalDetail.ProviderTitles[e].ProviderTypeId==a.ProviderTypes[g].ProviderTypeID&&(d.personalDetail.ProviderTitles[e].ProviderType=a.ProviderTypes[g]);a.Provider.PersonalDetails=d.personalDetail,FormReset($("#"+c)),b.visibilityControl="",f.callAlertMessage("alertPersonalDetailsSuccess","Personal Details updated successfully.","success",!0)}else f.callAlertMessage("alertPersonalDetailsError",d.status.split(","),"danger",!0)}})):a.isHasError=!0},a.saveOtherLegalName=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames.push(c.otherLegalName),b.visibilityControl="",FormReset(d),f.callAlertMessage("alertOtherLegalNameSuccess","Other Legal Name saved successfully.","success",!0)):f.callAlertMessage("alertOtherLegalNameError",c.status.split(","),"danger",!0)}})},a.updateOtherLegalName=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames[d]=c.otherLegalName,b.visibilityControl=d+"_ViewOtherLegalName",FormReset(e),f.callAlertMessage("alertOtherLegalNameSuccess"+d,"Other Legal Name updated successfully.","success",!0)):f.callAlertMessage("alertOtherLegalNameError"+d,c.status.split(","),"danger",!0)}})},a.saveHomeAddress=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.homeAddress.AddressPreferenceType)for(var e in a.HomeAddresses)a.HomeAddresses[e].AddressPreferenceType=2,a.HomeAddresses[e].AddressPreference="Secondary";c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),a.HomeAddresses.push(c.homeAddress),b.tempObject={},b.visibilityControl="",FormReset(d),f.callAlertMessage("alertHomeAddressSuccess","Home Address saved successfully.","success",!0)}else f.callAlertMessage("alertHomeAddressError",c.status.split(","),"danger",!0)}})},a.updateHomeAddress=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.homeAddress.AddressPreferenceType)for(var g in a.HomeAddresses)a.HomeAddresses[g].AddressPreferenceType=2,a.HomeAddresses[g].AddressPreference="Secondary";c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),a.HomeAddresses[d]=c.homeAddress,b.visibilityControl=d+"_ViewHomeAddress",FormReset(e),f.callAlertMessage("alertHomeAddressSuccess"+d,"Home Address updated successfully.","success",!0)}else f.callAlertMessage("alertHomeAddressError"+d,c.status.split(","),"danger",!0)}})},a.removeHomeAddress=function(b){for(var c in a.HomeAddresses)if(b==c){a.HomeAddresses.splice(b,1);break}},a.ContactDetailsToggle=function(c){"EditContactDetails"==c?(b.visibilityControl=c,a.getTempContactDetailsForEdit()):(b.visibilityControl=c,a.ContactDetailsEmptyError=!1)},a.getTempContactDetailsForEdit=function(){a.TempContactDetailsForEdit=angular.copy(a.Provider.ContactDetails),a.TempPreferredWrittenContacts=angular.copy(a.PreferredWrittenContacts),a.TempPreferredContacts=angular.copy(a.PreferredContacts),null==a.TempContactDetailsForEdit?a.TempContactDetailsForEdit={PhoneDetails:[],EmailIDs:[],PreferredWrittenContacts:[],PreferredContacts:[]}:a.PreferredContactTypesArray=a.TempContactDetailsForEdit.PreferredContacts},a.PreferredContactTypesArray=[],a.addPreferredContactTypesToArray=function(b){var c=!0;for(var d in a.PreferredContactTypesArray)if(a.PreferredContactTypesArray[d].PreferredWrittenContactType==b){a.PreferredContactTypesArray[d].StatusType=1,c=!1;break}c&&a.PreferredContactTypesArray.push(a.PreferredContacts[b-1])},a.RemovePreferredContactTypesFromArray=function(b){for(var c in a.PreferredContactTypesArray){if(a.PreferredContactTypesArray[c].PreferredWrittenContactType==b&&a.PreferredContactTypesArray[c].PreferredContactID){a.PreferredContactTypesArray[c].StatusType=2;break}if(a.PreferredContactTypesArray[c].PreferredWrittenContactType==b&&!a.PreferredContactTypesArray[c].PreferredContactID){a.PreferredContactTypesArray.splice(a.PreferredContactTypesArray.indexOf(a.PreferredContactTypesArray[c]),1);break}}},a.selectedPrefferdContact=function(b,c){a.pcPriority=b,a.pcIndex=c},a.ChangePreferredContactsPriority=function(b){var c=a.PreferredContactTypesArray.indexOf(a.pcPriority);"increase"==b&&0!==c?(a.PreferredContactTypesArray[c].ProficiencyIndex=c,a.PreferredContactTypesArray[c-1].ProficiencyIndex=c+1,a.pcIndex=c-1):"decrease"==b&&c!==a.PreferredContactTypesArray.length-1&&(a.PreferredContactTypesArray[c].ProficiencyIndex=c+2,a.PreferredContactTypesArray[c+1].ProficiencyIndex=c+1,a.pcIndex=c+1),a.PreferredContactTypesArray.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.AddPhones=function(b,c){b.push({PhoneDetailID:null,Number:"",CountryCode:"+1",PhoneTypeEnum:c,Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(c)},a.AddEmail=function(b){b.push({EmailDetailID:null,EmailAddress:"",Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(4)},a.AddPager=function(){a.TempContactDetailsForEdit.CountryCode="+1",a.addPreferredContactTypesToArray(5)},a.RemovePager=function(){a.TempContactDetailsForEdit.CountryCode=a.putEmpty,a.TempContactDetailsForEdit.PagerNumber=a.putEmpty,a.RemovePreferredContactTypesFromArray(5)},a.RemoveContactDetails=function(a,b){b.splice(a,1)},a.PreferredContactChange=function(a,b){a.StatusType=b?1:2},a.PreferredContactPriority=function(a,b,c){"increase"==a?(c[b].PreferredIndex=b,c[b-1].PreferredIndex=b+1):"decrease"==a&&(c[b].PreferredIndex=b+2,c[b+1].PreferredIndex=b+1),c.sort(function(a,b){return a.PreferredIndex-b.PreferredIndex})},a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.ContactDetailsPhoneConditionFunction=function(a,b,c){if(b.length>0)for(var d in b)if(b[d].PhoneTypeEnum==c)if(d==b.indexOf(a))switch(b[d].PreferenceType){case 1:b[d].PreferenceType=2;break;case 2:b[d].PreferenceType=1;break;default:b[d].PreferenceType=1}else b[d].PreferenceType=2},a.ContactDetailsEmailConditionFunction=function(a,b){if(b.length>0)for(var c in b)if(c==a)switch(b[c].PreferenceType){case 1:b[c].PreferenceType=2;break;case 2:b[c].PreferenceType=1;break;default:b[c].PreferenceType=1}else b[c].PreferenceType=2},a.showConfirmation=function(b,c,d){var e=angular.copy(b[c]);switch(b[c].StatusType){case 1:b[c].StatusType=2;break;case 2:b[c].StatusType=1;break;default:b[c].StatusType=1}if("phone"==d){e.PhoneDetailID||a.RemoveContactDetails(c,b);var f=a.getPhoneStatusType(b,e);f||a.RemovePreferredContactTypesFromArray(e.PhoneTypeEnum)}else if("email"==d){e.EmailDetailID||a.RemoveContactDetails(c,b);var f=a.getEmailStatusType(b);f||a.RemovePreferredContactTypesFromArray(4)}},a.InactiveContactDetails=function(){$("#ConfirmationContactDetails").modal("hide")},a.getPhoneStatusType=function(a,b){var c=!1;for(var d in a)if(b.PhoneTypeEnum==a[d].PhoneTypeEnum&&1==b.StatusType){c=!0;break}return c},a.getEmailStatusType=function(a){var b=!1;for(var c in a)if(1==a[c].StatusType){b=!0;break}return b},a.saveContactDetails=function(c){ResetFormForValidation($("#"+c));var d=a.IsContactDetailsFormValidate();$("#"+c).valid()&&d?$.ajax({url:"/Profile/Demographic/UpdateContactDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){"true"==d.status?(a.Provider.ContactDetails=d.contactDetail,a.TempContactDetailsForEdit=[],a.PreferredContactTypesArray=[],a.ContactDetailsEmptyError=!1,FormReset($("#"+c)),b.visibilityControl="",f.callAlertMessage("alertContactDetailsSuccess","Contact Details updated successfully.","success",!0)):f.callAlertMessage("alertContactDetailsError",d.status.split(","),"danger",!0)},cache:!1,contentType:!1,processData:!1}):a.ContactDetailsEmptyError=!0},a.IsContactDetailsFormValidate=function(){var b=!1;return(a.TempContactDetailsForEdit.PhoneDetails.length>0||a.TempContactDetailsForEdit.EmailIDs.length>0||a.PreferredContactTypesArray.length>0)&&(b=!0),b},a.DemographicsPersonalIdentificationSave=function(c){ResetFormForValidation($("#"+c));$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdatePersonalIdentificationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.PersonalIdentification=d.personalIdentification,b.tempObject={},b.visibilityControl="",FormReset($("#"+c)),f.callAlertMessage("alertPersonalIdentificationSuccess","Personal Identification updated successfully.","success",!0)):f.callAlertMessage("alertPersonalIdentificationError",d.status.split(","),"danger",!0)}})},a.saveBirthInformation=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateBirthInformationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(d.birthInformation.DateOfBirth=ConvertDateFormat(d.birthInformation.DateOfBirth),a.Provider.BirthInformation=d.birthInformation,b.tempObject={},b.visibilityControl="",FormReset($("#"+c)),f.callAlertMessage("alertBirthInformationSuccess","Birth Information saved successfully.","success",!0)):f.callAlertMessage("alertBirthInformationError",d.status.split(","),"danger",!0)}})},a.saveEthnicityVisaDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateVisaDetailAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.visaDetail.VisaInfo){d.visaDetail.VisaInfo.VisaExpirationDate=ConvertDateFormat(d.visaDetail.VisaInfo.VisaExpirationDate);for(var e in a.VisaTypes)if(d.visaDetail.VisaInfo.VisaTypeID==a.VisaTypes[e].VisaTypeID){d.visaDetail.VisaInfo.VisaType=a.VisaTypes[e];break}for(var e in a.VisaStatuses)if(d.visaDetail.VisaInfo.VisaStatusID==a.VisaStatuses[e].VisaStatusID){d.visaDetail.VisaInfo.VisaStatus=a.VisaStatuses[e];break}}a.Provider.VisaDetails=d.visaDetail,b.tempObject={},b.visibilityControl="",f.callAlertMessage("alertVisaDetailsSuccess","Visa Details updated successfully.","success",!0),FormReset($("#"+c))}else f.callAlertMessage("alertVisaDetailsError",d.status.split(","),"danger",!0)},cache:!1,contentType:!1,processData:!1})},a.TempLanguageForEdit=[],a.SelectLanguageKnown=function(b){a.TempLanguageForEdit.KnownLanguages.push({KnownLanguageID:null,Language:b.name,ProficiencyIndex:a.TempLanguageForEdit.length}),a.tempLanguages.splice(a.tempLanguages.indexOf(b),1)},a.UnselectLanguage=function(b){for(c in a.TempLanguageForEdit.KnownLanguages)a.TempLanguageForEdit.KnownLanguages[c]==b&&a.TempLanguageForEdit.KnownLanguages.splice(a.TempLanguageForEdit.KnownLanguages.indexOf(b),1);for(var c in a.Languages)a.Languages[c].name==b.Language&&a.tempLanguages.push(a.Languages[c])},a.selectedLanguage=function(b,c){a.langForPriority=b,a.selectedIndex=c},a.PriorityChange=function(b){var c=a.TempLanguageForEdit.KnownLanguages.indexOf(a.langForPriority);"increase"==b?(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c,a.TempLanguageForEdit.KnownLanguages[c-1].ProficiencyIndex=c+1,a.selectedIndex=c-1):"decrease"==b&&(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c+2,a.TempLanguageForEdit.KnownLanguages[c+1].ProficiencyIndex=c+1,a.selectedIndex=c+1),a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.getArray=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.shoLanguageList=function(a){$("#"+a).show()},a.IsExistInArray=function(a,b){var c=[];return status=!0,angular.forEach(a,function(){-1===c.indexOf(b)?c.push(b):status=!1}),status},a.ViewLanguageKnown=!0,a.LanguageKnownToggle=function(c){"EditKnowLanguage"==c?(b.visibilityControl=c,a.getLanguagesAndTempData()):b.visibilityControl=c},a.getLanguagesAndTempData=function(){if(a.TempLanguageForEdit=angular.copy(a.Provider.LanguageInfo),a.tempLanguages=angular.copy(a.Languages),a.TempLanguageForEdit){for(var b in a.TempLanguageForEdit.KnownLanguages)for(var c in a.tempLanguages)a.TempLanguageForEdit.KnownLanguages[b].Language==a.tempLanguages[c].name&&a.tempLanguages.splice(c,1);a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})}else a.TempLanguageForEdit={KnownLanguages:[]};a.langForPriority=null,a.selectedIndex={}},a.saveLanguages=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateLanguagesAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.LanguageInfo=d.languageInfo,a.TempLanguageForEdit=[],FormReset($("#"+c)),b.visibilityControl="",f.callAlertMessage("alertLanguageKnownSuccess","Languages Know updated successfully.","success",!0)):f.callAlertMessage("alertLanguageKnownError",d.status.split(","),"danger",!0)}})}}]),$(document).click(function(a){$(a.target).hasClass("countryCodeClass")||0!==$(a.target).parents(".countryDailCodeContainer").length||$(".countryDailCodeContainer").hide(),$(a.target).hasClass("form-control")||0!==$(a.target).parents(".LanguageSelectAutoList").length||$(".LanguageSelectAutoList").hide(),$(a.target).hasClass("form-control")||0!==$(a.target).parents(".ProviderTypeSelectAutoList").length||$(".ProviderTypeSelectAutoList").hide()});var changeVisibilityOfCountryCode=function(){$(".countryDailCodeContainer").hide()};$(document).ready(function(){$(".countryDailCodeContainer").hide(),$(".ProviderTypeSelectAutoList").hide()}),profileApp.controller("educationController",["$scope","$rootScope","$http","countryDropDownService","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){a.masterSpecialties=[],e.getMasterData("/Profile/MasterData/GetAllSpecialities").then(function(b){a.masterSpecialties=b}),a.masterSchools=[],e.getMasterData("/Profile/MasterData/GetAllSchools").then(function(b){a.masterSchools=b}),a.masterCertifications=[],e.getMasterData("/Profile/MasterData/GetAllCertificates").then(function(b){a.masterCertifications=b}),a.masterDegrees=[],e.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.masterHospitals=[],e.getMasterData("/Profile/MasterData/GetAllHospitals").then(function(b){a.masterHospitals=b}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.addressAutocomplete=function(b){a.resetAddressModels(),a.tempObject.SchoolInformation.City=b,b.length<3&&!angular.isObject(b)&&(a.Locations=[]),b.length>2&&!angular.isObject(b)?a.Locations=f.getLocations(b):angular.isObject(b)&&a.setAddressModels(b)},a.resetAddressModels=function(){a.tempObject.SchoolInformation.City="",a.tempObject.SchoolInformation.State="",a.tempObject.SchoolInformation.Country=""},a.setAddressModels=function(b){a.tempObject.SchoolInformation.City=b.City,a.tempObject.SchoolInformation.State=b.State,a.tempObject.SchoolInformation.Country=b.Country},a.searchCumDropDown=function(a){$("#"+a).show()},a.addIntoSchoolDropDown=function(b,c){a.tempObject.SchoolInformation.SchoolName=b,$("#"+c).hide()},a.addIntoDegreeDropDown=function(b,c){a.tempObject.QualificationDegree=b,$("#"+c).hide()},a.addIntoHospitalDropDown=function(b,c){a.tempObject.HospitalName=b,$("#"+c).hide()},a.addIntoCMEDropDown=function(b,c){a.tempObject.Certification=b,$("#"+c).hide()},a.educationDetailViewModels=[],a.GraduationDetailViewModel=[],b.$on("EducationDetails",function(b,c){for(var d=0;d<c.length;d++)null!=c[d]&&(c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate),1==c[d].EducationQualificationType?a.educationDetailViewModels.push(c[d]):a.GraduationDetailViewModel.push(c[d]))}),a.saveUG=function(c,d){var e,f,h;"addeducationDetailViewModel"==a.visibilityControl?(h=$("#newUGFormDiv").find("form"),f="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editeducationDetailViewModel"&&(h=$("#ugEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?("addeducationDetailViewModel"==a.visibilityControl?(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels.push(c.educationDetails),b.operateCancelControl(),g.callAlertMessage("addedNewUGDetails","New Under Graduate/Professional School Details Added Successfully !!!!","success",!0)):a.visibilityControl==d+"_editeducationDetailViewModel"&&(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels[d]=c.educationDetails,b.operateViewAndAddControl(d+"_vieweducationDetailViewModel"),g.callAlertMessage("updatedUGDetails"+d,"Under Graduate/Professional School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(g.callAlertMessage("ErrorInUGDetails"+d,"","danger",!0),a.UGDetailsErrorList=c.status.split(","))},error:function(){g.callAlertMessage("ErrorInUGDetails"+d,"","danger",!0),a.UGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.saveGraduation=function(c,d){var e,f,h;a.IndexValue=0,"addgraduationDetailViewModel"==a.visibilityControl?(h=$("#newGraduationFormDiv").find("form"),f="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(h=$("#graduationEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?("addgraduationDetailViewModel"==a.visibilityControl?(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel.push(c.educationDetails),b.operateCancelControl(),g.callAlertMessage("addedNewPGDetails","New Graduate/Medical School Details Added Successfully !!!!","success",!0)):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel[d]=c.educationDetails,b.operateViewAndAddControl(d+"_viewgraduationDetailViewModel"),g.callAlertMessage("updatedPGDetails"+d,"Graduate/Medical School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(g.callAlertMessage("ErrorInPGDetails"+d,"","danger",!0),a.PGDetailsErrorList=c.status.split(","))},error:function(){g.callAlertMessage("ErrorInPGDetails"+d,"","danger",!0),a.PGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},b.$on("ECFMGDetail",function(b,c){null!=c&&(c.ECFMGIssueDate=ConvertDateFormat(c.ECFMGIssueDate),a.ecfmgDetail=c)}),a.saveECFMGDetails=function(){var c,d,e;"editecfmgDetail"==a.visibilityControl&&(e=$("#ecfmgEditDiv").find("form"),d="/Profile/EducationHistory/UpdateECFMGDetailAsync?profileId="+profileId),ResetFormForValidation(e),c=e.valid(),c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInUGDetails=!1,"editecfmgDetail"==a.visibilityControl?(c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),b.operateCancelControl(),a.ecfmgDetail=c.ecfmgDetails,g.callAlertMessage("addedNewECFMGDetails","ECFMG Detail Saved Successfully !!!!","success",!0)):a.visibilityControl==IndexValue+"updateecfmgDetail"&&(c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),a.ecfmgDetail=c.ecfmgDetails,b.operateViewAndAddControl(IndexValue+"!editecfmgDetail"),g.callAlertMessage("updatedECFMGDetails"+IndexValue,"ECFMG Detail Saved Successfully !!!!","success",!0)),a.datePickerReset()):(g.callAlertMessage("ErrorInECFMGDetails"+IndexValue,"","danger",!0),a.ECFMGDetailsErrorList=c.status.split(","))},error:function(){g.callAlertMessage("ErrorInECFMGDetails"+IndexValue,"","danger",!0),a.ECFMGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.ResidencyInternshipViewModel=[],b.$on("TrainingDetails",function(b,c){for(var d=0;d<c.length;d++)if(null!=c[d]){for(var e=0;e<c[d].ResidencyInternshipDetails.length;e++)c[d].ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].StartDate),c[d].ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].EndDate);a.ResidencyInternshipViewModel.push(c[d])}}),a.saveProgram=function(c,d){var e,f,h;"addresidencyInternshipViewModel"==a.visibilityControl?(h=$("#newProgramFormDiv").find("form"),f="/Profile/EducationHistory/AddTrainingDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(h=$("#programEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateTrainingDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){for(var e=0;e<c.TrainingDetails.ResidencyInternshipDetails.length;e++)null!=c.TrainingDetails.ResidencyInternshipDetails&&(c.TrainingDetails.ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c.TrainingDetails.ResidencyInternshipDetails[e].StartDate),c.TrainingDetails.ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c.TrainingDetails.ResidencyInternshipDetails[e].EndDate));a.ErrorInProgramDetails=!1,"addresidencyInternshipViewModel"==a.visibilityControl?(b.visibilityControl="addedNewProgramDetails",a.ResidencyInternshipViewModel.push(c.TrainingDetails),b.operateCancelControl(),g.callAlertMessage("addedNewProgramDetails","School Details Added Successfully. Use edit action to add Residency/Internship/fellowship Details!!!","success",!0)):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(a.ResidencyInternshipViewModel[d]=c.TrainingDetails,b.operateViewAndAddControl(d+"_viewresidencyInternshipViewModel"),g.callAlertMessage("updatedProgramDetails"+d,"School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)}else g.callAlertMessage("ErrorInProgramDetails"+d,"","danger",!0),a.ProgramDetailsErrorList=c.status.split(",")},error:function(){g.callAlertMessage("ErrorInProgramDetails"+d,"","danger",!0),a.ResidencyDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.AddView="Add",a.SetAddView=function(b){a.AddView=b},a.setPrimary=function(){try{if(a.ResidencyInternshipViewModel.length>0)for(var b=0;b<a.ResidencyInternshipViewModel.length;b++)for(var c=0;c<a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails.length;c++)a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails[c].PreferenceType="2"}catch(d){}},a.updateResidencyForView=function(c,d,e){var f,h,i,j=c.TrainingDetailID;"addresidencyForView"==a.visibilitySecondControl?(h=$("#newViewResidencyDivFor"+a.AddView+j).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),f="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j):a.visibilitySecondControl==e+"_editresidencyForView"&&(h=$("#viewResidencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),f="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j),ResetFormForValidation(h),validationStatus=h.valid(),validationStatus&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(f){if("1"==d.PreferenceType&&a.setPrimary(),"true"==f.status){if(a.ErrorInResidencyDetails=!1,"addresidencyForView"==a.visibilitySecondControl){f.ResidencyDetails.Specialty={ID:f.ResidencyDetails.SpecialtyID,Name:i},f.ResidencyDetails.StartDate=ConvertDateFormat(f.ResidencyDetails.StartDate),f.ResidencyDetails.EndDate=ConvertDateFormat(f.ResidencyDetails.EndDate);
for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails.push(f.ResidencyDetails);b.operateSecondCancelControl(),g.callAlertMessage("addedNewResidencyDetailsForView","New Residency/Internship/fellowship Details Added Successfully!!!","success",!0)}else if(a.visibilitySecondControl==e+"_editresidencyForView"){f.ResidencyDetails.Specialty={ID:f.ResidencyDetails.SpecialtyID,Name:i},f.ResidencyDetails.StartDate=ConvertDateFormat(f.ResidencyDetails.StartDate),f.ResidencyDetails.EndDate=ConvertDateFormat(f.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails[e]=f.ResidencyDetails,c.ResidencyInternshipDetails[e]=f.ResidencyDetails);b.operateSecondViewAndAddControl(e+"_viewresidencyForView"),g.callAlertMessage("updatedResidencyDetailsForView"+e,"Residency/Internship/fellowship Details Updated Successfully !!!!","success",!0)}a.datePickerReset(),FormReset(h)}else g.callAlertMessage("ErrorInResidencyDetailsForView"+e,"","danger",!0),a.ResidencyDetailsErrorListForView=f.status.split(",")},error:function(){g.callAlertMessage("ErrorInResidencyDetailsForView"+e,"","danger",!0),a.ResidencyDetailsErrorListForView="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.updateResidency=function(c,d,e){var f,h,i,j=c.TrainingDetailID;"addresidency"==a.visibilitySecondControl?(h=$("#newResidencyDivFor"+a.AddView+j).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),f="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j):a.visibilitySecondControl==e+"_editresidency"&&(h=$("#residencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),f="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j),ResetFormForValidation(h),validationStatus=h.valid(),validationStatus&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(f){if("1"==d.PreferenceType&&a.setPrimary(),"true"==f.status){if(a.ErrorInResidencyDetails=!1,"addresidency"==a.visibilitySecondControl){f.ResidencyDetails.Specialty={ID:f.ResidencyDetails.SpecialtyID,Name:i},f.ResidencyDetails.StartDate=ConvertDateFormat(f.ResidencyDetails.StartDate),f.ResidencyDetails.EndDate=ConvertDateFormat(f.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails.push(f.ResidencyDetails),c.ResidencyInternshipDetails.push(f.ResidencyDetails));b.operateSecondCancelControl(),g.callAlertMessage("addedNewResidencyDetails","New Residency/Internship/fellowship Details Added Successfully!!!","success",!0)}else if(a.visibilitySecondControl==e+"_editresidency"){f.ResidencyDetails.Specialty={ID:f.ResidencyDetails.SpecialtyID,Name:i},f.ResidencyDetails.StartDate=ConvertDateFormat(f.ResidencyDetails.StartDate),f.ResidencyDetails.EndDate=ConvertDateFormat(f.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails[e]=f.ResidencyDetails,c.ResidencyInternshipDetails[e]=f.ResidencyDetails);b.operateSecondViewAndAddControl(e+"_viewresidency"),g.callAlertMessage("updatedResidencyDetails"+e,"Residency/Internship/fellowship Details Updated Successfully !!!!","success",!0)}a.datePickerReset(),FormReset(h)}else g.callAlertMessage("ErrorInResidencyDetails"+e,"","danger",!0),a.ResidencyDetailsErrorListForView=f.status.split(",")},error:function(){g.callAlertMessage("ErrorInResidencyDetails"+e,"","danger",!0),a.ResidencyDetailsErrorListForView="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.CertificationCMEViewModel=[],b.$on("CMECertifications",function(c,d){for(var e=0;e<d.length;e++)null!=d[e]&&(d[e].StartDate=ConvertDateFormat(d[e].StartDate),d[e].EndDate=ConvertDateFormat(d[e].EndDate),d[e].ExpiryDate=ConvertDateFormat(d[e].ExpiryDate),d[e].City=b.ConvertCity(d[e].City),a.CertificationCMEViewModel.push(d[e]))}),a.saveCertificate=function(c,d){var e,f,h;"addcertificationCMEViewModel"==a.visibilityControl?(e=$("#newCertificateFormDiv").find("form").valid(),h=$("#newCertificateFormDiv").find("form"),f="/Profile/EducationHistory/AddCMECertificationAsync?profileId="+profileId):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(e=$("#certificateEditDiv"+d).find("form").valid(),h=$("#certificateEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateCMECertificationAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInCMEDetails=!1,"addcertificationCMEViewModel"==a.visibilityControl?(c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel.push(c.CMEDetails),b.operateCancelControl(),g.callAlertMessage("addedNewCMEDetails","New PostGraduate Training/CME Details Added Successfully!!!","success",!0)):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel[d]=c.CMEDetails,b.operateViewAndAddControl(d+"_viewcertificationCMEViewModel"),g.callAlertMessage("updatedCMEDetails"+d,"PostGraduate Training/CME Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(g.callAlertMessage("ErrorInCMEDetails"+d,"","danger",!0),a.CMEDetailsErrorList=c.status.split(","))},error:function(){g.callAlertMessage("ErrorInCMEDetails"+d,"","danger",!0),a.CMEDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.datePickerReset=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date,a.tempSecondObject.StartDate=new Date,a.tempSecondObject.EndDate=new Date,a.tempObject.ExpiryDate=new Date,a.tempObject.ECFMGIssueDate=new Date}catch(b){}}}]),profileApp.controller("identificationLicenseController",["$scope","$rootScope","$http","dynamicFormGenerateService","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),e.getMasterData("/Profile/MasterData/GetAllLicenseStatus").then(function(b){a.StateLicenseStatuses=b}),angular.element(document).ready(function(){c.get("/Location/GetStates").then(function(b){a.States=b.data})}),a.StateLicenses=[],b.$on("StateLicenses",function(b,c){a.StateLicenses=c;for(var d=0;d<a.StateLicenses.length;d++)a.StateLicenses[d].IssueDate=ConvertDateFormat(a.StateLicenses[d].IssueDate),a.StateLicenses[d].ExpiryDate=ConvertDateFormat(a.StateLicenses[d].ExpiryDate),a.StateLicenses[d].CurrentIssueDate=ConvertDateFormat(a.StateLicenses[d].CurrentIssueDate)}),a.IndexValue1="",a.saveStateLicense=function(c,d){var e,f,h,i,j,k,l;a.SLError="",i=c.ProviderTypeID,k=c.StateLicenseStatusID,a.IndexValue1=d;for(var m in a.ProviderTypes)if(a.ProviderTypes[m].ProviderTypeID==i){j=a.ProviderTypes[m];break}for(var n in a.StateLicenseStatuses)if(a.StateLicenseStatuses[n].StateLicenseStatusID==k){l=a.StateLicenseStatuses[n];break}"addStateLicenseInformation"==a.visibilityControl?(h=$("#newStateLicenseDiv").find("form"),f="/Profile/IdentificationAndLicense/AddStateLicenseAsync?profileId="+profileId):a.visibilityControl==d+"_editStateLicenseInformation"&&(h=$("#stateLicenseEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateStateLicenseAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.stateLicense.ProviderType=j,c.stateLicense.StateLicenseStatus=l,c.stateLicense.IssueDate=ConvertDateFormat(c.stateLicense.IssueDate),c.stateLicense.ExpiryDate=ConvertDateFormat(c.stateLicense.ExpiryDate),c.stateLicense.CurrentIssueDate=ConvertDateFormat(c.stateLicense.CurrentIssueDate),"addStateLicenseInformation"==a.visibilityControl?(a.StateLicenses.push(c.stateLicense),b.operateCancelControl(""),g.callAlertMessage("addedStateLicense","State License Information Saved Successfully!!!!","success",!0)):(a.StateLicenses[d]=c.stateLicense,b.operateViewAndAddControl(d+"_viewStateLicenseInformation"),g.callAlertMessage("updatedStateLicense"+d,"State License Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.SLError=c.status.split(","),g.callAlertMessage("StateLicenseError","","danger",!0))},error:function(){a.SLError="Sorry for Inconvenience !!!! Please Try Again Later...",g.callAlertMessage("StateLicenseError","","danger",!0)}})},e.getMasterData("/Profile/MasterData/GetAllDEASchedules").then(function(b){a.Schedules=b}),a.FederalDEA=[],b.$on("FederalDEAInformations",function(b,c){a.FederalDEA=c;for(var d=0;d<a.FederalDEA.length;d++)a.FederalDEA[d].IssueDate=ConvertDateFormat(a.FederalDEA[d].IssueDate),a.FederalDEA[d].ExpiryDate=ConvertDateFormat(a.FederalDEA[d].ExpiryDate)}),a.IndexValue2="",a.saveFederalDEALicense=function(c,d){a.IndexValue2=d;var e,f,h;"addDEAInformation"==a.visibilityControl?(h=$("#newShowFederalDEALicenseDiv").find("form"),f="/Profile/IdentificationAndLicense/AddFederalDEALicenseAsync?profileId="+profileId):a.visibilityControl==d+"_editDEAInformation"&&(h=$("#FederalDEALicenseEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateFederalDEALicenseAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),a.DEAError="",e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.federalDea.IssueDate=ConvertDateFormat(c.federalDea.IssueDate),c.federalDea.ExpiryDate=ConvertDateFormat(c.federalDea.ExpiryDate),"addDEAInformation"==a.visibilityControl?(a.FederalDEA.push(c.federalDea),b.operateCancelControl(""),g.callAlertMessage("addedDEA","DEA information saved successfully. !!!!","success",!0)):(a.FederalDEA[d]=c.federalDea,b.operateViewAndAddControl(d+"_viewDEAInformation"),g.callAlertMessage("updatedDEA"+d,"DEA Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.DEAError=c.status.split(","),g.callAlertMessage("DEAError","","danger",!0))},error:function(){a.DEAError="Sorry for Inconvenience !!!! Please Try Again Later...",g.callAlertMessage("DEAError","","danger",!0)}})},a.CDSCInformations=[],b.$on("CDSCInformations",function(b,c){a.CDSCInformations=c;for(var d=0;d<a.CDSCInformations.length;d++)a.CDSCInformations[d].IssueDate=ConvertDateFormat(a.CDSCInformations[d].IssueDate),a.CDSCInformations[d].ExpiryDate=ConvertDateFormat(a.CDSCInformations[d].ExpiryDate)}),a.CDSCError="",a.IndexValue5="",a.saveCDSCInformation=function(c,d){a.IndexValue5=d;var e,f,h;"addCDSCInformation"==a.visibilityControl?(h=$("#newShowCDSCInformationDiv").find("form"),f="/Profile/IdentificationAndLicense/AddCDSCLicenseAsync?profileId="+profileId):a.visibilityControl==d+"_editCDSCInformation"&&(h=$("#cDSCInformationEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateCDSCLicenseAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.CDSCInformation.IssueDate=ConvertDateFormat(c.CDSCInformation.IssueDate),c.CDSCInformation.ExpiryDate=ConvertDateFormat(c.CDSCInformation.ExpiryDate),"addCDSCInformation"==a.visibilityControl?(a.CDSCInformations.push(c.CDSCInformation),b.operateCancelControl(""),g.callAlertMessage("addedCDS","CDS information saved successfully. !!!!","success",!0)):(a.CDSCInformations[d]=c.CDSCInformation,b.operateViewAndAddControl(d+"_viewCDSCInformation"),g.callAlertMessage("updatedCDS"+d,"CDS Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.CDSCError=c.status.split(","),g.callAlertMessage("CDSCError","","danger",!0))},error:function(){a.CDSCError="Sorry for Inconvenience !!!! Please Try Again Later...",g.callAlertMessage("CDSCError","","danger",!0)}})},a.MedicareInformations=[],b.$on("MedicareInformations",function(b,c){a.MedicareInformations=c;for(var d=0;d<a.MedicareInformations.length;d++)a.MedicareInformations[d].IssueDate=ConvertDateFormat(a.MedicareInformations[d].IssueDate)}),a.IndexValue3="",a.saveMedicareInformation=function(c,d){a.IndexValue3=d;var e,f,h;"addMedicareInformation"==a.visibilityControl?(h=$("#newShowMedicareInformationDiv").find("form"),f="/Profile/IdentificationAndLicense/AddMedicareInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMedicareInformation"&&(h=$("#MedicareInformationEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateMedicareInformationAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),a.MedicareError="",e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.MedicareInformation.IssueDate=ConvertDateFormat(c.MedicareInformation.IssueDate),"addMedicareInformation"==a.visibilityControl?(a.MedicareInformations.push(c.MedicareInformation),b.operateCancelControl(""),g.callAlertMessage("addedMedicare","Medicare information saved successfully. !!!!","success",!0)):(a.MedicareInformations[d]=c.MedicareInformation,b.operateViewAndAddControl(d+"_viewMedicareInformation"),g.callAlertMessage("updatedMedicare"+d,"Medicare Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.MedicareError=c.status.split(","),g.callAlertMessage("MedicareError","","danger",!0))},error:function(){a.MedicareError="Sorry for Inconvenience !!!! Please Try Again Later...",g.callAlertMessage("MedicareError","","danger",!0)}})},a.MedicaidInformations=[],b.$on("MedicaidInformations",function(b,c){a.MedicaidInformations=c;for(var d=0;d<a.MedicaidInformations.length;d++)a.MedicaidInformations[d].IssueDate=ConvertDateFormat(a.MedicaidInformations[d].IssueDate)}),a.IndexValue4="",a.saveMedicaidInformation=function(c,d){a.IndexValue4=d;var e,f,h;"addMedicaidInformation"==a.visibilityControl?(h=$("#newShowMedicaidInformationDiv").find("form"),f="/Profile/IdentificationAndLicense/AddMedicaidInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMedicaidInformation"&&(h=$("#MedicaidInformationEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateMedicaidInformationAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),a.MedicaidError="",e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.MedicaidInformation.IssueDate=ConvertDateFormat(c.MedicaidInformation.IssueDate),"addMedicaidInformation"==a.visibilityControl?(a.MedicaidInformations.push(c.MedicaidInformation),b.operateCancelControl(""),g.callAlertMessage("addedMedicaid","Medicaid information saved successfully. !!!!","success",!0)):(a.MedicaidInformations[d]=c.MedicaidInformation,b.operateViewAndAddControl(d+"_viewMedicaidInformation"),g.callAlertMessage("updatedMedicaid"+d,"Medicaid Information Updated Successfully. !!!!","success",!0)),FormReset(h),a.resetDates()):(a.MedicaidError=c.status.split(","),g.callAlertMessage("MedicaidError","","danger",!0))},error:function(){a.MedicaidError="Sorry for Inconvenience !!!! Please Try Again Later...",g.callAlertMessage("MedicaidError","","danger",!0)}})},a.OtherIdentificationNumbers={},b.$on("OtherIdentificationNumber",function(b,c){a.OtherIdentificationNumbers=c}),a.clearCAQHCredentials=function(b){""==b&&(a.tempObject.CAQHUserName="",a.tempObject.CAQHPassword="")},a.showOtherId=!1,a.OtherIdError="",a.saveOtherIdentificationNumber=function(c,d){a.typeOfSave=0!=d.OtherIdentificationNumberID?"Edit":"Add",$("#"+c).valid()&&$.ajax({url:"/Profile/IdentificationAndLicense/UpdateOtherIdentificationNumberAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"true"==e.status?(d.OtherIdentificationNumberID=e.OtherIdentificationNumber.OtherIdentificationNumberID,a.OtherIdentificationNumbers=angular.copy(d),FormReset($("#"+c)),a.ErrorId=!1,"Add"==a.typeOfSave?g.callAlertMessage("addedID","Other Identification information saved successfully. !!!!","success",!0):g.callAlertMessage("updatedID","Other Identification information updated successfully. !!!!","success",!0),b.visibilityControl=""):(a.OtherIdError=e.status.split(","),g.callAlertMessage("OtherIdError","","danger",!0))},error:function(){a.OtherIdError="Sorry for Inconvenience !!!! Please Try Again Later...",g.callAlertMessage("OtherIdError","","danger",!0)}})},a.resetDates=function(){try{a.tempObject.IssueDate=new Date,a.tempObject.ExpiryDate=new Date,a.tempObject.CurrentIssueDate=new Date}catch(b){}}}]),profileApp.controller("professionalAppCtrl",["$scope","$rootScope","$http","dynamicFormGenerateService","masterDataService","messageAlertEngine",function(a,b,c,d,e,f){a.ProfessionalAffiliations=[],a.resetDates=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date}catch(b){}},a.submitButtonText="Add",b.$on("ProfessionalAffiliationInfos",function(b,c){a.ProfessionalAffiliations=c;for(var d=0;d<a.ProfessionalAffiliations.length;d++)a.ProfessionalAffiliations[d].StartDate=ConvertDateFormat(a.ProfessionalAffiliations[d].StartDate),a.ProfessionalAffiliations[d].EndDate=ConvertDateFormat(a.ProfessionalAffiliations[d].EndDate)}),a.saveProfessionalAffiliation=function(c,d){var e,g,h;"addpa"==a.visibilityControl?(h=$("#newShowProfessionalAffiliationDiv").find("form"),g="/Profile/ProfessionalAffiliation/AddProfessionalAffiliation?profileId="+profileId):a.visibilityControl==d+"_editpa"&&(h=$("#professionalAffiliationEditDiv"+d).find("form"),g="/Profile/ProfessionalAffiliation/UpdateProfessionalAffiliation?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.professionalAffiliation.StartDate=ConvertDateFormat(c.professionalAffiliation.StartDate),c.professionalAffiliation.EndDate=ConvertDateFormat(c.professionalAffiliation.EndDate),a.visibilityControl!=d+"_editpa"?(a.ProfessionalAffiliations.push(c.professionalAffiliation),b.operateCancelControl(""),f.callAlertMessage("addedNewProfessionalAffiliation","Professional Affiliation saved successfully !!!!","success",!0)):(a.ProfessionalAffiliations[d]=c.professionalAffiliation,b.operateViewAndAddControl(d+"_viewpa"),f.callAlertMessage("updatedProfessionalAffiliation"+d,"Professional Affiliation updated successfully !!!!","success",!0)),a.IsProfessionalAffiliationHasError=!1,a.resetDates(),FormReset(h)):(f.callAlertMessage("errorProfessionalAffiliation"+d,"","danger",!0),a.errorProfessionalAffiliation=c.status.split(","))},error:function(){f.callAlertMessage("errorProfessionalAffiliation"+d,"","danger",!0),a.errorProfessionalAffiliation="Sorry for Inconvenience !!!! Please Try Again Later..."}})}}]),$(document).ready(function(){}),profileApp.controller("LiabilityCtrl",["$scope","$rootScope","$http","dynamicFormGenerateService","masterDataService","messageAlertEngine",function(a,b,c,d,e,f){a.ProfessionalLiabilityInfoes=[],a.submitButtonText="Add",a.getLocation=function(){a.Location=a.masterInsuranceCarriers.filter(function(b){return b.InsuranceCarrierID==a.tempObject.InsuranceCarrierID})[0]},a.getAddress=function(){a.LocationAddress=a.Location.InsuranceCarrierAddresses.filter(function(b){return b.InsuranceCarrierAddressID==a.tempObject.InsuranceCarrierAddressID})[0],a.tempObject.InsuranceCarrierAddress=a.LocationAddress},a.resetDates=function(){try{a.tempObject.OriginalEffectiveDate=new Date,a.tempObject.EffectiveDate=new Date,a.tempObject.ExpirationDate=new Date}catch(b){}},e.getMasterData("/Profile/MasterData/GetAllInsuranceCarriers").then(function(b){a.masterInsuranceCarriers=b}),b.$on("ProfessionalLiabilityInfoes",function(b,c){a.ProfessionalLiabilityInfoes=c,console.log("Aagaya Data"),console.log(c);for(var d=0;d<a.ProfessionalLiabilityInfoes.length;d++)a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate),a.ProfessionalLiabilityInfoes[d].EffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].EffectiveDate),a.ProfessionalLiabilityInfoes[d].ExpirationDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].ExpirationDate)}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.cancelProfessionalLiabilty=function(){setProfessionalLiabiltyCancelParameters()},a.saveProfessionalLiabilty=function(c,d){var e,g,h;"addLi"==a.visibilityControl?(h=$("#newShowProfessionalLiabiltyDiv").find("form"),g="/Profile/ProfessionalLiability/AddProfessionalLiabilityAsync?profileId="+profileId):a.visibilityControl==d+"_editLi"&&(h=$("#professionalLiabiltyEditDiv"+d).find("form"),g="/Profile/ProfessionalLiability/UpdateProfessionalLiabilityAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalLiability.OriginalEffectiveDate=ConvertDateFormat(c.professionalLiability.OriginalEffectiveDate),c.professionalLiability.EffectiveDate=ConvertDateFormat(c.professionalLiability.EffectiveDate),c.professionalLiability.ExpirationDate=ConvertDateFormat(c.professionalLiability.ExpirationDate),c.professionalLiability.InsuranceCarrierAddress=a.Location.InsuranceCarrierAddresses.filter(function(a){return a.InsuranceCarrierAddressID==c.professionalLiability.InsuranceCarrierAddressID})[0];for(var e=0;e<a.masterInsuranceCarriers.length;e++)if(a.masterInsuranceCarriers[e].InsuranceCarrierID==c.professionalLiability.InsuranceCarrierID){c.professionalLiability.InsuranceCarrier=a.masterInsuranceCarriers[e];break}a.visibilityControl!=d+"_editLi"?(a.ProfessionalLiabilityInfoes.push(c.professionalLiability),b.operateCancelControl(""),f.callAlertMessage("addedNewProfessionalLiability","Professional Liability saved successfully !!!!","success",!0)):(a.ProfessionalLiabilityInfoes[d]=c.professionalLiability,b.operateViewAndAddControl(d+"_viewLi"),f.callAlertMessage("updatedProfessionalLiability"+d,"Professional Liability updated successfully !!!!","success",!0)),a.IsProfLiabilityHasError=!1,b.tempObject={},a.resetDates(),FormReset(h)}else f.callAlertMessage("errorProfessionalLiability"+d,"","danger",!0),a.errorProfessionalLiability=c.status.split(",")},error:function(){f.callAlertMessage("errorProfessionalLiability"+d,"","danger",!0),a.errorProfessionalLiability="Sorry for Inconvenience !!!! Please Try Again Later..."}})}}]),$(document).ready(function(){}),profileApp.controller("ProfessionalReference",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){a.ProfessionalReferences=[],b.$on("ProfessionalReferenceInfos",function(b,c){a.ProfessionalReferences=c}),a.addressAutocomplete=function(b){a.resetAddressModels(),a.tempObject.City=b,b.length<3&&!angular.isObject(b)&&(a.Locations=[]),b.length>2&&!angular.isObject(b)?a.Locations=e.getLocations(b):angular.isObject(b)&&(a.tempObject||(a.tempObject={}),a.setAddressModels(b))},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.CountryDialCodes=countryDailCodes;var g;a.SelectProviderTitle=function(b){a.tempObject.ProviderTypeID=b.ProviderTypeID},a.shoLanguageList=function(a){$("#"+a).show()},a.submitButtonText="Add",a.changeButtonText=function(){a.submitButtonText="Update"==a.submitButtonText?"Add":"Update"},a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.masterSpecialties=[],a.masterDegrees=[],a.masterProviderTypes=[],d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.masterProviderTypes=b}),d.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.saveProfessionalReference=function(c,d){var e,h,i,j,k,l;k=c.SpecialtyID;for(var m in a.masterSpecialties)if(a.masterSpecialties[m].SpecialtyID==k){l=a.masterSpecialties[m];break}j=c.ProviderTypeID;for(var n in a.masterProviderTypes)if(a.masterProviderTypes[n].ProviderTypeID==j){g=a.masterProviderTypes[n];break}"addpr"==a.visibilityControl?(i=$("#newProfessionalReferenceFormDiv").find("form"),h="/Profile/ProfessionalReference/AddProfessionalReference?profileId="+profileId):a.visibilityControl==d+"_editpr"&&(i=$("#professionalReferenceEditDiv"+d).find("form"),console.log(i),h="/Profile/ProfessionalReference/UpdateProfessionalReference?profileId="+profileId),ResetFormForValidation(i),e=i.valid(),e&&$.ajax({url:h,type:"POST",data:new FormData(i[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.professionalReference.Specialty=l,c.professionalReference.ProviderType=g,a.visibilityControl!=d+"_editpr"?(a.ProfessionalReferences.push(c.professionalReference),b.operateCancelControl(""),f.callAlertMessage("addedNewProfessionalReference","Professional Reference saved successfully !!!!","success",!0)):(a.ProfessionalReferences[d]=c.professionalReference,b.operateViewAndAddControl(d+"_viewpr"),f.callAlertMessage("updatedProfessionalReference"+d,"Professional Reference updated successfully !!!!","success",!0)),a.IsProfessionalReferenceHasError=!1,FormReset(i)):(f.callAlertMessage("errorProfessionalReference"+d,"","danger",!0),a.errorProfessionalReference=c.status.split(","))},error:function(){f.callAlertMessage("errorProfessionalReference"+d,"","danger",!0),a.errorProfessionalReference="Sorry for Inconvenience !!!! Please Try Again Later..."}})}}]),profileApp.controller("SpecialtyController",["$scope","$rootScope","$http","masterDataService","messageAlertEngine",function(a,b,c,d,e){a.Specialties=[],a.practiceInterest={},a.masterSpecialties=[],a.masterSpecialtyBoards=[],b.$on("SpecialtyDetails",function(b,c){a.Specialties=c;for(var d=0;d<a.Specialties.length;d++)null!=a.Specialties[d].SpecialtyBoardCertifiedDetail&&(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=a.Specialties[d].SpecialtyBoardNotCertifiedDetail&&(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate))}),b.$on("PracticeInterest",function(b,c){a.practiceInterest=c}),d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/getAllspecialtyBoards").then(function(b){a.masterSpecialtyBoards=b}),a.submitButtonText="Add",a.IndexValue=0,a.saveSpecialty=function(){var c,d,f;f=$("#newShowSpecialtyDiv").find("form"),d="/Profile/BoardSpecialty/AddSpecialityDetailAsync?profileId="+profileId,ResetFormForValidation(f),c=f.valid();var g=$(f[0]).find($("[name='SpecialtyID'] option:selected")).text(),h=$(f[0]).find($("[name='SpecialtyBoardID'] option:selected")).text();c&&$.ajax({url:d,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var d=0;d<a.Specialties.length;d++)"Primary"==a.Specialties[d].SpecialtyPreference&&(a.Specialties[d].SpecialtyPreference="Secondary",a.Specialties[d].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:g},c.specialty.SpecialtyBoard={ID:c.specialty.SpecialtyBoardID,Name:h},null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties.push(c.specialty),a.ErrorInSpecialtyDetails=!1,b.operateCancelControl(""),e.callAlertMessage("addedNewBoardSpecialty","Specialty Details saved successfully !!!!","success",!0)}else e.callAlertMessage("errorSpecialty"+index,"","danger",!0),a.errorSpecialty=c.status.split(",")},error:function(){e.callAlertMessage("errorSpecialty"+index,"","danger",!0),a.errorSpecialty="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.updateSpecialty=function(c,d){var f,g,h;h=$("#specialtyEditDiv"+d).find("form"),g="/Profile/BoardSpecialty/UpdateSpecialityDetailAsync?profileId="+profileId,ResetFormForValidation(h),f=h.valid();var i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),j=$(h[0]).find($("[name='SpecialtyBoardID'] option:selected")).text();f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var f=0;f<a.Specialties.length;f++)"Primary"==a.Specialties[f].SpecialtyPreference&&f!=d&&(a.Specialties[f].SpecialtyPreference="Secondary",a.Specialties[f].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:i},c.specialty.SpecialtyBoard={ID:c.specialty.SpecialtyBoardID,Name:j},null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties[d]=c.specialty,a.ErrorInSpecialtyDetails=!1,b.operateViewAndAddControl(d+"_viewboardSpecialty"),e.callAlertMessage("updatedBoardSpecialty"+d,"Specialty Details Updated Successfully !!!!","success",!0)}else e.callAlertMessage("errorSpecialty"+index,"","danger",!0),a.errorSpecialty=c.status.split(",")},error:function(){e.callAlertMessage("errorSpecialty"+index,"","danger",!0),a.errorSpecialty="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.setPrimary=function(){try{for(var b=0;b<a.Specialties.length;b++)a.Specialties[b].PreferenceType="2"
}catch(c){}},a.savePracticeInterest=function(c){var d,f,g;a.typeOfSaveForPracticeInterest=0!=c.PracticeInterestID?"Edit":"Add","editpracticeInterest"==a.visibilityControl&&(g=$("#editShowPracticeInterest").find("form"),f="/Profile/BoardSpecialty/UpdatePracticeInterestAsync?profileId="+profileId),ResetFormForValidation(g),d=g.valid(),d&&($.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.practiceInterest=c.practiceInterest,b.visibilityControl="",a.ErrorInPracticeInterest=!1,"Add"==a.typeOfSaveForPracticeInterest?(b.visibilityControl="addedNewPracticeInterest",e.callAlertMessage("addedNewPracticeInterest","Practice Interest saved successfully !!!!","success",!0)):(b.visibilityControl="updatedPracticeInterest",e.callAlertMessage("updatedPracticeInterest","Practice Interest updated successfully !!!!","success",!0))):(e.callAlertMessage("errorPracticeInterest"+index,"","danger",!0),a.errorPracticeInterest=c.status.split(","))},error:function(){e.callAlertMessage("errorPracticeInterest"+index,"","danger",!0),a.errorPracticeInterest="Sorry for Inconvenience !!!! Please Try Again Later..."}}),a.changePartial=!1)},b.getSpecilityForThisUser=function(){return a.Specialties},a.fillPercentageOfTime=function(b){a.tempObject.PercentageOfTime="1"==b?100:50},a.fillPreferenceType=function(b){a.tempObject.PreferenceType=100==b?1:100>b&&b>=0?2:""},a.clearOtherModel=function(c){"addboardSpecialty"==b.visibilityControl&&(1==c?a.tempObject.SpecialtyBoardNotCertifiedDetail=null:a.tempObject.SpecialtyBoardCertifiedDetail=null)},a.clearOtherOptions=function(c){"addboardSpecialty"==b.visibilityControl&&(1==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):2==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):3==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null))}}]),profileApp.controller("WorkHistoryController",["$scope","$rootScope","$http","$filter","countryDropDownService","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g,h){a.resetDates=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date,a.tempObject.DischargeDate=new Date}catch(b){}},a.addressAutocomplete=function(b){a.resetAddressModels(),a.tempObject.City=b,b.length>2&&!angular.isObject(b)?a.Locations=g.getLocations(b):angular.isObject(b)&&(a.tempObject||(a.tempObject={}),a.setAddressModels(b))},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.currentlyWorkingChange=function(a){1==a&&(b.tempObject.EndDate=null,b.tempObject.DepartureReason=null)},a.militaryDischargeChange=function(a){"Other than honourable"!=a&&(b.tempObject.HonorableExplanation=null)},f.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryBranches").then(function(b){a.militaryBranches=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryRanks").then(function(b){a.militaryRanks=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryPresentDuties").then(function(b){a.militaryPresentDuties=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryDischarges").then(function(b){a.militaryDischarges=b}),a.IndexValue=0,a.professionalWorkExperiences=[],b.$on("ProfessionalWorkExperiences",function(b,c){console.log(c),a.professionalWorkExperiences=c;for(var d=0;d<a.professionalWorkExperiences.length;d++)a.professionalWorkExperiences[d].StartDate=ConvertDateFormat(a.professionalWorkExperiences[d].StartDate),a.professionalWorkExperiences[d].EndDate=ConvertDateFormat(a.professionalWorkExperiences[d].EndDate)}),a.saveProfessionalWorkExperience=function(c,d){var e,f;"addProfessionalWorkExperience"==a.visibilityControl?(f=$("#newProfessionalWorkExperienceFormDiv").find("form"),e="/Profile/WorkHistory/AddProfessionalWorkExperienceAsync?profileId="+profileId):a.visibilityControl==d+"_editProfessionalWorkExperience"&&(f=$("#professionalWorkExperienceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateProfessionalWorkExperienceAsync?profileId="+profileId,ResetFormForValidation(f)),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalWorkExperience.StartDate=ConvertDateFormat(c.professionalWorkExperience.StartDate),c.professionalWorkExperience.EndDate=ConvertDateFormat(c.professionalWorkExperience.EndDate);var e=$(f[0]).find($("[name='ProviderTypeID'] option:selected")).text();c.professionalWorkExperience.ProviderType={ProviderTypeID:c.professionalWorkExperience.ProviderTypeID,Title:e},a.visibilityControl!=d+"_editProfessionalWorkExperience"?(a.professionalWorkExperiences.push(c.professionalWorkExperience),b.visibilityControl="addedNewProfessionalWorkExperience",h.callAlertMessage("addedNewProfessionalWorkExperience","Professional Work experience Information saved successfully !!!!","success",!0)):(a.professionalWorkExperiences[d]=c.professionalWorkExperience,b.visibilityControl="updatedProfessionalWorkExperience",h.callAlertMessage("addedNewProfessionalWorkExperience","Professional Work experience Information updated successfully !!!!","success",!0)),a.IsProfessionalWorkExperienceHasError=!1,FormReset(f),a.resetDates()}else a.IsProfessionalWorkExperienceHasError=!0,a.ProfessionalWorkExperienceErrorList=c.status.split(","),h.callAlertMessage("alertHospitalPrivilegeInformation",c.status,"danger",!0)}})},a.publicHealthServices=[],b.$on("PublicHealthServices",function(b,c){a.publicHealthServices=c;for(var d=0;d<a.publicHealthServices.length;d++)a.publicHealthServices[d].StartDate=ConvertDateFormat(a.publicHealthServices[d].StartDate),a.publicHealthServices[d].EndDate=ConvertDateFormat(a.publicHealthServices[d].EndDate)}),a.savePublicHealthService=function(c,d){var e,f;"addPublicHealthService"==a.visibilityControl?(f=$("#newPublicHealthServiceFormDiv").find("form"),e="/Profile/WorkHistory/AddPublicHealthServiceAsync?profileId="+profileId):a.visibilityControl==d+"_editPublicHealthService"&&(f=$("#publicHealthServiceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdatePublicHealthServiceAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.publicHealthService.StartDate=ConvertDateFormat(c.publicHealthService.StartDate),c.publicHealthService.EndDate=ConvertDateFormat(c.publicHealthService.EndDate),a.visibilityControl!=d+"_editPublicHealthService"?(a.publicHealthServices.push(c.publicHealthService),b.visibilityControl="addedNewPublicHealthService",h.callAlertMessage("addedNewPublicHealthService","Public Health Service Information saved successfully !!!!","success",!0)):(a.publicHealthServices[d]=c.publicHealthService,b.visibilityControl="updatedPublicHealthService",h.callAlertMessage("addedNewPublicHealthService","Public Health Service Information updated successfully !!!!","success",!0)),a.IsPublicHealthServiceHasError=!1,FormReset(f),a.resetDates()):(a.IsPublicHealthServiceHasError=!0,a.PublicHealthServiceErrorList=c.status.split(","))}}),a.resetDates())},a.workGaps=[],b.$on("WorkGaps",function(b,c){a.workGaps=c;for(var d=0;d<a.workGaps.length;d++)a.workGaps[d].StartDate=ConvertDateFormat(a.workGaps[d].StartDate),a.workGaps[d].EndDate=ConvertDateFormat(a.workGaps[d].EndDate)}),a.saveWorkGap=function(c,d){var e,f;"addWorkGap"==a.visibilityControl?(f=$("#newWorkGapFormDiv").find("form"),e="/Profile/WorkHistory/AddWorkGapAsync?profileId="+profileId):a.visibilityControl==d+"_editWorkGap"&&(f=$("#workGapEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateWorkGapAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.workGap.StartDate=ConvertDateFormat(c.workGap.StartDate),c.workGap.EndDate=ConvertDateFormat(c.workGap.EndDate),a.visibilityControl!=d+"_editWorkGap"?(a.workGaps.push(c.workGap),b.visibilityControl="addedNewWorkGap",h.callAlertMessage("addedNewWorkGap","Work Gap Information saved successfully !!!!","success",!0)):(a.workGaps[d]=c.workGap,b.visibilityControl="updatedWorkGap",h.callAlertMessage("addedNewWorkGap","Work Gap Information updated successfully !!!!","success",!0)),a.IsWorkGapHasError=!1,FormReset(f),a.resetDates()):(a.IsWorkGapHasError=!0,a.WorkGapErrorList=c.status.split(","))}})},a.militaryServiceInformations=[],b.$on("MilitaryServiceInformations",function(b,c){a.militaryServiceInformations=c;for(var d=0;d<a.militaryServiceInformations.length;d++)a.militaryServiceInformations[d].StartDate=ConvertDateFormat(a.militaryServiceInformations[d].StartDate),a.militaryServiceInformations[d].DischargeDate=ConvertDateFormat(a.militaryServiceInformations[d].DischargeDate)}),a.saveMilitaryServiceInformation=function(c,d){var e,f;"addMilitaryServiceInformation"==a.visibilityControl?(f=$("#newMilitaryServiceInformationFormDiv").find("form"),e="/Profile/WorkHistory/AddMilitaryServiceInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMilitaryServiceInformation"&&(f=$("#militaryServiceInformationEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateMilitaryServiceInformationAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.militaryServiceInformation.StartDate=ConvertDateFormat(c.militaryServiceInformation.StartDate),c.militaryServiceInformation.DischargeDate=ConvertDateFormat(c.militaryServiceInformation.DischargeDate),a.visibilityControl!=d+"_editMilitaryServiceInformation"?(a.militaryServiceInformations.push(c.militaryServiceInformation),b.visibilityControl="addedNewMilitaryServiceInformation",h.callAlertMessage("addedNewMilitaryServiceInformation","Military Service Information saved successfully !!!!","success",!0)):(a.militaryServiceInformations[d]=c.militaryServiceInformation,b.visibilityControl="updatedMilitaryServiceInformation",h.callAlertMessage("addedNewMilitaryServiceInformation","Military Service Information updated successfully !!!!","success",!0)),a.IsMilitaryServiceInfoHasError=!1,FormReset(f),a.resetDates()):(a.IsMilitaryServiceInfoHasError=!0,a.MilitaryServiceInfoErrorList=c.status.split(","))}}),a.resetDates())}}]),profileApp.controller("hospitalcltr",["$scope","$rootScope","$http","messageAlertEngine",function(a,b,c,d){$(document).ready(function(){c.get("/Profile/MasterData/GetAllHospitals").then(function(b){a.hospitals=b.data}),c.get("/Profile/MasterData/GetAllStaffCategories").then(function(b){a.staffCategories=b.data}),c.get("/Profile/MasterData/GetAllAdmittingPrivileges").then(function(b){a.admittingPrivileges=b.data}),c.get("/Profile/MasterData/GetAllHospitalContactPersons").then(function(b){a.ContactPersons=b.data})}),a.HaveHospitalPrivilege="True",a.HospitalPrivilegeInformations=[],b.$on("HospitalPrivilegeInformation",function(c,d){try{if(a.HospitalPrivilegeInformations=d,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length>0)for(var e=0;e<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;e++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate),a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate)}catch(f){}}),a.locations="",a.filterData=function(b){try{a.locations=a.hospitals.filter(function(a){return a.HospitalID==b})[0].HospitalContactInfoes}catch(c){}},a.getAddress=function(b){try{a.LocationAddress=a.locations.filter(function(a){return a.HospitalContactInfoID==b})[0],a.tempObject.HospitalContactInfo=a.LocationAddress,a.contactPersons=a.LocationAddress.HospitalContactPersons}catch(c){}},a.getContactPersonDetail=function(b){try{a.contactPersonDetail=a.contactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0],a.tempObject.HospitalContactPerson=a.contactPersonDetail}catch(c){}},a.specialties=b.getSpecilityForThisUser(),a.getSpecialityForProvider=function(a){try{return b.getSpecilityForThisUser().filter(function(b){return b.Specialty.SpecialtyID==a})[0]}catch(c){}},a.getHospitalNameForProvider=function(b){try{return a.hospitals.filter(function(a){return a.HospitalID==b})[0]}catch(c){}},a.getStaffCategoryForProvider=function(b){try{return a.staffCategories.filter(function(a){return a.StaffCategoryID==b})[0]}catch(c){}},a.getHospitalLocationForProvider=function(b,c){try{return a.locations=a.hospitals.filter(function(a){return a.HospitalID==b})[0].HospitalContactInfoes,a.locations.filter(function(a){return a.HospitalContactInfoID==c})[0]}catch(d){}},a.getContactPersonForProvider=function(b){try{return a.ContactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0]}catch(c){}},a.getAdmittingPrivilageStatusForProvider=function(b){try{return a.admittingPrivileges.filter(function(a){return a.AdmittingPrivilegeID==b})[0]}catch(c){}},a.setPrimary=function(){try{for(var b=0;b<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;b++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[b].PreferenceType="2"}catch(c){}},a.indexVal="",a.visibilityControl="",a.tempObject={},a.operateViewAndAddControl=function(c){b.closeAlertMessage(),a.tempObject={},a.buttonLabel="Add",a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(d){}},a.operateEditControl=function(c,d){b.closeAlertMessage(),a.tempObject={},a.tempObject.selectedEduLocation={},a.buttonLabel="Update",a.tempObject=angular.copy(d),a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(e){}},a.operateCancelControl=function(){b.closeAlertMessage(),a.tempObject={},$(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid"),$(".input-validation-error").removeClass("input-validation-error").addClass("valid"),a.visibilityControl=""},a.message={desc:"",status:""},a.saveHopitalPrivilegeInformation=function(b){loadingOn(),a.message.desc="";var c,e;if($formDataHospitalPrivilege=$("#hospitalPrivilegeInfoForm"),c=$("#hospitalPrivilegeInfoForm").valid(),e="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeInfoAsync?profileId="+profileId,c){if("1"==b.HospitalPrivilegeYesNoOption)b.OtherAdmittingArrangements="",$($formDataHospitalPrivilege[0]).find($("[name='OtherAdmittingArrangements']")).val("");else try{a.HospitalPrivilegeInformations.HospitalPrivilegeDetails=[]}catch(f){}$.ajax({url:e,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(b){if("true"==b.status){try{a.HospitalPrivilegeInformations,a.HospitalPrivilegeInformations=angular.copy(b.hospitalPrivilegeInformation)}catch(c){}a.operateCancelControl(""),d.callAlertMessage("alertHospitalPrivilegeInformation","Hospital Privilege Information Saved Successfully!!!!","success",!0),a.resetDates()}else d.callAlertMessage("alertHospitalPrivilegeInformation",b.status,"danger",!0)},error:function(){d.callAlertMessage("alertHospitalPrivilegeInformation","Sorry for Inconvenience !!!! Please Try Again Later...","danger",!0)}})}loadingOff()},a.saveHospitalPrivilegeDetail=function(b,c){a.HospitalPrivilegeError="",a.indexVal=c;var e,f;"addhospitalPrivilegeInformation"==a.visibilityControl?(e=$("#newShowHosPrvDiv").find("form").valid(),$formDataHospitalPrivilege=$("#newShowHosPrvDiv").find("form"),f="/Profile/HospitalPrivilege/AddHospitalPrivilegeAsync?profileId="+profileId):(e=$("#hospitalPrivilegeInformationEditDiv"+c).find("form").valid(),$formDataHospitalPrivilege=$("#hospitalPrivilegeInformationEditDiv"+c).find("form"),f="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeAsync?profileId="+profileId),e&&$.ajax({url:f,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"1"==b.PreferenceType&&a.setPrimary(),"true"==e.status?("addhospitalPrivilegeInformation"==a.visibilityControl?(b.HospitalPrivilegeDetailID=e.id,b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.push(b),a.operateCancelControl(""),d.callAlertMessage("addedNewHospitalPrivilege","New Hospital Privilege Added Successfully !!!!","success",!0),a.tempObject={},a.tempObject={}):(b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[c]=b,a.operateViewAndAddControl(c+"_viewhospitalPrivilegeInformation"),d.callAlertMessage("updateHospitalPrivilege"+c,"Data Updated Successfully !!!!","success",!0)),a.resetDates()):(d.callAlertMessage("HospitalPrivilegeError","","danger",!0),a.HospitalPrivilegeError=e.status.split(","))},error:function(){d.callAlertMessage("HospitalPrivilegeError","","danger",!0),a.HospitalPrivilegeError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.resetDates=function(){try{a.tempObject.AffilicationStartDate=new Date,a.tempObject.AffiliationEndDate=new Date}catch(b){}}}]);