@model AHC.CD.WebUI.MVC.Areas.Profile.Models.Demographic.ContactDetailViewModel

<form id="DemographicsContactDetailsForm">
    <span ng-if="TempContactDetailsForEdit.ContactDetailID">
        @Html.HiddenFor(model => model.ContactDetailID, new { ng_value = "TempContactDetailsForEdit.ContactDetailID" })
    </span>

    <div class="col-lg-12 zero-padding-left-right-div">
        <div class="form-group col-md-4" ng-model="search1.PhoneTypeEnum" ng-init="search1.PhoneTypeEnum=1">
            <label for="MobileNo" class="control-label small">Home Phone *</label>
            <a ng-click="AddPhones(TempContactDetailsForEdit.PhoneDetails,1)" class="label label-primary pull-right pointer" data-toggle="tooltip" data-placement="top" title="Add"><i class="fa fa-plus-circle"></i> Add</a>
            <div ng-repeat="thp in TempContactDetailsForEdit.PhoneDetails | filter:search1 track by $index" class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="showContryCodeDiv('HomePhoneCountryCode'+$index)"> {{thp.CountryCode}} <span class="caret"></span></button>
                </div>
                <div class="countryDailCodeContainer popover fade bottom in" role="tooltip" id="HomePhoneCountryCode{{$index}}">
                    <div class="arrow"></div>
                    <h3 class="popover-title">Select Country Dial Code</h3>
                    <div class="popover-content">
                        <select name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thp)}}].CountryCode" ng-model="thp.CountryCode" id="ContactContryCode">
                            <option ng-repeat="code in CountryDialCodes" value="{{code.dial_code}}" ng-selected="code.dial_code == thp.CountryCode">{{code.name}}({{code.dial_code}})</option>
                        </select>
                    </div>
                </div>
                <input type="text" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thp)}}].Number" ng-model="thp.Number" class="form-control" placeholder="phone number">

                <span ng-if="thp.PhoneDetailID">
                    <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thp)}}].PhoneDetailID" value="{{thp.PhoneDetailID}}" />
                </span>
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thp)}}].PhoneTypeEnum" value="{{thp.PhoneTypeEnum}}" />
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thp)}}].PreferenceType" value="{{thp.PreferenceType}}" />
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thp)}}].StatusType" value="{{thp.StatusType}}" />

                <span class="input-group-addon">
                    <a class="text-primary pointer" ng-click="ContactDetailsPhoneConditionFunction(thp, TempContactDetailsForEdit.PhoneDetails, 1)">
                        <i ng-if="thp.PreferenceType==1" class="fa fa-arrow-up text-success" data-toggle="tooltip" data-placement="top" title="This is Primary"></i>
                        <i ng-if="thp.PreferenceType == 2" class="fa fa-arrow-down text-warning" data-toggle="tooltip" data-placement="top" title="This is Secondary"></i>
                    </a>
                    <a ng-if="thp.StatusType==1 && thp.PhoneDetailID && TempContactDetailsForEdit.PhoneDetails.length > 1 && thp.PreferenceType != 1" ng-click="showConfirmation(TempContactDetailsForEdit.PhoneDetails, TempContactDetailsForEdit.PhoneDetails.indexOf(thp), 'phone')" data-toggle="tooltip" data-placement="top" title="Remove" class="text-danger pointer">
                        <i class="fa fa-hand-o-up"></i>
                    </a>
                    <a ng-if="thp.StatusType==1 && !thp.PhoneDetailID && TempContactDetailsForEdit.PhoneDetails.length > 1 && thp.PreferenceType != 1" ng-click="RemoveContactDetails(TempContactDetailsForEdit.PhoneDetails.indexOf(thp),TempContactDetailsForEdit.PhoneDetails)" class="text-danger pointer" data-toggle="tooltip" data-placement="top" title="Remove"><i class="fa fa-minus-circle"></i></a>
                </span>
            </div>
        </div>
        <div class="form-group col-md-4" ng-model="search2.PhoneTypeEnum" ng-init="search2.PhoneTypeEnum=2">
            <label for="MobileNo" class="control-label small">Home Fax *</label>
            <a ng-click="AddPhones(TempContactDetailsForEdit.PhoneDetails, 2)" class="label label-primary pull-right pointer" data-toggle="tooltip" data-placement="top" title="Add"><i class="fa fa-plus-circle"></i> Add</a>
            <div ng-repeat="thf in TempContactDetailsForEdit.PhoneDetails | filter:search2 track by $index" class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="showContryCodeDiv('HomeFaxCountryCode'+$index)"> {{thf.CountryCode}} <span class="caret"></span></button>
                </div>
                <div class="countryDailCodeContainer popover fade bottom in" role="tooltip" id="HomeFaxCountryCode{{$index}}">
                    <div class="arrow"></div>
                    <h3 class="popover-title">Select Country Dial Code</h3>
                    <div class="popover-content">
                        <select name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thf)}}].CountryCode" ng-model="thf.CountryCode" id="ContactContryCode">
                            <option ng-repeat="code in CountryDialCodes" value="{{code.dial_code}}" ng-selected="code.dial_code == thf.CountryCode">{{code.name}}({{code.dial_code}})</option>
                        </select>
                    </div>
                </div>
                <input type="text" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thf)}}].Number" ng-model="thf.Number" class="form-control" placeholder="fax number">

                <span ng-if="thf.PhoneDetailID">
                    <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thf)}}].PhoneDetailID" value="{{thf.PhoneDetailID}}" />
                </span>
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thf)}}].PhoneTypeEnum" value="{{thf.PhoneTypeEnum}}" />
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thf)}}].PreferenceType" value="{{thf.PreferenceType}}" />
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(thf)}}].StatusType" value="{{thf.StatusType}}" />

                <span class="input-group-addon">
                    <a class="text-primary pointer" ng-click="ContactDetailsPhoneConditionFunction(thf, TempContactDetailsForEdit.PhoneDetails, 2)">
                        <i ng-if="thf.PreferenceType==1" class="fa fa-arrow-up text-success" data-toggle="tooltip" data-placement="top" title="This is Primary"></i>
                        <i ng-if="thf.PreferenceType==2" class="fa fa-arrow-down text-warning" data-toggle="tooltip" data-placement="top" title="This is Secondary"></i>
                    </a>
                    <a ng-if="thf.StatusType==1 && thf.PhoneDetailID && TempContactDetailsForEdit.PhoneDetails.length > 1 && thf.PreferenceType != 1" ng-click="showConfirmation(TempContactDetailsForEdit.PhoneDetails, TempContactDetailsForEdit.PhoneDetails.indexOf(thf), 'phone')" data-toggle="tooltip" data-placement="top" title="Remove" class="text-danger pointer">
                        <i class="fa fa-hand-o-up"></i>
                    </a>
                    <a ng-if="thf.StatusType==1 && !thf.PhoneDetailID && TempContactDetailsForEdit.PhoneDetails.length > 1 && thf.PreferenceType != 1" ng-click="RemoveContactDetails(TempContactDetailsForEdit.PhoneDetails.indexOf(thf),TempContactDetailsForEdit.PhoneDetails)" class="text-danger pointer" data-toggle="tooltip" data-placement="top" title="Remove"><i class="fa fa-minus-circle"></i></a>
                </span>
            </div>
        </div>
        <div class="form-group col-md-4" ng-model="search3.PhoneTypeEnum" ng-init="search3.PhoneTypeEnum=3">
            <label for="MobileNo" class="control-label small">Mobile Number *</label>
            <a ng-click="AddPhones(TempContactDetailsForEdit.PhoneDetails,3)" class="label label-primary pull-right pointer" data-toggle="tooltip" data-placement="top" title="Add"><i class="fa fa-plus-circle"></i> Add</a>
            <div ng-repeat="hm in TempContactDetailsForEdit.PhoneDetails | filter:search3 track by $index" class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="showContryCodeDiv('MobileNumberCountryCode'+$index)"> {{hm.CountryCode}} <span class="caret"></span></button>
                </div>
                <div class="countryDailCodeContainer popover fade bottom in" role="tooltip" id="MobileNumberCountryCode{{$index}}">
                    <div class="arrow"></div>
                    <h3 class="popover-title">Select Country Dial Code</h3>
                    <div class="popover-content">
                        <select name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(hm)}}].CountryCode" ng-model="hm.CountryCode" id="ContactContryCode">
                            <option ng-repeat="code in CountryDialCodes" value="{{code.dial_code}}" ng-selected="code.dial_code == hm.CountryCode">{{code.name}}({{code.dial_code}})</option>
                        </select>
                    </div>
                </div>
                <input type="text" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(hm)}}].Number" ng-model="hm.Number" class="form-control" placeholder="mobile number">

                <span ng-if="hm.PhoneDetailID">
                    <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(hm)}}].PhoneDetailID" value="{{hm.PhoneDetailID}}" />
                </span>
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(hm)}}].PhoneTypeEnum" value="{{hm.PhoneTypeEnum}}" />
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(hm)}}].PreferenceType" value="{{hm.PreferenceType}}" />
                <input type="hidden" name="PhoneDetails[{{TempContactDetailsForEdit.PhoneDetails.indexOf(hm)}}].StatusType" value="{{hm.StatusType}}" />

                <span class="input-group-addon">
                    <a class="text-primary pointer" ng-click="ContactDetailsPhoneConditionFunction(hm, TempContactDetailsForEdit.PhoneDetails, 3)">
                        <i ng-if="hm.PreferenceType==1" class="fa fa-arrow-up text-success" data-toggle="tooltip" data-placement="top" title="This is Primary"></i>
                        <i ng-if="hm.PreferenceType == 2" class="fa fa-arrow-down text-warning" data-toggle="tooltip" data-placement="top" title="This is Secondary"></i>
                    </a>
                    <a ng-if="hm.StatusType==1 && hm.PhoneDetailID && TempContactDetailsForEdit.PhoneDetails.length > 1 && hm.PreferenceType != 1" ng-click="showConfirmation(TempContactDetailsForEdit.PhoneDetails, TempContactDetailsForEdit.PhoneDetails.indexOf(hm), 'phone')" data-toggle="tooltip" data-placement="top" title="Remove" class="text-danger pointer">
                        <i class="fa fa-hand-o-up"></i>
                    </a>
                    <a ng-if="hm.StatusType==1 && !hm.PhoneDetailID && TempContactDetailsForEdit.PhoneDetails.length > 1 && hm.PreferenceType != 1" ng-click="RemoveContactDetails(TempContactDetailsForEdit.PhoneDetails.indexOf(hm),TempContactDetailsForEdit.PhoneDetails)" class="text-danger pointer" data-toggle="tooltip" data-placement="top" title="Remove"><i class="fa fa-minus-circle"></i></a>
                </span>
            </div>
        </div>
    </div>
    <div class="col-lg-12 zero-padding-left-right-div">
        <div class="col-lg-6 zero-padding-left-right-div">
            <div class="col-lg-12 form-group">
                @Html.LabelFor(model => model.PreferredWrittenContacts, new { @class = "control-label small" })
                <div ng-init="temp1=[]">
                    <label class="checkbox-inline" ng-repeat="pwc in TempContactDetailsForEdit.PreferredWrittenContacts">
                        <input type="checkbox" ng-model="temp1[$index]" ng-checked="pwc.StatusType==1" ng-change="PreferredContactChange(pwc,temp1[$index])"> {{pwc.ContactType}}

                        <span ng-if="pwc.PreferredWrittenContactID">
                            <input type="hidden" name="PreferredWrittenContacts[{{$index}}].PreferredWrittenContactID" ng-value="pwc.PreferredWrittenContactID" />
                        </span>
                        <input type="hidden" name="PreferredWrittenContacts[{{$index}}].StatusType" ng-value="pwc.StatusType" />
                        <input type="hidden" name="PreferredWrittenContacts[{{$index}}].PreferredWrittenContactType" ng-value="pwc.PreferredWrittenContactType" />
                        <input type="hidden" name="PreferredWrittenContacts[{{$index}}].PreferredIndex" ng-value="$index+1" />

                    </label>
                </div>
                @Html.ValidationMessageFor(model => model.PreferredWrittenContacts, "", new { @class = "text-danger" })
            </div>

            <div class="col-lg-12 form-group">
                @Html.LabelFor(model => model.PreferredContacts, new { @class = "control-label small" })
                <div ng-init="temp2=[]">
                    <span ng-repeat="pc in TempContactDetailsForEdit.PreferredContacts" style="float:left;">
                        <label class="checkbox-inline">
                            <input type="checkbox" ng-model="temp2[$index]" ng-checked="pc.StatusType==1" ng-change="PreferredContactChange(pc, temp2[$index])"> {{pc.ContactType}}
                        </label>
                        <br />
                        &nbsp;&nbsp;&nbsp;
                        <i ng-if="$index != 0 && pc.StatusType==1" ng-click="PreferredContactPriority('increase', $index, TempContactDetailsForEdit.PreferredContacts)" class="fa fa-arrow-left pointer"></i>
                        &nbsp;<i ng-if="TempContactDetailsForEdit.PreferredContacts.length != $index+1 && pc.StatusType==1" ng-click="PreferredContactPriority('decrease',$index, TempContactDetailsForEdit.PreferredContacts)" class="fa fa-arrow-right pointer"></i>

                        <span ng-if="pc.PreferredContactID">
                            <input type="hidden" name="PreferredContacts[{{$index}}].PreferredContactID" ng-value="pc.PreferredContactID" />
                        </span>
                        <input type="hidden" name="PreferredContacts[{{$index}}].StatusType" ng-value="pc.StatusType" />
                        <input type="hidden" name="PreferredContacts[{{$index}}].PreferredWrittenContactType" ng-value="pc.PreferredWrittenContactType" />
                        <input type="hidden" name="PreferredContacts[{{$index}}].PreferredIndex" ng-value="pc.PreferredIndex" />

                    </span>
                </div>
                @Html.ValidationMessageFor(model => model.PreferredContacts, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="col-lg-6 zero-padding-left-right-div" style="margin-bottom: 10px;">
            <div class="col-lg-12">
                <label class="control-label small">Email Id *</label>
                <a ng-click="AddEmail(TempContactDetailsForEdit.EmailIDs)" class="label label-primary pull-right pointer" data-toggle="tooltip" data-placement="top" title="Add"><i class="fa fa-plus-circle"></i> Add</a>
                <div ng-repeat="email in TempContactDetailsForEdit.EmailIDs track by $index" class="input-group">
                    <input type="email" name="EmailIDs[{{$index}}].EmailAddress" ng-model="email.EmailAddress" class="form-control" placeholder="email-id">

                    <span ng-if="email.EmailDetailID">
                        <input type="hidden" name="EmailIDs[{{$index}}].EmailDetailID" value="{{email.EmailDetailID}}" />
                    </span>
                    <input type="hidden" name="EmailIDs[{{$index}}].PreferenceType" value="{{email.PreferenceType}}" />
                    <input type="hidden" name="EmailIDs[{{$index}}].StatusType" value="{{email.StatusType}}" />

                    <span class="input-group-addon">
                        <a class="text-primary pointer" ng-click="ContactDetailsEmailConditionFunction($index, TempContactDetailsForEdit.EmailIDs)">
                            <i ng-if="email.PreferenceType==1" class="fa fa-arrow-up text-success" data-toggle="tooltip" data-placement="top" title="This is Primary"></i>
                            <i ng-if="email.PreferenceType == 2" class="fa fa-arrow-down text-warning" data-toggle="tooltip" data-placement="top" title="This is Secondary"></i>
                        </a>
                        <a ng-if="email.StatusType==1 && email.EmailDetailID && TempContactDetailsForEdit.EmailIDs.length > 1 && email.PreferenceType != 1" ng-click="showConfirmation(TempContactDetailsForEdit.EmailIDs, $index, 'email')" data-toggle="tooltip" data-placement="top" title="Remove" class="text-danger pointer">
                            <i class="fa fa-hand-o-up"></i>
                        </a>
                        <a ng-if="email.StatusType==1 && !email.EmailDetailID && TempContactDetailsForEdit.EmailIDs.length > 1 && email.PreferenceType != 1" ng-click="RemoveContactDetails($index,TempContactDetailsForEdit.EmailIDs)" class="text-danger pointer" data-toggle="tooltip" data-placement="top" title="Remove"><i class="fa fa-minus-circle"></i></a>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div ng-if="IsContactDetailsError" class="col-lg-12">
        <div class="alert alert-danger" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            Error Lists : <br />
            <span ng-repeat="err in ContactDetailsErrorList track by $index">{{err}}</span>
        </div>
    </div>

    <div class="col-lg-12">
        <button class="btn btn-sm btn-warning" ng-click="ContactDetailsToggle()">Cancel</button>
        <button class="btn btn-sm btn-success pull-right" ng-click="saveContactDetails('DemographicsContactDetailsForm')">Save</button>
    </div>
</form>

<!-- Modal -->
<div class="modal fade" id="ConfirmationContactDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Confirmation</h4>
            </div>
            <div class="modal-body">
                {{ConfirmationMessage}}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">No</button>
                <button type="button" class="btn btn-primary btn-sm" ng-click="InactiveContactDetails()">Yes</button>
            </div>
        </div>
    </div>
</div>