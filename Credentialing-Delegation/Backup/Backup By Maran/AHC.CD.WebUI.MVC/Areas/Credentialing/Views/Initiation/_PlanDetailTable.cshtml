@model AHC.CD.WebUI.MVC.Models.EmailService.EmailServiceViewModel


<style>
    div.modal div.modal-backdrop {
        z-index: 0;
    }

    .Sharath {
        cursor: pointer;
        height: 150px;
        perspective: 600;
        position: relative;
        width: 150px;
    }

    .card {
        height: 100%;
        position: absolute;
        transform-style: preserve-3d;
        transition: all 1s ease-in-out;
        width: 100%;
    }

        .card:hover {
            transform: rotateY(180deg);
            transition-delay: 0.5s;
        }

        .card .side {
            backface-visibility: hidden;
            border-radius: 6px;
            height: 100%;
            position: absolute;
            overflow: hidden;
            width: 100%;
        }

        .card .back {
            color: #0087cc;
            line-height: 50px;
            text-align: center;
            transform: rotateY(180deg);
        }

    .grow {
        transition: all .2s ease-in-out;
    }

        .grow:hover {
            transform: scale(2.1);
        }

    .ui-autocomplete {
        max-height: 110px;
        overflow-y: auto;
        overflow-x: hidden;
        font-family: 'Comic Sans MS';
        position: fixed;
        z-index: 1100;
    }

    .lblcss {
        color: #333;
        border: 1px solid #ccc;
        border-radius: 3px;
    }

        .lblcss > button {
            padding-left: 10px;
            color: #b94a48;
        }
    .TemplateSelectAutoList.popover.bottom {
        margin-top: 30px;
    }

    /*.table {
        width: 100%;
        max-width: 100%;
        margin-bottom: 0px;
    }*/

    .TemplateSelectAutoList {
        display: inherit;
        left: 0%;
        width: 90%;
        margin-left: 15px;
        /*margin-left: 35px;*/
        margin-right: 15px;
        overflow-y: scroll;
        max-height: 222px;
    }

    .TemplateSelectAutoList {
        max-width: 100%;
    }

        .TemplateSelectAutoList.popover {
            border-radius: 0px;
        }

        /*.TemplateSelectAutoList.popover.bottom {
                margin-top: 56px;
            }*/

        .TemplateSelectAutoList > table > tbody > tr:hover {
            background-color: #337FC1;
            color: white;
        }
</style>

<div>
    <div class="col-lg-12">
        <table class="table table-bordered table-condensed alignTableStyle">
            <tr>
                <th class="col-lg-2">NPI Number</th>
                <th class="col-lg-2">Name</th>
                @*<th>Last Name</th>*@
                <th class="col-lg-4">Provider Titles</th>
                <th class="col-lg-2">IPA/Group</th>
                <th class="col-lg-2">Provider Relationship</th>

            </tr>
            <tr>
                <td>{{deCredData.NPINumber}}</td>
                <td> {{deCredData.Profile.PersonalDetail.FirstName}}  {{deCredData.Profile.PersonalDetail.LastName}}</td>
                <td>
                    <span ng-repeat="g in deCredData.Profile.PersonalDetail.ProviderTitles"><span ng-if="$index > 0">, </span>{{g.ProviderType.Title}}</span>
                    @*<span ng-show="Type.length == 0">Not Available</span>*@
                </td>
                <td>
                    @*<span ng-repeat="s in deCredData.Profile.ContractInfoes"><span ng-if="$index > 0"></span><i ng-if="$index>0">,</i>{{s}}<br /></span>*@
                    <span>{{deCredData.GroupName}}</span>
                </td>
                <td>
                    <span ng-repeat="g in deCredData.Profile.ContractInfoes"><span ng-if="$index > 0">, </span>{{g.ProviderRelationship}}</span>
                    @*<span ng-show="Groups.length == 0">Not Available</span>*@
                </td>
            </tr>
        </table>
    </div>
    <div ng-show="loadingmessagefordecred" ng-cloak>
        <div style="margin-left:45%;margin-top:10%">
            <img src="~/Areas/Credentialing/img/loading.GIF" />&nbsp;
            <span>Loading...Please Wait</span>
        </div>
    </div>
    
    <div ng-show="!loadingmessagefordecred">
        <div class="col-lg-6" ng-show="!initiateSuccessForDeCred">
            <label class="control-label">Select Plan:</label>
            <div id="BEID">
                <select class="form-control input-sm" data-val="true" data-val-required="Please select Plan" ng-model="PlanListForDeCred[$index]" ng-change="showPlanListDeCred(PlanListForDeCred[$index])">
                    <option selected disabled hidden value="">-Select-</option>
                    <option ng-repeat="p in PlanListForDeCred track by $index" value="{{p.PlanID}}">{{p.PlanName}}</option>
                </select>
            </div>
            <br />
            <div style="float:left;margin-top:18px">
                <input type="button" class="btn btn-warning btn-sm" ng-show="ContractGridDetailForDeCred.length==0" ng-click="SearchProviderPanelToggleDown('SearchProviderResultPanel')" value="Back to Search Result" />
            </div>
            <span ng-show="isHasError" class="text-danger field-validation-error">
                <span>Please select Plan.</span>
            </span>
        </div>
        @*<div class="col-lg-6" ng-show="!initiateSuccessForDeCred" ng-init="reasonSelected=false">
                <label class="control-label">Select Reason*:</label>
                <div>
                    <select class="form-control input-sm" data-val="true" data-val-required="Please select Reason" ng-model="reasonsForDeCred[$index]" ng-change="selectedReason(reasonsForDeCred[$index]);reasonSelected=true" ng-required="'True'">
                        <option selected disabled hidden value="">-Select-</option>
                        <option ng-repeat="p in reasonsForDeCred track by $index" value="{{p.reasonID}}">{{p.reason}}</option>
                    </select>
                </div>
                <br />
                <span ng-show="isHasError" class="text-danger field-validation-error">
                    <span>Please select Reason.</span>
                </span>
            </div>*@

        @*<div class="col-lg-6" ng-show="ContractGridDetailForDeCred.length!=0" ng-init="reasonSelected=false">
                <label class="control-label">Select Reason*:</label>
                <div>
                    <select class="form-control input-sm" data-val="true" data-val-required="Please select Reason" ng-model="reasonsForDeCred[$index]" ng-change="selectedReason(reasonsForDeCred[$index]);reasonSelected=true" ng-required="'True'">
                        <option selected disabled hidden value="">-Select-</option>
                        <option ng-repeat="p in reasonsForDeCred track by $index" value="{{p.reasonID}}">{{p.reason}}</option>
                    </select>
                </div>
                <br />
                <span ng-show="isHasError" class="text-danger field-validation-error">
                    <span>Please select Reason.</span>
                </span>
            </div>*@


        <br />
        <br />
        <div class="clearfix"></div>
        <div ng-show="loadingAjax1" style="margin-top:30px;" class="progress col-lg-12" ng-cloak>
            <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                Loading...Please wait...
            </div>
        </div>

        <br />
        <br />
        <div class="col-lg-12" ng-show="ContractGridDetailForDeCred.length!=0" style="overflow-x:auto;">
            <table ng-table="tableParams4" class="table table-hover table-bordered table-condensed">

                <thead>
                    <tr>
                        <th>Business Entity</th>
                        <th>Speciality</th>
                        <th>LOB</th>
                        <th>Location</th>
                        <th>Credentialed Date</th>
                        <th>
                            Select All

                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <input type="text" placeholder="Filter Business Entity" class="form-control input-sm" ng-model="search.GroupName" />
                        </td>
                        <td>
                            <input type="text" placeholder="Filter Speciality" class="form-control input-sm" ng-model="search.Speciality" />
                        </td>
                        <td>
                            <input type="text" placeholder="Filter LOB" class="form-control input-sm" ng-model="search.LOB" />
                        </td>
                        <td>
                            <input type="text" placeholder="Filter Location" class="form-control input-sm" ng-model="search.Location" />
                        </td>
                        <td>
                            <input type="text" placeholder="Filter Credentialed Date" class="form-control input-sm" ng-model="search.InitiationDate" />
                        </td>
                        <td class="text-center"><input type="checkbox" ng-checked="selectionForDecred.length==data.length" ng-model="tempo.allItemsSelectedForDecred" ng-click="selectAllForDecred()"></td>
                    </tr>
                    <tr ng-repeat="user in $data | filter:{GroupName:search.GroupName,Speciality:search.Speciality,LOB:search.LOB,Location:search.Location,InitiationDate:search.InitiationDate}">

                        <td class="wrap-words">
                            {{user.GroupName}}
                        </td>
                        <td class="wrap-words">
                            {{user.Speciality}}
                        </td>
                        <td class="wrap-words">
                            {{user.LOB}}
                        </td>
                        <td class="wrap-words">
                            {{user.Location}}
                        </td>
                        <td class="wrap-words">
                            {{user.InitiationDate||'Not Available'}}
                        </td>
                        <td class="text-center">
                            <input ng-model="user.Check" ng-checked="selectionForDecred.indexOf(user)>-1" ng-click="toggleSelectionForDecred(user)" type="checkbox" />
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="col-lg-5" ng-show="ContractGridDetailForDeCred.length!=0" ng-init="reasonSelected=false">
                <label class="control-label">Select Reason*:</label>
                <div id="reasonVal">
                    <select class="form-control input-sm" data-val="true" data-val-required="Please select Reason" ng-model="reasonsForDeCred[$index]" ng-change="selectedReason(reasonsForDeCred[$index])" ng-required="required">
                        <option selected disabled hidden value="">-Select-</option>
                        <option ng-repeat="p in reasonsForDeCred track by $index" value="{{p.DecredentialingReasonId}}">{{p.Reason}}</option>
                    </select>
                </div>
                
                <span ng-show="hasDecredError" class="text-danger field-validation-error">
                    <span>Please select Reason.</span>
                </span>
            </div>
            <div class="col-lg-6">

                <div class="form-group col-lg-8">

                    <label class="control-label ">Supporting Document</label>
                    <div ng-if="!fileset">
                        <input type='file' id='file' accept="image/jpg,image/png,image/jpeg,image/bmp,application/pdf" name='file' onchange="angular.element(this).scope().setFile(this,'SupportingDoc')" style=" width:0; height:0;" />
                        @*<div class="col-lg-12 fileinput fileinput-new input-group" style="border:initial" data-provides="fileinput" ng-click="addingDocument()" ng-init="fileinput=''"></div>*@
                        <div class="form-control jancyFileWrapTexts pull-right" data-trigger="fileinput" ng-click="addingDocument()">

                            @*<span class=""><span class="wrap-words" ng-repeat="file in fileList track by $index">{{file.File[0].file.name}}</span></span>*@

                            </i>
                            <span class="fileinput-filename wraptext"></span>
                            @*<span class="pull-right">
                                    <a href="#" ng-click="removeFile($index,file)" class="input-group-addon btn btn-default btn-sm fileinput-exists" data-dismiss="fileinput">Remove</a>
                                </span>*@
                        </div>
                        <br />
                    </div>

                    <div class="Sharath" ng-if="fileset">
                        <div class="card" ng-repeat="file in fileList track by $index">
                            <div class="side"><a target="_blank" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}"><i class="fa fa-3x fa-file"></i></a></div>
                            @*<div class="side wrap-words" style="margin-top:30%">{{file.File[0].file.name}}<span style="margin-left:10%"></span></div>*@
                            <div class="side back">

                                <a target="_blank" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}">
                                    <span ng-if='file.File[0].file.type!="application/pdf"'>
                                        <img ng-src="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}" alt="Document" style="width: 83px; height: 83px;" class="mg-thumbnail" />
                                    </span>
                                    @*<span ng-if='file.File[0].file.type=="application/pdf"'>
                                            <img ng-src="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]\ ApplicationDocuments \ pdfImage.jpg" alt="Document" style="width: 83px; height: 83px;" class="img-thumbnail" />
                                        </span>*@
                                    <span id="pdf" ng-if='file.File[0].file.type=="application/pdf"'>
                                        <object width="120" height="90" type="application/pdf" data="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}?#zoom=50&scrollbar=0&toolbar=0&navpanes=0" id="pdf_content">
                                            <p>PDF</p>
                                        </object>
                                    </span>
                                </a>

                                <a href="#" class="btn btn-default btn-sm " ng-click="removeFile($index,file)">Remove / Change</a>
                            </div>
                            
                        </div>
                        
                    </div>
                    @*<div ng-if="fileset" class="wrap-words" ng-repeat="file in fileList track by $index">{{file.File[0].file.name}}<span style="margin-left:10%"><i class=" fa fa-close pointer pull-right" style="color:red" tooltip data-toggle="tooltip" data-placement="top" title="Remove" ng-click="removeFile($index,file)"></i></span></div>*@
                    @*<div ng-repeat="file in fileList track by $index"><span class="wrap-words" style="color:black">{{file.File[0].file.name}}</span></div>*@
                </div>

                <div class="form-group col-lg-1" ng-if="fileset">
                    <div><br /></div>

                </div>

            </div>
            <div class="col-lg-12">
                <div class="col-md-12 form-group">
                    <button type="reset" class="btn btn-sm btn-warning" ng-click="SearchProviderPanelToggleDown('SearchProviderResultPanel'); tempObject.PlanId = ''">Cancel</button>
                    <button type="submit" ng-disabled="selectionForDecred.length==0" class="btn btn-sm btn-primary pull-right" ng-click="DecredentialingWarning()">Initiate DeCredentialing</button>
                </div>
            </div>

        </div>

    </div>

    <div class="modal fade" id="decredWarningModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="removeTask">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel" style="font-size:medium">Do you want to Initiate De-Credentialing ?</h4>
                    </div>
                    <div class="col-lg-12 text-center" ng-show="isRemoved">
                        <div style="margin-top:2%;">
                            <img src="~/Content/Images/ajax-loader.gif" style="width:50px;" /> Please Wait..
                        </div>
                    </div>
                    @*<div class="modal-body" ng-show="!isRemoved">
                            Do you want to Initiate De-Credentialing ?
                        </div>*@
                    <div class="modal-footer">
                        <button type="button" class="btn btn-warning pull-left" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-info" ng-click="MailWithDecredentialing()" data-toggle="modal" data-target="#composeMail" data-dismiss="modal">Yes, with mail&nbsp;<i class="glyphicon glyphicon-envelope"></i></button>
                        <button type="button" class="btn btn-primary" ng-click="InitiateDeCredentialing()" data-dismiss="modal">Yes, without mail</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="clearfix"></div>
    <br />
    <div class="col-lg-12 zero-padding-left-right-div">
        <div ng-show="activeMessageDiv=='NOData'" class="alert alert-danger" role="alert">
            <div>
                <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
                {{messageDesc}}
            </div>
        </div>
    </div>
    @*<div class="clearfix"></div>*@
    @*Modal for Email starts here*@
    <div class="modal fade" id="composeMail" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true" my-modal>
        <div class="modal-dialog" style="width:90%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" data-toggle="tooltip" data-placement="right" data-original-title="Close">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Compose Mail</h4>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <form id="newEmailForm">
                            <div class="col-lg-12 zero-padding-left-right-div ng-scope">
                                @*@Html.HiddenFor(model => model.EmailServiceID, new { ng_value = "tempObject.EmailServiceID" })*@
                                @Html.HiddenFor(model => model.StatusType, new { ng_value = "1" })
                                <div class="col-md-3 form-group">
                                    <label class="control-label small">Use Existing Template</label>
                                    <div class="radio">
                                        @foreach (var value in Enum.GetValues(typeof(AHC.CD.Entities.MasterData.Enums.YesNoOption)))
                                        {
                                            <label class="radio-inline">
                                                @Html.RadioButtonFor(model => model.SaveAsTemplateYesNoOption, (int)value, new { data_ng_model = "tempObject.SaveAsTemplateYesNoOption", data_ng_click = "changeYesNoOption(" + (int)value + ")" }) @value.ToString()
                                            </label>
                                        }
                                    </div>
                                </div>
                                <div class="col-lg-4 form-group pull-right" ng-if="tempObject.SaveAsTemplateYesNoOption == '1'">
                                    <label class="control-label small">Select Template</label>
                                    <input class="form-control input-sm" ng-model="tempObject.Title" data-searchdropdown="searchdropdown" placeholder="select Template" />
                                    <input type="hidden" data-ng-model="tempObject.EmailTemplateID" id="EmailTemplateID" name="EmailTemplateID" value="{{tempObject.EmailTemplateID}}" />
                                    <div class="TemplateSelectAutoList popover fade bottom in" role="tooltip" style="margin-top: 55px;" id="templatelist">
                                        <table class="table table-striped table-bordered table-hover table-condensed" @*style="margin-top: 55px;"*@>
                                            <tbody>
                                                <tr ng-repeat="type in ftemplates = (templates | filter:tempObject.Title) track by $index" ng-click="hideDiv();tempObject.Title=type.Title; tempObject.Subject = type.Subject; tempObject.Body = type.Body;showContent();" class="pointer">
                                                    <td>{{type.Title}}</td>
                                                </tr>
                                                <tr ng-if="templates.length == 0">
                                                    <td>No data..... </td>
                                                </tr>
                                                <tr ng-if="templates.length > 0 && ftemplates.length == 0">
                                                    <td>Template not found..... </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div ng-show="templateSelected">
                                    @*<div class="col-lg-12 form-group">
                                            <label class="control-label small">To *</label>
                                            @Html.TextBoxFor(model => model.To, new { @class = "form-control input-sm", data_ng_model = "tempObject.To", @id = "torecepient" })
                                            <p ng-if="errmsgforTo" style="color:red">Invalid Email...</p>
                                            @Html.ValidationMessageFor(model => model.To, "", new { @class = "text-danger" })
                                        </div>
                                        <div class="col-lg-6 form-group">
                                            <label class="control-label small">Cc</label>
                                            @Html.TextBoxFor(model => model.CC, new { @class = "form-control input-sm", data_ng_model = "tempObject.CC", id = "ccrecepient" })
                                            @Html.ValidationMessageFor(model => model.CC, "", new { @class = "text-danger" })
                                            <p ng-if="errmsgforCC" style="color:red">Invalid Email...</p>
                                        </div>
                                        <div class="col-lg-6 form-group">
                                            <label class="control-label small">Bcc</label>
                                            @Html.TextBoxFor(model => model.BCC, new { @class = "form-control input-sm", data_ng_model = "tempObject.BCC", id = "bccrecepient" })
                                            @Html.ValidationMessageFor(model => model.BCC, "", new { @class = "text-danger" })
                                            <p ng-if="errmsgforBCC" style="color:red">Invalid Email...</p>
                                        </div>*@

                                    <div class="col-lg-12 form-group">
                                        <label class="control-label small">To *</label>
                                        <div class="ui-widget">
                                            <input name="To" class="form-control col-lg-10" id="tags" ng-model="emailsfill" ng-change="emailsAutoFill()" />
                                            <p ng-if="errmsgforTo" style="color:red">Invalid Email...</p>
                                            <p ng-if="errmsg" style="color:red">Enter atleast one Email Id...</p>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 form-group">
                                        <label class="control-label small">Cc</label>
                                        <div class="ui-widget">
                                            <input name="CC" class="form-control col-lg-10" id="tagsCC" ng-model="ccfill" ng-change="emailsAutoFill()" />
                                            <p ng-if="errmsgforCC" style="color:red">Invalid Email...</p>
                                        </div>

                                    </div>
                                    <div class="col-lg-6 form-group">
                                        <label class="control-label small">Bcc</label>
                                        <div class="ui-widget">
                                            <input name="BCC" class="form-control col-lg-10" id="tagsBCC" ng-model="bccfill" ng-change="emailsAutoFill()" />
                                            <p ng-if="errmsgforBCC" style="color:red">Invalid Email...</p>
                                        </div>

                                    </div>

                                    <div class="clearfix"></div>
                                    <div class="form-group col-md-12">
                                        <label class="control-label small">Subject *</label>
                                        <div>
                                            @Html.TextBoxFor(model => model.Subject, new { @class = "form-control input-sm", data_ng_model = "tempObject.Subject" })
                                            @Html.ValidationMessageFor(model => model.Subject, "Please provide details for 'Subject' field", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>

                                    <input name="EmailAttachments[{{$index}}].AttachmentServerPath" hidden ng-repeat="Files in fileList track by $index" value="{{Files.File[0].relativePath}}" />
                                    <input name="EmailAttachments[{{$index}}].AttachmentRelativePath" hidden ng-repeat="Files in fileList track by $index" value="{{Files.File[0].path}}" />
                                    <div class="clearfix"></div>
                                    <div class="form-group col-md-12">
                                        <div class="col-lg-12 zero-padding-left-right-div">
                                            <label class="control-label small">Attached Document(s)&nbsp; &nbsp;&nbsp;</label>

                                            @*<a ng-repeat="p in fileList" href={{p.FilePath}} target="_blank"><i class="fa fa-file-archive-o fa-2x">&nbsp;&nbsp;</i></a>*@
                                        </div>
                                        @*<div>
                                                <span ng-repeat="file in fileList track by $index">
                                                    <a target="_blank" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}"><i class="fa fa-2x fa-file"></i></a>
                                                </span>
                                            </div>*@
                                        <div>
                                            <div ng-repeat="file in fileList track by $index" style="display: inline-block;width:16%;vertical-align: top;text-align:center;">
                                                <a target="_blank" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}">
                                                    <div ng-if='file.File[0].file.type!="application/pdf"'>
                                                        <img ng-src="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Document/View?path=@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}" alt="Document" style="width: 65%; height: 60px;display:block" class="mg-thumbnail" />
                                                        @*<div class="wrap-words" style="display: flex;max-width:60%">{{file.File[0].file.name}}<span style="margin-left:10%"><i class=" fa fa-close pointer pull-right" style="color:red" tooltip data-toggle="tooltip" data-placement="top" title="Remove" ng-click="removeFile($index,file)"></i></span></div>*@
                                                        <div class="wrap-words wraptext" style="display: flex;max-width:60%">{{file.File[0].file.name| limitTo : 7}}<a style="margin-top:-7%" class="btn btn-link btnPadding wrap-words" @*title="File Name"*@ data-toggle="popover" data-trigger="hover" data-placement="bottom" data-html="true" data-content="{{(file.File[0].file.name| limitTo : 300)||'-'}}<b>{{file.File[0].file.name.length > 300 ? '....' : ''}}</b>" ng-mouseover="initPop();"><b>{{file.File[0].file.name.length > 6 ? '....' : ''}}</b></a><span><i class=" fa fa-close pointer pull-right" style="color:red" tooltip data-toggle="tooltip" data-placement="top" title="Remove" ng-click="removeFile($index,file)"></i></span></div>
                                                        @*<td class="wrap-words wraptext">{{(note.stamp| limitTo : 15)||''}}&nbsp;<a class="btn btn-link btnPadding wrap-words" title="Note" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content="{{(note.stamp| limitTo : 300)||'-'}}<b>{{note.stamp.length > 300 ? '.....' : ''}}</b>" ng-mouseover="initPop();"><b>...</b></a></td>*@
                                                    </div>

                                                    <span id="pdf" ng-if='file.File[0].file.type=="application/pdf"'>
                                                        <object width="120" height="90" type="application/pdf" data="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}?#zoom=50&scrollbar=0&toolbar=0&navpanes=0" id="pdf_content">
                                                            <p>PDF</p>
                                                        </object>
                                                        <div class="wrap-words wraptext" style="display: flex;max-width:60%">{{file.File[0].file.name| limitTo : 7}}<a style="margin-top:-7%" class="btn btn-link btnPadding wrap-words" @*title="File Name"*@ data-toggle="popover" data-trigger="hover" data-placement="bottom" data-html="true" data-content="{{(file.File[0].file.name| limitTo : 300)||'-'}}<b>{{file.File[0].file.name.length > 300 ? '....' : ''}}</b>" ng-mouseover="initPop();"><b>{{file.File[0].file.name.length > 6 ? '....' : ''}}</b></a><span><i class=" fa fa-close pointer pull-right" style="color:red" tooltip data-toggle="tooltip" data-placement="top" title="Remove" ng-click="removeFile($index,file)"></i></span></div>
                                                    </span>
                                                    @*<span class="wrap-words" style="color:black">{{file.File[0].file.name}}</span>*@
                                                </a>
                                            </div>
                                        </div>
                                        @*<div ng-repeat="file in fileList track by $index">
                                            <span class="wrap-words" style="color:black">{{file.File[0].file.name}}</span>
                                        </div>*@
                                        <br />
                                        <br />
                                        <div class="col-lg-12 zero-padding-left-right-div">
                                            <label class="control-label small">Add Attachment</label>
                                            <input type='file' id='file' name='file' multiple onchange="angular.element(this).scope().setFile(this,'mailDoc')" style=" width:0; height:0;" />
                                            <input type="button" class="btn btn-xs btn-default" id="btn-upload" ng-click="addingDocument()" tooltip data-toggle="tooltip" data-placement="top" title="Add Document" value="Attach File..." />
                                            &nbsp;&nbsp;&nbsp;
                                            <span class="badge">Files Size should be less than 15 MB!</span>
                                        </div>
                                        <br />
                                        @*<div class="col-lg-6" style="padding-top: 5px; " ng-if="fileList.length>0">
                                                <div class="label lblcss" ng-repeat="file in fileList track by $index" style="box-sizing: border-box; overflow: hidden; float: left; width: 100%">
                                                    <a class="col-lg-10 wraptext" style="text-align: -webkit-auto" target=" _blank" href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]{{file.File[0].path}}">
                                                        <span class=""><span class="wrap-words">{{file.File[0].file.name}}</span></span>
                                                    </a>
                                                    <span class="progress-wrapper" ng-show="current[$index]<100"></span>
                                                    &nbsp; &nbsp; &nbsp;
                                                    <i class=" fa fa-close pointer pull-right" style="color:black" tooltip data-toggle="tooltip" data-placement="top" title="Remove" ng-click="removeFile($index,file)"></i>
                                                    <img src="~/Content/Images/ajax-loader.gif" ng-show="current[$index]<100" style="width:13px" />
                                                    <br />
                                                </div>
                                            </div>*@
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="col-md-12 form-group">
                                        <label class="control-label small">Body</label>
                                        <wysiwyg textarea-id="wysiwygBody" textarea-class="form-control" textarea-height="400px" textarea-style="width:100%;resize: none;overflow-y: scroll;" textarea-name="wysiwygBody" textarea-required data-ng-model="tempObject.Body" enable-bootstrap-title="true"></wysiwyg>

                                        @Html.HiddenFor(model => model.Body, new { @class = "form-control input-sm", ng_value = "tempObject.Body" })
                                        @Html.ValidationMessageFor(model => model.Body, "Please provide details for 'Body' field", new { @class = "text-danger" })


                                    </div>
                                    @*<div class="col-md-3 form-group" style="width:20%">
                                        <label class="control-label small">Schedule Recurrence *</label>
                                        <div class="radio">
                                            @foreach (var value in Enum.GetValues(typeof(AHC.CD.Entities.MasterData.Enums.YesNoOption)))
                                            {
                                                <label class="radio-inline">
                                                    @Html.RadioButtonFor(model => model.IsRecurrenceEnabledYesNoOption, (int)value, new { data_ng_model = "tempObject.IsRecurrenceEnabledYesNoOption", data_ng_click = "" }) @value.ToString()
                                                </label>
                                            }
                                        </div>
                                        @Html.ValidationMessageFor(model => model.IsRecurrenceEnabledYesNoOption, "", new { @class = "text-danger" })
                                    </div>*@
                                    @*<div class="col-md-5 form-group" ng-if="tempObject.IsRecurrenceEnabledYesNoOption==1">
                                        <label class="control-label small">Recurrence Type *</label>
                                        <div class="radio">
                                            @foreach (var value in Enum.GetValues(typeof(AHC.CD.Entities.MasterData.Enums.RecurrenceIntervalType)))
                                            {
                                                <label class="radio-inline">
                                                    @Html.RadioButtonFor(model => model.RecurrenceIntervalTypeCategory, (int)value, new { data_ng_model = "tempObject.RecurrenceIntervalTypeCategory", data_ng_click = "tempObject.IntervalFactor=null" }) @value.ToString()
                                                </label>
                                            }
                                            <br />
                                            @Html.ValidationMessageFor(model => model.RecurrenceIntervalTypeCategory, "", new { @class = "text-danger" })
                                            <br />
                                            <br />
                                            <span ng-if="tempObject.RecurrenceIntervalTypeCategory != 6 && tempObject.RecurrenceIntervalTypeCategory != 4">@Html.TextBoxFor(model => model.IntervalFactor, new { @type = "number", @class = "form-control input-sm col-lg-3", data_ng_model = "tempObject.IntervalFactor", data_ng_init = 1, @placeholder = "Enter Interval" })</span>
                                            @Html.ValidationMessageFor(model => model.IntervalFactor, "", new { @class = "text-danger" })
                                            <span ng-if="tempObject.RecurrenceIntervalTypeCategory == 6 && tempObject.RecurrenceIntervalTypeCategory != 4">@Html.TextBoxFor(model => model.DateForCustomRecurrence, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm  col-lg-3", data_ng_model = "tempObject.DateForCustomRecurrence", placeholder = "mm/dd/yyyy" })</span>
                                            @Html.ValidationMessageFor(model => model.DateForCustomRecurrence, "", new { @class = "text-danger" })
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>*@
                                    @*<div class="col-md-4 form-group" ng-if="tempObject.IsRecurrenceEnabledYesNoOption==1 && tempObject.RecurrenceIntervalTypeCategory != '6'" style="width:38%">
                                        <div class="col-lg-6 form-group">
                                            <label class="control-label small" style="margin-bottom:20px;">From</label>
                                            @Html.TextBoxFor(model => model.FromDate, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "tempObject.FromDate", placeholder = "mm/dd/yyyy" })
                                            @Html.ValidationMessageFor(model => model.FromDate, "", new { @class = "text-danger" })
                                        </div>
                                        <div class="col-lg-6 form-group">
                                            <label class="control-label small" style="margin-bottom:20px;">To</label>
                                            @Html.TextBoxFor(model => model.ToDate, new { data_val_date = "Please enter date in mm/dd/yyyy format.", data_date_format = "MM/dd/yyyy", data_bs_datepicker = "bs-datepicker", @class = "form-control input-sm", data_ng_model = "tempObject.ToDate", placeholder = "mm/dd/yyyy" })
                                            @Html.ValidationMessageFor(model => model.ToDate, "", new { @class = "text-danger" })
                                        </div>
                                    </div>*@
                                    <div class="col-md-12 form-group">
                                        <button type="button" class="btn btn-warning btn-sm" ng-click="EditCancle(tempObject);" data-dismiss="modal">Cancel</button>
                                        <button id="saveButton" type="submit" ng-click="SendMailAndInitiateDecred('newEmailForm')" class="btn btn-primary btn-sm pull-right">Send</button>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div ng-show="activeMessageDiv=='warningdiv'" class="alert alert-info" role="alert">
                                        <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
                                        <strong>Please wait...</strong> {{messageDesc}}
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*Modal for Email ends here*@

    <div class="clearfix"></div>
    <br />
    <div class="col-lg-12 zero-padding-left-right-div">
        <div ng-show="activeMessageDiv=='Error'" class="alert alert-danger" role="alert">
            <div>
                <button ng-click="closeAlertMessage('')" class="close"><span>&times;</span></button>
                {{messageDesc}}
            </div>
        </div>
    </div>
    <div class="clearfix"></div>

</div>


