profileApp.controller("OrgInfoAppCtrl",["$scope","$rootScope","masterDataService","$http","messageAlertEngine",function(a,b,c,d,e){b.$on("ContractInfoes",function(b,c){if(a.contractInfoes=c,"undefined"!=typeof a.contractInfoes[0]&&null!=a.contractInfoes[0].JoiningDate){a.contractInfoes[0].JoiningDate=ConvertDateFormat(a.contractInfoes[0].JoiningDate),a.contractInfoes[0].ExpiryDate=ConvertDateFormat(a.contractInfoes[0].ExpiryDate);for(var d=0;d<a.contractInfoes[0].ContractGroupInfoes.length;d++)a.contractInfoes[0].ContractGroupInfoes[d].JoiningDate=ConvertDateFormat(a.contractInfoes[0].ContractGroupInfoes[d].JoiningDate),a.contractInfoes[0].ContractGroupInfoes[d].ExpiryDate=ConvertDateFormat(a.contractInfoes[0].ContractGroupInfoes[d].ExpiryDate)}console.log("List of Contract Details Here......................"),console.log(c)}),a.EnableContract=function(){try{return"undefined"==a.contractInfoes?!1:"undefined"!=a.contractInfoes&&"undefined"!=a.contractInfoes[0]&&"Inactive"==a.contractInfoes[0].ContractStatus?!1:!0}catch(b){}},b.$on("LoadRequireMasterData",function(){c.getMasterData("/MasterData/Organization/GetGroups").then(function(b){a.masterGroups=b})}),a.EditGroup=function(c,d,e){a.tempObject="",a.ContractInfoID=e,b.visibilityControl=c,a.tempObject=angular.copy(d)},a.AddContract=function(c){b.operateViewAndAddControl(c),a.providerStatus=!0,a.showAddGroup=!0},a.operateEditControl=function(c,d){a.tempObject="",b.visibilityControl=c,a.tempObject=d},a.EditContract=function(c,d){b.operateEditControl(c,d),a.providerStatus=!1},a.showAddGroup=!0,a.AddGroup=function(c,d){a.tempObject="",a.ContractInfoID=d,b.visibilityControl=c,a.showAddGroup=!1},a.cancelGroup=function(){a.tempObject="",a.showAddGroup=!0,b.operateCancelControl("")},a.saveContractInformation=function(c,d){loadingOn();var f,g,h,i;i=c.ContractGroupInfoes,"addci"==a.visibilityControl?(h=$("#ContractInformationAddDiv").find("form"),g="/Profile/Contract/AddContractInformation?profileId="+profileId):"_editci"==a.visibilityControl&&(h=$("#ContractInformationEditDiv").find("form"),g="/Profile/Contract/UpdateContractInformation?profileId="+profileId),ResetFormForValidation(h),f=h.valid(),f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.contractInformation.JoiningDate=ConvertDateFormat(c.contractInformation.JoiningDate),c.contractInformation.ExpiryDate=ConvertDateFormat(c.contractInformation.ExpiryDate),"_editci"!=a.visibilityControl?(a.contractInfoes[0]=c.contractInformation,b.operateCancelControl(""),e.callAlertMessage("addedNewContractInformation","Contract  Information added successfully !!!!","success",!0)):(a.contractInfoes[0]=c.contractInformation,a.contractInfoes[0].ContractGroupInfoes=i,b.operateCancelControl(""),e.callAlertMessage("updatedContractInformation","Contract Information updated successfully !!!!","success",!0)),FormReset(h)):(e.callAlertMessage("errorContractInformation","","danger",!0),a.errorContractInformation=c.status.split(","))},error:function(){e.callAlertMessage("errorContractInformation"+d,"","danger",!0),a.errorContractInformation="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.saveGroupInformation=function(c,d,f){loadingOn();for(var g,h,i,j,k=0;k<a.masterGroups.length;k++)a.masterGroups[k].PracticingGroupID==parseInt(c.PracticingGroupId)&&(j=a.masterGroups[k]);"addgi"==a.visibilityControl?(i=$("#newContractInformationDiv").find("form"),h="/Profile/Contract/AddContractGroupInformation?profileId="+profileId+"&contractInfoId="+a.ContractInfoID):a.visibilityControl==f+"_editgi"&&(i=$("#ContractGroupInformationEditDiv"+f).find("form"),h="/Profile/Contract/UpdateContractGroupInformation?profileId="+profileId+"&contractInfoId="+a.ContractInfoID),ResetFormForValidation(i),g=i.valid(),g&&$.ajax({url:h,type:"POST",data:new FormData(i[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.contractGroupInformation.JoiningDate=ConvertDateFormat(c.contractGroupInformation.JoiningDate),c.contractGroupInformation.ExpiryDate=ConvertDateFormat(c.contractGroupInformation.ExpiryDate),c.contractGroupInformation.PracticingGroup=j,a.visibilityControl!=f+"_editgi"?(a.contractInfoes[0].ContractGroupInfoes.push(c.contractGroupInformation),b.operateCancelControl(""),e.callAlertMessage("addedNewContractGroupInformation","Contract Group Information saved successfully !!!!","success",!0)):(a.contractInfoes[0].ContractGroupInfoes[f]=c.contractGroupInformation,b.operateViewAndAddControl(f+"_viewgi"),e.callAlertMessage("updatedContractGroupInformation"+f,"Contract Group Information updated successfully !!!!","success",!0)),FormReset(i)):(e.callAlertMessage("errorContractGroupInformation","","danger",!0),a.errorContractGroupInformation=c.status.split(","))},error:function(){e.callAlertMessage("errorContractGroupInformation","","danger",!0),a.errorContractGroupInformation="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),profileApp.filter("orderEmpty",function(){return function(a,b,c){var d,e,f;if(angular.isArray(a)){switch(d=a.filter(function(a){return a[b]}),e=a.filter(function(a){return!a[b]}),c){case"toBottom":f=d.concat(e);break;case"toTop":f=e.concat(d);break;default:f=a}return f}}}),profileApp.directive("validFile",function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){d.$setViewValue(b.val())},b.bind("change",function(){a.$apply(function(){d.$render()})})}}}),profileApp.controller("profileDemographicsController",["$scope","$rootScope","$http","$filter","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){$(document).ready(function(){$("#Loading_Message").text("Gathering Profile Data..."),c({method:"GET",url:"/Profile/MasterProfile/get?profileId="+profileId}).success(function(a){try{for(key in a)b.$emit(key,a[key]);$("#Loading_Message").text("Inserting Profile Data..."),$("#loadingData").hide("fast"),b.$broadcast("LoadRequireMasterData")}catch(c){$("#loadingData").hide("fast")}}).error(function(){$("#loadingData").hide("fast")})}),a.Provider={},a.message={},b.$on("ProfilePhotoPath",function(b,c){a.Provider.ProfilePhotoPath=c}),b.$on("PersonalDetail",function(b,c){a.Provider.PersonalDetails=c,a.Provider.PersonalDetails.MaritalStatusType||(a.Provider.PersonalDetails.MaritalStatusType="")}),b.$on("OtherLegalNames",function(b,c){if(c.length>0)for(var d in c)c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate);a.Provider.OtherLegalNames=c}),b.$on("HomeAddresses",function(b,c){if(c.length>0)for(var d in c)c[d].LivingEndDate=ConvertDateFormat(c[d].LivingEndDate),c[d].LivingFromDate=ConvertDateFormat(c[d].LivingFromDate);a.HomeAddresses=c}),b.$on("ContactDetail",function(b,c){if(c)for(var d in c.PreferredContacts)1==c.PreferredContacts[d].PreferredWrittenContactType&&(c.PreferredContacts[d].ContactType="Home Phone");a.Provider.ContactDetails=c}),b.$on("PersonalIdentification",function(b,c){a.Provider.PersonalIdentification=c}),b.$on("BirthInformation",function(b,c){c&&(c.DateOfBirth=ConvertDateFormat(c.DateOfBirth)),a.Provider.BirthInformation=c}),b.$on("VisaDetail",function(b,c){c&&c.VisaInfo&&(c.VisaInfo.VisaExpirationDate=ConvertDateFormat(c.VisaInfo.VisaExpirationDate),c.VisaInfo.VisaTypeID||(c.VisaInfo.VisaTypeID=""),c.VisaInfo.VisaStatusID||(c.VisaInfo.VisaStatusID=""),c.VisaInfo.CountryOfIssue||(c.VisaInfo.CountryOfIssue="")),a.Provider.VisaDetails=c}),b.$on("LanguageInfo",function(b,c){a.Provider.LanguageInfo=c}),b.$on("LoadRequireMasterData",function(){e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),e.getMasterData("/Profile/MasterData/getallvisatypes").then(function(b){a.VisaTypes=b}),e.getMasterData("/Profile/MasterData/getallvisastatus").then(function(b){a.VisaStatuses=b}),e.getMasterData("/Profile/MasterData/GetAllProviderLevels").then(function(b){a.ProviderLevels=b})}),a.Languages=Languages,a.CountryDialCodes=countryDailCodes,a.CountryOfissue=CountryOfissue,a.PreferredContacts=[{PreferredContactID:null,ContactType:"Home Phone",PreferredWrittenContactType:1,StatusType:1,PreferredIndex:1},{PreferredContactID:null,ContactType:"Fax",PreferredWrittenContactType:2,StatusType:1,PreferredIndex:2},{PreferredContactID:null,ContactType:"Mobile",PreferredWrittenContactType:3,StatusType:1,PreferredIndex:3},{PreferredContactID:null,ContactType:"Email",PreferredWrittenContactType:4,StatusType:1,PreferredIndex:4},{PreferredContactID:null,ContactType:"Pager",PreferredWrittenContactType:5,StatusType:1,PreferredIndex:5}],a.addressHomeAutocomplete=function(b){a.tempObject.City=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation1=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.addressAutocompleteForBirthInformation=function(b){a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setBirthAddressModels(b)},a.selectedLocation=function(b){a.setBirthAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetBirthAddressModels=function(){a.tempObject.StateOfBirth="",a.tempObject.CountryOfBirth=""},a.setBirthAddressModels=function(b){a.tempObject.CityOfBirth=b.City,a.tempObject.StateOfBirth=b.State,a.tempObject.CountryOfBirth=b.Country},a.ViewPersonalDetails=!0,a.PersonalDetailsToggle=function(c){"EditPersonalDetails"==c?(b.visibilityControl=c,a.getProviderTypesAndTempData()):b.visibilityControl=c},a.getProviderTypesAndTempData=function(){if(a.TempPersonalDetailsForEdit=angular.copy(a.Provider.PersonalDetails),a.tempProviderTypes=angular.copy(a.ProviderTypes),a.tempSelectedDeactivatedProviderTypes=[],a.TempPersonalDetailsForEdit)if(a.TempPersonalDetailsForEdit.ProviderTitles){for(var b=0;b<a.TempPersonalDetailsForEdit.ProviderTitles.length;b++)2==a.TempPersonalDetailsForEdit.ProviderTitles[b].StatusType&&(a.tempSelectedDeactivatedProviderTypes.push(a.TempPersonalDetailsForEdit.ProviderTitles[b]),a.TempPersonalDetailsForEdit.ProviderTitles.splice(b,1),b--);for(var b in a.TempPersonalDetailsForEdit.ProviderTitles)for(var c in a.tempProviderTypes)a.TempPersonalDetailsForEdit.ProviderTitles[b].ProviderType.ProviderTypeID==a.tempProviderTypes[c].ProviderTypeID&&1==a.TempPersonalDetailsForEdit.ProviderTitles[b].StatusType?a.tempProviderTypes.splice(c,1):a.TempPersonalDetailsForEdit.ProviderTitles[b].ProviderType.ProviderTypeID==a.tempProviderTypes[c].ProviderTypeID&&2==a.TempPersonalDetailsForEdit.ProviderTitles[b].StatusType&&(a.tempSelectedDeactivatedProviderTypes.push(a.TempPersonalDetailsForEdit.ProviderTitles[b]),a.TempPersonalDetailsForEdit.ProviderTitles.splice(b,1))}else a.TempPersonalDetailsForEdit.ProviderTitles=[];else a.TempPersonalDetailsForEdit={ProviderTitles:[]}},a.SelectProviderType=function(b){for(var c=!1,d=0;d<a.tempSelectedDeactivatedProviderTypes.length;d++)if(a.tempSelectedDeactivatedProviderTypes[d].ProviderType.ProviderTypeID==b.ProviderTypeID){a.tempSelectedDeactivatedProviderTypes[d].StatusType=1,a.TempPersonalDetailsForEdit.ProviderTitles.push(a.tempSelectedDeactivatedProviderTypes[d]),a.tempSelectedDeactivatedProviderTypes.splice(d,1),c=!0;break}c||a.TempPersonalDetailsForEdit.ProviderTitles.push({ProviderType:b,ProviderTitleID:null,ProviderTypeId:b.ProviderTypeID,StatusType:1}),a.tempProviderTypes.splice(a.tempProviderTypes.indexOf(b),1)},a.ActionProviderType=function(b,c){if("remove"==c)a.TempPersonalDetailsForEdit.ProviderTitles.splice(a.TempPersonalDetailsForEdit.ProviderTitles.indexOf(b),1),a.tempProviderTypes.push(b.ProviderType);else if("deactivate"==c){var d=0;for(var e in a.TempPersonalDetailsForEdit.ProviderTitles)1==a.TempPersonalDetailsForEdit.ProviderTitles[e].StatusType&&d++;b.StatusType=1==d?1:2}else"activate"==c&&(b.StatusType=1)},a.ProfileUpload=function(c){if(a.valstaus=!0,ResetFormForValidation($("#"+c)),$("#"+c).valid()){var d=$("#ProfilePic")[0];$.ajax({url:"/Profile/Demographic/FileUploadAsync?profileId="+profileId,type:"POST",data:new FormData(d),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl="",g.callAlertMessage("alertPersonalDetailsSuccess","Profile Picture uploaded successfully.","success",!0)):g.callAlertMessage("alertPersonalDetailsSuccess",c.status,"danger",!0)}})}},a.ProfilePictureRemove=function(c){$.ajax({url:"/Profile/Demographic/FileRemoveAsync?profileId="+profileId,type:"POST",data:new FormData(c),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl="",g.callAlertMessage("alertPersonalDetailsSuccess","Profile Picture removed successfully.","success",!0)):g.callAlertMessage("alertPersonalDetailsSuccess",c.status,"danger",!0)}})},a.DemographicsUpdatePersonalDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&a.TempPersonalDetailsForEdit.ProviderTitles.length>0?(a.isHasError=!1,$.ajax({url:"/Profile/Demographic/UpdatePersonalDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){if("true"==e.status){if(e.personalDetail.ProviderTitles.length>0)for(var f in e.personalDetail.ProviderTitles)for(var h=0;h<a.ProviderTypes.length;h++)e.personalDetail.ProviderTitles[f].ProviderTypeId==a.ProviderTypes[h].ProviderTypeID&&(e.personalDetail.ProviderTitles[f].ProviderType=a.ProviderTypes[h]);e.personalDetail.ProviderLevel=d("filter")(a.ProviderLevels,{ProviderLevelID:e.personalDetail.ProviderLevelID})[0],a.Provider.PersonalDetails=e.personalDetail,a.Provider.PersonalDetails.MaritalStatusType||(a.Provider.PersonalDetails.MaritalStatusType=""),FormReset($("#"+c)),b.visibilityControl="",g.callAlertMessage("alertPersonalDetailsSuccess","Personal Details updated successfully.","success",!0)}else g.callAlertMessage("alertPersonalDetailsError",e.status.split(","),"danger",!0)}})):a.isHasError=!0},a.saveOtherLegalName=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames.push(c.otherLegalName),b.visibilityControl="",FormReset(d),g.callAlertMessage("alertOtherLegalNameSuccess","Other Legal Name saved successfully.","success",!0)):g.callAlertMessage("alertOtherLegalNameError",c.status.split(","),"danger",!0)}})},a.updateOtherLegalName=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate);for(var f in a.Provider.OtherLegalNames)if(a.Provider.OtherLegalNames[f].OtherLegalNameID==c.otherLegalName.OtherLegalNameID){a.Provider.OtherLegalNames[f]=c.otherLegalName;break}b.visibilityControl=d+"_ViewOtherLegalName",FormReset(e),g.callAlertMessage("alertOtherLegalNameSuccess"+d,"Other Legal Name updated successfully.","success",!0)}else g.callAlertMessage("alertOtherLegalNameError"+d,c.status.split(","),"danger",!0)}})},a.saveHomeAddress=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.homeAddress.AddressPreferenceType)for(var e in a.HomeAddresses)if(1==a.HomeAddresses[e].AddressPreferenceType){a.HomeAddresses[e].AddressPreferenceType=2,a.HomeAddresses[e].AddressPreference="Secondary";break}c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),a.HomeAddresses.push(c.homeAddress),b.tempObject={},b.visibilityControl="",FormReset(d),g.callAlertMessage("alertHomeAddressSuccess","Home Address saved successfully.","success",!0)}else g.callAlertMessage("alertHomeAddressError",c.status.split(","),"danger",!0)}})},a.updateHomeAddress=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),1==c.homeAddress.AddressPreferenceType)for(var f in a.HomeAddresses)if(1==a.HomeAddresses[f].AddressPreferenceType){a.HomeAddresses[f].AddressPreferenceType=2,a.HomeAddresses[f].AddressPreference="Secondary";break}for(var f in a.HomeAddresses)a.HomeAddresses[f].HomeAddressID==c.homeAddress.HomeAddressID&&(a.HomeAddresses[f]=c.homeAddress);1==c.homeAddress.AddressPreferenceType?(b.visibilityControl="0_ViewHomeAddress",g.callAlertMessage("alertHomeAddressSuccess0","Home Address updated successfully.","success",!0)):(b.visibilityControl=d+"_ViewHomeAddress",g.callAlertMessage("alertHomeAddressSuccess"+d,"Home Address updated successfully.","success",!0)),FormReset(e)}else g.callAlertMessage("alertHomeAddressError"+d,c.status.split(","),"danger",!0)}})},a.removeHomeAddress=function(b){for(var c in a.HomeAddresses)if(b==c){a.HomeAddresses.splice(b,1);break}},a.ContactDetailsToggle=function(c){"EditContactDetails"==c?(b.visibilityControl=c,a.getTempContactDetailsForEdit()):(b.visibilityControl=c,a.ContactDetailsEmptyError=!1)},a.getTempContactDetailsForEdit=function(){if(a.TempContactDetailsForEdit=angular.copy(a.Provider.ContactDetails),a.TempPreferredWrittenContacts=angular.copy(a.PreferredWrittenContacts),a.TempPreferredContacts=angular.copy(a.PreferredContacts),null==a.TempContactDetailsForEdit)a.TempContactDetailsForEdit={PhoneDetails:[],EmailIDs:[],PreferredWrittenContacts:[],PreferredContacts:[]};else{if(a.TempContactDetailsForEdit.PhoneDetails.length>0){var b=a.getInactivatedDataArray(a.TempContactDetailsForEdit.PhoneDetails);a.TempContactDetailsForEdit.PhoneDetails=b.dataArray,a.tempSelectedDeactivatedPhonesDetails=b.temInactivatedData}if(a.TempContactDetailsForEdit.EmailIDs.length>0){var b=a.getInactivatedDataArray(a.TempContactDetailsForEdit.EmailIDs);a.TempContactDetailsForEdit.EmailIDs=b.dataArray,a.tempSelectedDeactivatedEmailIds=b.temInactivatedData}if(a.TempContactDetailsForEdit.PreferredContacts.length>0){var b=a.getInactivatedDataArray(a.TempContactDetailsForEdit.PreferredContacts);a.TempContactDetailsForEdit.PreferredContacts=b.dataArray,a.tempSelectedDeactivatedPreferredContacts=b.temInactivatedData}a.PreferredContactTypesArray=a.TempContactDetailsForEdit.PreferredContacts}},a.getInactivatedDataArray=function(a){for(var b=[],c=0;c<a.length;c++)2==a[c].StatusType&&(b.push(a[c]),a.splice(c,1),c--);return{dataArray:a,temInactivatedData:b}},a.PreferredContactTypesArray=[],a.addPreferredContactTypesToArray=function(b){var c=!0;for(var d in a.PreferredContactTypesArray)if(a.PreferredContactTypesArray[d].PreferredWrittenContactType==b){a.PreferredContactTypesArray[d].StatusType=1,c=!1;break}if(c)for(var d in a.tempSelectedDeactivatedPreferredContacts)if(a.tempSelectedDeactivatedPreferredContacts[d].PreferredWrittenContactType==b){a.tempSelectedDeactivatedPreferredContacts[d].StatusType=1,a.PreferredContactTypesArray.push(a.tempSelectedDeactivatedPreferredContacts[d]),c=!1;break}c&&a.PreferredContactTypesArray.push(a.PreferredContacts[b-1])},a.RemovePreferredContactTypesFromArray=function(b){for(var c in a.PreferredContactTypesArray){if(a.PreferredContactTypesArray[c].PreferredWrittenContactType==b&&a.PreferredContactTypesArray[c].PreferredContactID){a.PreferredContactTypesArray[c].StatusType=2;break}if(a.PreferredContactTypesArray[c].PreferredWrittenContactType==b&&!a.PreferredContactTypesArray[c].PreferredContactID){a.PreferredContactTypesArray.splice(a.PreferredContactTypesArray.indexOf(a.PreferredContactTypesArray[c]),1);break}}},a.selectedPrefferdContact=function(b,c){a.pcPriority=b,a.pcIndex=c},a.ChangePreferredContactsPriority=function(b){var c=a.PreferredContactTypesArray.indexOf(a.pcPriority);"increase"==b&&0!==c?(a.PreferredContactTypesArray[c].ProficiencyIndex=c,a.PreferredContactTypesArray[c-1].ProficiencyIndex=c+1,a.pcIndex=c-1):"decrease"==b&&c!==a.PreferredContactTypesArray.length-1&&(a.PreferredContactTypesArray[c].ProficiencyIndex=c+2,a.PreferredContactTypesArray[c+1].ProficiencyIndex=c+1,a.pcIndex=c+1),a.PreferredContactTypesArray.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.AddPhones=function(b,c){b.push({PhoneDetailID:null,Number:"",CountryCode:"+1",PhoneTypeEnum:c,Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(c)},a.AddEmail=function(b){b.push({EmailDetailID:null,EmailAddress:"",Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(4)},a.AddPager=function(){a.TempContactDetailsForEdit.CountryCode="+1",a.addPreferredContactTypesToArray(5)},a.RemovePager=function(){a.TempContactDetailsForEdit.CountryCode=a.putEmpty,a.TempContactDetailsForEdit.PagerNumber=a.putEmpty,a.RemovePreferredContactTypesFromArray(5)},a.RemoveContactDetails=function(a,b){b.splice(a,1)},a.PreferredContactChange=function(a,b){a.StatusType=b?1:2},a.PreferredContactPriority=function(a,b,c){"increase"==a?(c[b].PreferredIndex=b,c[b-1].PreferredIndex=b+1):"decrease"==a&&(c[b].PreferredIndex=b+2,c[b+1].PreferredIndex=b+1),c.sort(function(a,b){return a.PreferredIndex-b.PreferredIndex})},a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.ContactDetailsPhoneConditionFunction=function(a,b,c){if(b.length>0)for(var d in b)if(b[d].PhoneTypeEnum==c)if(d==b.indexOf(a))switch(b[d].PreferenceType){case 1:b[d].PreferenceType=2;break;case 2:b[d].PreferenceType=1;break;default:b[d].PreferenceType=1}else b[d].PreferenceType=2},a.ContactDetailsEmailConditionFunction=function(a,b){if(b.length>0)for(var c in b)if(c==a)switch(b[c].PreferenceType){case 1:b[c].PreferenceType=2;break;case 2:b[c].PreferenceType=1;break;default:b[c].PreferenceType=1}else b[c].PreferenceType=2},a.changeStausType=function(a){return a=1==a?2:1},a.showConfirmation=function(b,c,d){c.StatusType=a.changeStausType(c.StatusType);var e=b.indexOf(c);if(b[e]=c,"phone"==d){c.PhoneDetailID||a.RemoveContactDetails(e,b);var f=a.IsActiveContactDetails(b,c);f?a.addPreferredContactTypesToArray(c.PhoneTypeEnum):a.RemovePreferredContactTypesFromArray(c.PhoneTypeEnum)}else if("email"==d){c.EmailDetailID||a.RemoveContactDetails(e,b);var f=a.IsActiveEmailIds(b);f?a.addPreferredContactTypesToArray(4):a.RemovePreferredContactTypesFromArray(4)}},a.InactiveContactDetails=function(){$("#ConfirmationContactDetails").modal("hide")},a.IsActiveContactDetails=function(a,b){var c=!1;for(var d in a)if(b.PhoneTypeEnum==a[d].PhoneTypeEnum&&1==a[d].StatusType){c=!0;break}return c},a.IsActiveEmailIds=function(a){var b=!1;for(var c in a)if(1==a[c].StatusType){b=!0;break}return b},a.checkDuplicateData=function(b,c){if("phone"==c&&a.tempSelectedDeactivatedPhonesDetails)for(var d=0;d<a.tempSelectedDeactivatedPhonesDetails.length;d++)b.CountryCode==a.tempSelectedDeactivatedPhonesDetails[d].CountryCode&&b.Number==a.tempSelectedDeactivatedPhonesDetails[d].Number&&(b.PhoneDetailID=a.tempSelectedDeactivatedPhonesDetails[d].PhoneDetailID,b.StatusType=1);else if("email"==c&&a.tempSelectedDeactivatedEmailIds)for(var d=0;d<a.tempSelectedDeactivatedEmailIds.length;d++)b.EmailAddress==a.tempSelectedDeactivatedEmailIds[d].EmailAddress&&(b.EmailDetailID=a.tempSelectedDeactivatedEmailIds[d].EmailDetailID,b.StatusType=1)},a.saveContactDetails=function(c){ResetFormForValidation($("#"+c));var d=a.IsContactDetailsFormValidate();$("#"+c).valid()&&d?$.ajax({url:"/Profile/Demographic/UpdateContactDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.contactDetail)for(var e in d.contactDetail.PreferredContacts)1==d.contactDetail.PreferredContacts[e].PreferredWrittenContactType&&(d.contactDetail.PreferredContacts[e].ContactType="Home Phone");a.Provider.ContactDetails=d.contactDetail,a.TempContactDetailsForEdit=[],a.PreferredContactTypesArray=[],a.ContactDetailsEmptyError=!1,FormReset($("#"+c)),b.visibilityControl="",g.callAlertMessage("alertContactDetailsSuccess","Contact Details updated successfully.","success",!0)}else g.callAlertMessage("alertContactDetailsError",d.status.split(","),"danger",!0)},cache:!1,contentType:!1,processData:!1}):a.ContactDetailsEmptyError=!0},a.IsContactDetailsFormValidate=function(){var b=!1;return(a.TempContactDetailsForEdit.PhoneDetails.length>0||a.TempContactDetailsForEdit.EmailIDs.length>0||a.PreferredContactTypesArray.length>0)&&(b=!0),b},a.DemographicsPersonalIdentificationSave=function(c){ResetFormForValidation($("#"+c));$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdatePersonalIdentificationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.PersonalIdentification=d.personalIdentification,b.tempObject={},b.visibilityControl="",FormReset($("#"+c)),g.callAlertMessage("alertPersonalIdentificationSuccess","Personal Identification updated successfully.","success",!0)):g.callAlertMessage("alertPersonalIdentificationError",d.status.split(","),"danger",!0)}})},a.saveBirthInformation=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateBirthInformationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(d.birthInformation.DateOfBirth=ConvertDateFormat(d.birthInformation.DateOfBirth),a.Provider.BirthInformation=d.birthInformation,b.tempObject={},b.visibilityControl="",FormReset($("#"+c)),g.callAlertMessage("alertBirthInformationSuccess","Birth Information saved successfully.","success",!0)):g.callAlertMessage("alertBirthInformationError",d.status.split(","),"danger",!0)}})},a.saveEthnicityVisaDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateVisaDetailAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.visaDetail.VisaInfo){d.visaDetail.VisaInfo.VisaExpirationDate=ConvertDateFormat(d.visaDetail.VisaInfo.VisaExpirationDate);for(var e in a.VisaTypes)if(d.visaDetail.VisaInfo.VisaTypeID==a.VisaTypes[e].VisaTypeID){d.visaDetail.VisaInfo.VisaType=a.VisaTypes[e];break}for(var e in a.VisaStatuses)if(d.visaDetail.VisaInfo.VisaStatusID==a.VisaStatuses[e].VisaStatusID){d.visaDetail.VisaInfo.VisaStatus=a.VisaStatuses[e];break}d.visaDetail.VisaInfo.VisaTypeID||(d.visaDetail.VisaInfo.VisaTypeID=""),d.visaDetail.VisaInfo.VisaStatusID||(d.visaDetail.VisaInfo.VisaStatusID=""),d.visaDetail.VisaInfo.CountryOfIssue||(d.visaDetail.VisaInfo.CountryOfIssue="")}a.Provider.VisaDetails=d.visaDetail,b.tempObject={},b.visibilityControl="",g.callAlertMessage("alertVisaDetailsSuccess","Visa Details updated successfully.","success",!0),FormReset($("#"+c))}else g.callAlertMessage("alertVisaDetailsError",d.status.split(","),"danger",!0)},cache:!1,contentType:!1,processData:!1})},a.TempLanguageForEdit=[],a.SelectLanguageKnown=function(b){a.TempLanguageForEdit.KnownLanguages.push({KnownLanguageID:null,Language:b.name,ProficiencyIndex:a.TempLanguageForEdit.length}),a.tempLanguages.splice(a.tempLanguages.indexOf(b),1)},a.UnselectLanguage=function(b){for(c in a.TempLanguageForEdit.KnownLanguages)a.TempLanguageForEdit.KnownLanguages[c]==b&&a.TempLanguageForEdit.KnownLanguages.splice(a.TempLanguageForEdit.KnownLanguages.indexOf(b),1);for(var c in a.Languages)a.Languages[c].name==b.Language&&a.tempLanguages.push(a.Languages[c])},a.selectedLanguage=function(b,c){a.langForPriority=b,a.selectedIndex=c},a.PriorityChange=function(b){var c=a.TempLanguageForEdit.KnownLanguages.indexOf(a.langForPriority);"increase"==b?(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c,a.TempLanguageForEdit.KnownLanguages[c-1].ProficiencyIndex=c+1,a.selectedIndex=c-1):"decrease"==b&&(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c+2,a.TempLanguageForEdit.KnownLanguages[c+1].ProficiencyIndex=c+1,a.selectedIndex=c+1),a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.getArray=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.shoLanguageList=function(a){$("#"+a).show()},a.IsExistInArray=function(a,b){var c=[];return status=!0,angular.forEach(a,function(){-1===c.indexOf(b)?c.push(b):status=!1}),status},a.ViewLanguageKnown=!0,a.LanguageKnownToggle=function(c){"EditKnowLanguage"==c?(b.visibilityControl=c,a.getLanguagesAndTempData()):b.visibilityControl=c},a.getLanguagesAndTempData=function(){if(a.TempLanguageForEdit=angular.copy(a.Provider.LanguageInfo),a.tempLanguages=angular.copy(a.Languages),a.TempLanguageForEdit){for(var b in a.TempLanguageForEdit.KnownLanguages)for(var c in a.tempLanguages)a.TempLanguageForEdit.KnownLanguages[b].Language==a.tempLanguages[c].name&&a.tempLanguages.splice(c,1);a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})}else a.TempLanguageForEdit={KnownLanguages:[]};a.langForPriority=null,a.selectedIndex={}},a.saveLanguages=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateLanguagesAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.LanguageInfo=d.languageInfo,a.TempLanguageForEdit=[],FormReset($("#"+c)),b.visibilityControl="",g.callAlertMessage("alertLanguageKnownSuccess","Languages Know updated successfully.","success",!0)):g.callAlertMessage("alertLanguageKnownError",d.status.split(","),"danger",!0)}})}}]),profileApp.directive("popover",function(){return function(a,b){b.popover()}}),profileApp.controller("DisclosureController",["$scope","$rootScope","masterDataService","messageAlertEngine",function(a,b,c,d){b.$on("ProfileDisclosure",function(b,c){a.disclosureQuestions=c}),b.$on("LoadRequireMasterData",function(){c.getMasterData("/Profile/MasterData/getAllQuestions").then(function(b){a.masterQuestions=b}),c.getMasterData("/Profile/MasterData/getAllQuestionCategories").then(function(b){a.masterQuestionCategories=b})}),a.enableSave=function(){a.isDataPresent=!0},a.disableSave=function(){a.isDataPresent=!1},a.saveQuestions=function(c,e){loadingOn();var f,g,h;f=$("#editShowDisclosureQuestions").find("form").valid(),h=$("#editShowDisclosureQuestions").find("form"),g="/Profile/DisclosureQuestion/UpdateDisclosureQuestionAsync?profileId="+profileId,a.typeOfSaveForDisclosureQuestions=e,ResetFormForValidation(h),f=h.valid(),f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.disclosureQuestions=c.disclosureQuestion,a.ErrorInDisclosureQuestions=!1,b.operateCancelControl(""),"Add"==a.typeOfSaveForDisclosureQuestions?(b.visibilityControl="addedNewDisclosureQuestions",d.callAlertMessage("addedNewDisclosureQuestions","Disclosure Questions saved successfully !!!!","success",!0)):(b.visibilityControl="updatedDisclosureQuestions",d.callAlertMessage("updatedDisclosureQuestions","Disclosure Questions updated successfully !!!!","success",!0))):(d.callAlertMessage("errorDisclosureQuestions","","danger",!0),a.errorDisclosureQuestions=c.status.split(","))
},error:function(){d.callAlertMessage("errorDisclosureQuestions","","danger",!0),a.errorDisclosureQuestions="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),profileApp.controller("educationController",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){b.$on("LoadRequireMasterData",function(){a.masterSpecialties=[],d.getMasterData("/Profile/MasterData/GetAllSpecialities").then(function(b){a.masterSpecialties=b}),a.masterSchools=[],d.getMasterData("/Profile/MasterData/GetAllSchools").then(function(b){a.masterSchools=b}),a.masterCertifications=[],d.getMasterData("/Profile/MasterData/GetAllCertificates").then(function(b){a.masterCertifications=b}),a.masterDegrees=[],d.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.masterHospitals=[],d.getMasterData("/Profile/MasterData/GetAllHospitals").then(function(b){a.masterHospitals=b})}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?e.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.SchoolInformation.City="",a.tempObject.SchoolInformation.State="",a.tempObject.SchoolInformation.Country=""},a.setAddressModels=function(b){a.tempObject.SchoolInformation.City=b.City,a.tempObject.SchoolInformation.State=b.State,a.tempObject.SchoolInformation.Country=b.Country},a.searchCumDropDown=function(a){$("#"+a).show()},a.addIntoSchoolDropDown=function(b,c){a.tempObject.SchoolInformation.SchoolName=b,$("#"+c).hide()},a.addIntoDegreeDropDown=function(b,c){a.tempObject.QualificationDegree=b,$("#"+c).hide()},a.addIntoHospitalDropDown=function(b,c){a.tempObject.HospitalName=b,$("#"+c).hide()},a.addIntoCMEDropDown=function(b,c){a.tempObject.Certification=b,$("#"+c).hide()},a.educationDetailViewModels=[],a.GraduationDetailViewModel=[],b.$on("EducationDetails",function(b,c){for(var d=0;d<c.length;d++)null!=c[d]&&(c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate),1==c[d].EducationQualificationType?a.educationDetailViewModels.push(c[d]):a.GraduationDetailViewModel.push(c[d]))}),a.saveUG=function(c,d){loadingOn();var e,g,h;"addeducationDetailViewModel"==a.visibilityControl?(h=$("#newUGFormDiv").find("form"),g="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editeducationDetailViewModel"&&(h=$("#ugEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?("addeducationDetailViewModel"==a.visibilityControl?(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels.push(c.educationDetails),b.operateCancelControl(),f.callAlertMessage("addedNewUGDetails","New Under Graduate/Professional School Details Added Successfully !!!!","success",!0)):a.visibilityControl==d+"_editeducationDetailViewModel"&&(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels[d]=c.educationDetails,b.operateViewAndAddControl(d+"_vieweducationDetailViewModel"),f.callAlertMessage("updatedUGDetails"+d,"Under Graduate/Professional School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(f.callAlertMessage("ErrorInUGDetails"+d,"","danger",!0),a.UGDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInUGDetails"+d,"","danger",!0),a.UGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.saveGraduation=function(c,d){loadingOn();var e,g,h;a.IndexValue=0,"addgraduationDetailViewModel"==a.visibilityControl?(h=$("#newGraduationFormDiv").find("form"),g="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(h=$("#graduationEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?("addgraduationDetailViewModel"==a.visibilityControl?(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel.push(c.educationDetails),b.operateCancelControl(),f.callAlertMessage("addedNewPGDetails","New Graduate/Medical School Details Added Successfully !!!!","success",!0)):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel[d]=c.educationDetails,b.operateViewAndAddControl(d+"_viewgraduationDetailViewModel"),f.callAlertMessage("updatedPGDetails"+d,"Graduate/Medical School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(f.callAlertMessage("ErrorInPGDetails"+d,"","danger",!0),a.PGDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInPGDetails"+d,"","danger",!0),a.PGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},b.$on("ECFMGDetail",function(b,c){null!=c&&(c.ECFMGIssueDate=ConvertDateFormat(c.ECFMGIssueDate),a.ecfmgDetail=c)}),a.saveECFMGDetails=function(){loadingOn();var c,d,e;"editecfmgDetail"==a.visibilityControl&&(e=$("#ecfmgEditDiv").find("form"),d="/Profile/EducationHistory/UpdateECFMGDetailAsync?profileId="+profileId),ResetFormForValidation(e),c=e.valid(),c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInUGDetails=!1,"editecfmgDetail"==a.visibilityControl?(c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),b.operateCancelControl(),a.ecfmgDetail=c.ecfmgDetails,f.callAlertMessage("addedNewECFMGDetails","ECFMG Detail Saved Successfully !!!!","success",!0)):a.visibilityControl==IndexValue+"updateecfmgDetail"&&(c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),a.ecfmgDetail=c.ecfmgDetails,b.operateViewAndAddControl(IndexValue+"!editecfmgDetail"),f.callAlertMessage("updatedECFMGDetails"+IndexValue,"ECFMG Detail Saved Successfully !!!!","success",!0)),a.datePickerReset()):(f.callAlertMessage("ErrorInECFMGDetails"+IndexValue,"","danger",!0),a.ECFMGDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInECFMGDetails"+IndexValue,"","danger",!0),a.ECFMGDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.ResidencyInternshipViewModel=[],b.$on("TrainingDetails",function(b,c){for(var d=0;d<c.length;d++)if(null!=c[d]){for(var e=0;e<c[d].ResidencyInternshipDetails.length;e++)c[d].ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].StartDate),c[d].ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].EndDate);a.ResidencyInternshipViewModel.push(c[d])}}),a.saveProgram=function(c,d){loadingOn();var e,g,h;"addresidencyInternshipViewModel"==a.visibilityControl?(h=$("#newProgramFormDiv").find("form"),g="/Profile/EducationHistory/AddTrainingDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(h=$("#programEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateTrainingDetailAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){for(var e=0;e<c.TrainingDetails.ResidencyInternshipDetails.length;e++)null!=c.TrainingDetails.ResidencyInternshipDetails&&(c.TrainingDetails.ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c.TrainingDetails.ResidencyInternshipDetails[e].StartDate),c.TrainingDetails.ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c.TrainingDetails.ResidencyInternshipDetails[e].EndDate));a.ErrorInProgramDetails=!1,"addresidencyInternshipViewModel"==a.visibilityControl?(b.visibilityControl="addedNewProgramDetails",a.ResidencyInternshipViewModel.push(c.TrainingDetails),b.operateCancelControl(),f.callAlertMessage("addedNewProgramDetails","School Details Added Successfully. Use edit action to add Residency/Internship/fellowship Details!!!","success",!0)):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(a.ResidencyInternshipViewModel[d]=c.TrainingDetails,b.operateViewAndAddControl(d+"_viewresidencyInternshipViewModel"),f.callAlertMessage("updatedProgramDetails"+d,"School Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)}else f.callAlertMessage("ErrorInProgramDetails"+d,"","danger",!0),a.ProgramDetailsErrorList=c.status.split(",")},error:function(){f.callAlertMessage("ErrorInProgramDetails"+d,"","danger",!0),a.ResidencyDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.AddView="Add",a.SetAddView=function(b){a.AddView=b},a.setPrimary=function(){try{if(a.ResidencyInternshipViewModel.length>0)for(var b=0;b<a.ResidencyInternshipViewModel.length;b++)for(var c=0;c<a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails.length;c++)a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails[c].PreferenceType="2",a.ResidencyInternshipViewModel[b].ResidencyInternshipDetails[c].Preference="Secondary"}catch(d){}},a.updateResidencyForView=function(c,d,e){loadingOn();var g,h,i,j=c.TrainingDetailID;"addresidencyForView"==a.visibilitySecondControl?(h=$("#newViewResidencyDivFor"+a.AddView+j).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j):a.visibilitySecondControl==e+"_editresidencyForView"&&(h=$("#viewResidencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j),ResetFormForValidation(h),validationStatus=h.valid(),validationStatus&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(g){if("1"==d.PreferenceType&&a.setPrimary(),"true"==g.status){if(a.ErrorInResidencyDetails=!1,"addresidencyForView"==a.visibilitySecondControl){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails.push(g.ResidencyDetails);b.operateSecondCancelControl(),f.callAlertMessage("addedNewResidencyDetailsForView","New Residency/Internship/fellowship Details Added Successfully!!!","success",!0)}else if(a.visibilitySecondControl==e+"_editresidencyForView"){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails[e]=g.ResidencyDetails,c.ResidencyInternshipDetails[e]=g.ResidencyDetails);b.operateSecondViewAndAddControl(e+"_viewresidencyForView"),f.callAlertMessage("updatedResidencyDetailsForView"+e,"Residency/Internship/fellowship Details Updated Successfully !!!!","success",!0)}a.datePickerReset(),FormReset(h)}else f.callAlertMessage("ErrorInResidencyDetailsForView"+e,"","danger",!0),a.ResidencyDetailsErrorListForView=g.status.split(",")},error:function(){f.callAlertMessage("ErrorInResidencyDetailsForView"+e,"","danger",!0),a.ResidencyDetailsErrorListForView="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.updateResidency=function(c,d,e){loadingOn();var g,h,i,j=c.TrainingDetailID;"addresidency"==a.visibilitySecondControl?(h=$("#newResidencyDivFor"+a.AddView+j).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j):a.visibilitySecondControl==e+"_editresidency"&&(h=$("#residencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),i=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),g="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+j),ResetFormForValidation(h),validationStatus=h.valid(),validationStatus&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(g){if("1"==d.PreferenceType&&a.setPrimary(),"true"==g.status){if(a.ErrorInResidencyDetails=!1,"addresidency"==a.visibilitySecondControl){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails.push(g.ResidencyDetails),c.ResidencyInternshipDetails.push(g.ResidencyDetails));b.operateSecondCancelControl(),f.callAlertMessage("addedNewResidencyDetails","New Residency/Internship/fellowship Details Added Successfully!!!","success",!0)}else if(a.visibilitySecondControl==e+"_editresidency"){g.ResidencyDetails.Specialty={ID:g.ResidencyDetails.SpecialtyID,Name:i},g.ResidencyDetails.StartDate=ConvertDateFormat(g.ResidencyDetails.StartDate),g.ResidencyDetails.EndDate=ConvertDateFormat(g.ResidencyDetails.EndDate);for(var k=0;k<a.ResidencyInternshipViewModel.length;k++)a.ResidencyInternshipViewModel[k].TrainingDetailID==j&&(a.ResidencyInternshipViewModel[k].ResidencyInternshipDetails[e]=g.ResidencyDetails,c.ResidencyInternshipDetails[e]=g.ResidencyDetails);b.operateSecondViewAndAddControl(e+"_viewresidency"),f.callAlertMessage("updatedResidencyDetails"+e,"Residency/Internship/fellowship Details Updated Successfully !!!!","success",!0)}a.datePickerReset(),FormReset(h)}else f.callAlertMessage("ErrorInResidencyDetails"+e,"","danger",!0),a.ResidencyDetailsErrorListForView=g.status.split(",")},error:function(){f.callAlertMessage("ErrorInResidencyDetails"+e,"","danger",!0),a.ResidencyDetailsErrorListForView="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.CertificationCMEViewModel=[],b.$on("CMECertifications",function(c,d){for(var e=0;e<d.length;e++)null!=d[e]&&(d[e].StartDate=ConvertDateFormat(d[e].StartDate),d[e].EndDate=ConvertDateFormat(d[e].EndDate),d[e].ExpiryDate=ConvertDateFormat(d[e].ExpiryDate),d[e].City=b.ConvertCity(d[e].City),a.CertificationCMEViewModel.push(d[e]))}),a.saveCertificate=function(c,d){loadingOn();var e,g,h;"addcertificationCMEViewModel"==a.visibilityControl?(e=$("#newCertificateFormDiv").find("form").valid(),h=$("#newCertificateFormDiv").find("form"),g="/Profile/EducationHistory/AddCMECertificationAsync?profileId="+profileId):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(e=$("#certificateEditDiv"+d).find("form").valid(),h=$("#certificateEditDiv"+d).find("form"),g="/Profile/EducationHistory/UpdateCMECertificationAsync?profileId="+profileId),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInCMEDetails=!1,"addcertificationCMEViewModel"==a.visibilityControl?(c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel.push(c.CMEDetails),b.operateCancelControl(),f.callAlertMessage("addedNewCMEDetails","New PostGraduate Training/CME Details Added Successfully!!!","success",!0)):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel[d]=c.CMEDetails,b.operateViewAndAddControl(d+"_viewcertificationCMEViewModel"),f.callAlertMessage("updatedCMEDetails"+d,"PostGraduate Training/CME Details Updated Successfully !!!!","success",!0)),a.datePickerReset(),FormReset(h)):(f.callAlertMessage("ErrorInCMEDetails"+d,"","danger",!0),a.CMEDetailsErrorList=c.status.split(","))},error:function(){f.callAlertMessage("ErrorInCMEDetails"+d,"","danger",!0),a.CMEDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.datePickerReset=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date,a.tempSecondObject.StartDate=new Date,a.tempSecondObject.EndDate=new Date,a.tempObject.ExpiryDate=new Date,a.tempObject.ECFMGIssueDate=new Date}catch(b){}}}]),profileApp.controller("identificationLicenseController",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){a.ShowRenewDivStateLicense=!1,a.RenewDivSL=function(b){a.ShowRenewDivStateLicense=null==b.CurrentIssueDate||null==b.ExpiryDate||null==b.StateLicenseDocumentPath?!1:!0},a.ShowRenewDivDEA=!1,a.RenewDivDEA=function(b){a.ShowRenewDivDEA=null==b.IssueDate||null==b.ExpiryDate||null==b.DEALicenceCertPath?!1:!0},a.ShowRenewDivCDS=!1,a.RenewDivCDS=function(b){a.ShowRenewDivCDS=null==b.IssueDate||null==b.ExpiryDate||null==b.CDSCCerificatePath?!1:!0},b.$on("LoadRequireMasterData",function(){d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){try{a.ProviderTypes=b}catch(c){}}),d.getMasterData("/Profile/MasterData/GetAllLicenseStatus").then(function(b){try{a.StateLicenseStatuses=b}catch(c){}});try{c.get("/Location/GetStates").then(function(b){a.States=b.data})}catch(b){}}),a.StateLicenses=[],b.$on("StateLicenses",function(b,c){try{a.StateLicenses=c;for(var d=0;d<a.StateLicenses.length;d++)a.StateLicenses[d].ProviderTypeID||(a.StateLicenses[d].ProviderTypeID=""),a.StateLicenses[d].StateLicenseStatusID||(a.StateLicenses[d].StateLicenseStatusID=""),a.StateLicenses[d].IssueState||(a.StateLicenses[d].IssueState=""),a.StateLicenses[d].IssueDate=ConvertDateFormat(a.StateLicenses[d].IssueDate),a.StateLicenses[d].ExpiryDate=ConvertDateFormat(a.StateLicenses[d].ExpiryDate),a.StateLicenses[d].CurrentIssueDate=ConvertDateFormat(a.StateLicenses[d].CurrentIssueDate)}catch(e){}}),a.IndexValue1="",a.saveStateLicense=function(c,d){var e,g,h,i,j,k,l;a.SLError="",i=c.ProviderTypeID,k=c.StateLicenseStatusID,a.IndexValue1=d;for(var m in a.ProviderTypes)try{if(a.ProviderTypes[m].ProviderTypeID==i){j=a.ProviderTypes[m];break}}catch(n){}for(var o in a.StateLicenseStatuses)try{if(a.StateLicenseStatuses[o].StateLicenseStatusID==k){l=a.StateLicenseStatuses[o];break}}catch(n){}if("addStateLicenseInformation"==a.visibilityControl)try{h=$("#newStateLicenseDiv").find("form"),g="/Profile/IdentificationAndLicense/AddStateLicenseAsync?profileId="+profileId}catch(n){}else if(a.visibilityControl==d+"_editStateLicenseInformation")try{h=$("#stateLicenseEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateStateLicenseAsync?profileId="+profileId}catch(n){}else if(a.visibilityControl==d+"_renewStateLicenseInformation")try{h=$("#stateLicenseRenewDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/RenewStateLicenseAsync?profileId="+profileId}catch(n){}ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{if("true"==c.status){if(c.stateLicense.ProviderType=j,c.stateLicense.StateLicenseStatus=l,c.stateLicense.IssueDate=ConvertDateFormat(c.stateLicense.IssueDate),c.stateLicense.ExpiryDate=ConvertDateFormat(c.stateLicense.ExpiryDate),c.stateLicense.CurrentIssueDate=ConvertDateFormat(c.stateLicense.CurrentIssueDate),"addStateLicenseInformation"==a.visibilityControl){a.StateLicenses.push(c.stateLicense);for(var e=0;e<a.StateLicenses.length;e++)a.StateLicenses[e].ProviderTypeID||(a.StateLicenses[e].ProviderTypeID=""),a.StateLicenses[e].StateLicenseStatusID||(a.StateLicenses[e].StateLicenseStatusID=""),a.StateLicenses[e].IssueState||(a.StateLicenses[e].IssueState="");b.operateCancelControl(""),f.callAlertMessage("addedStateLicense","State License Information Saved Successfully!!!!","success",!0)}else if(a.visibilityControl==d+"_editStateLicenseInformation"){a.StateLicenses[d]=c.stateLicense;for(var e=0;e<a.StateLicenses.length;e++)a.StateLicenses[e].ProviderTypeID||(a.StateLicenses[e].ProviderTypeID=""),a.StateLicenses[e].StateLicenseStatusID||(a.StateLicenses[e].StateLicenseStatusID=""),a.StateLicenses[e].IssueState||(a.StateLicenses[e].IssueState="");b.operateViewAndAddControl(d+"_viewStateLicenseInformation"),f.callAlertMessage("updatedStateLicense"+d,"State License Information Updated Successfully!!!!","success",!0)}else{a.StateLicenses[d]=c.stateLicense;for(var e=0;e<a.StateLicenses.length;e++)a.StateLicenses[e].ProviderTypeID||(a.StateLicenses[e].ProviderTypeID=""),a.StateLicenses[e].StateLicenseStatusID||(a.StateLicenses[e].StateLicenseStatusID=""),a.StateLicenses[e].IssueState||(a.StateLicenses[e].IssueState="");b.operateViewAndAddControl(d+"_viewStateLicenseInformation"),f.callAlertMessage("renewedStateLicense"+d,"State License Information Renewed Successfully!!!!","success",!0)}FormReset(h),a.resetDates()}else a.SLError=c.status.split(","),f.callAlertMessage("StateLicenseError","","danger",!0)}catch(g){}},error:function(){try{a.SLError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("StateLicenseError","","danger",!0)}catch(b){}}})},b.$on("LoadRequireMasterData",function(){d.getMasterData("/Profile/MasterData/GetAllDEASchedules").then(function(b){try{a.Schedules=b}catch(c){}})}),a.FederalDEA=[],b.$on("FederalDEAInformations",function(b,c){try{a.FederalDEA=c;for(var d=0;d<a.FederalDEA.length;d++)a.FederalDEA[d].IssueDate=ConvertDateFormat(a.FederalDEA[d].IssueDate),a.FederalDEA[d].ExpiryDate=ConvertDateFormat(a.FederalDEA[d].ExpiryDate)}catch(e){}}),a.IndexValue2="",a.saveFederalDEALicense=function(c,d){a.IndexValue2=d;var e,g,h;if("addDEAInformation"==a.visibilityControl)try{h=$("#newShowFederalDEALicenseDiv").find("form"),g="/Profile/IdentificationAndLicense/AddFederalDEALicenseAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editDEAInformation")try{h=$("#FederalDEALicenseEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateFederalDEALicenseAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_renewDEAInformation")try{h=$("#DEAInformationRenewDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/RenewFederalDEALicenseAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),a.DEAError="",e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.federalDea.IssueDate=ConvertDateFormat(c.federalDea.IssueDate),c.federalDea.ExpiryDate=ConvertDateFormat(c.federalDea.ExpiryDate),"addDEAInformation"==a.visibilityControl?(a.FederalDEA.push(c.federalDea),b.operateCancelControl(""),f.callAlertMessage("addedDEA","DEA information saved successfully. !!!!","success",!0)):a.visibilityControl==d+"_editDEAInformation"?(a.FederalDEA[d]=c.federalDea,b.operateViewAndAddControl(d+"_viewDEAInformation"),f.callAlertMessage("updatedDEA"+d,"DEA Information Updated Successfully!!!!","success",!0)):(a.FederalDEA[d]=c.federalDea,b.operateViewAndAddControl(d+"_viewDEAInformation"),f.callAlertMessage("renewedDEA"+d,"DEA Information Renewed Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.DEAError=c.status.split(","),f.callAlertMessage("DEAError","","danger",!0))}catch(e){}},error:function(){try{a.DEAError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("DEAError","","danger",!0)}catch(b){}}})},a.CDSCInformations=[],b.$on("CDSCInformations",function(b,c){try{a.CDSCInformations=c;for(var d=0;d<a.CDSCInformations.length;d++)a.CDSCInformations[d].IssueDate=ConvertDateFormat(a.CDSCInformations[d].IssueDate),a.CDSCInformations[d].ExpiryDate=ConvertDateFormat(a.CDSCInformations[d].ExpiryDate)}catch(e){}}),a.CDSCError="",a.IndexValue5="",a.saveCDSCInformation=function(c,d){a.IndexValue5=d;var e,g,h;if("addCDSCInformation"==a.visibilityControl)try{h=$("#newShowCDSCInformationDiv").find("form"),g="/Profile/IdentificationAndLicense/AddCDSCLicenseAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editCDSCInformation")try{h=$("#cDSCInformationEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateCDSCLicenseAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_renewCDSCInformation")try{h=$("#CDSCInformationRenewDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/RenewCDSCLicenseAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.CDSCInformation.IssueDate=ConvertDateFormat(c.CDSCInformation.IssueDate),c.CDSCInformation.ExpiryDate=ConvertDateFormat(c.CDSCInformation.ExpiryDate),"addCDSCInformation"==a.visibilityControl?(a.CDSCInformations.push(c.CDSCInformation),b.operateCancelControl(""),f.callAlertMessage("addedCDS","CDS information saved successfully. !!!!","success",!0)):a.visibilityControl==d+"_editCDSCInformation"?(a.CDSCInformations[d]=c.CDSCInformation,b.operateViewAndAddControl(d+"_viewCDSCInformation"),f.callAlertMessage("updatedCDS"+d,"CDS Information Updated Successfully!!!!","success",!0)):(a.CDSCInformations[d]=c.CDSCInformation,b.operateViewAndAddControl(d+"_viewCDSCInformation"),f.callAlertMessage("renewedCDS"+d,"CDS Information Renewed Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.CDSCError=c.status.split(","),f.callAlertMessage("CDSCError","","danger",!0))}catch(e){}},error:function(){try{a.CDSCError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("CDSCError","","danger",!0)}catch(b){}}})},a.MedicareInformations=[],b.$on("MedicareInformations",function(b,c){try{a.MedicareInformations=c;for(var d=0;d<a.MedicareInformations.length;d++)a.MedicareInformations[d].IssueDate=ConvertDateFormat(a.MedicareInformations[d].IssueDate)}catch(e){}}),a.IndexValue3="",a.saveMedicareInformation=function(c,d){a.IndexValue3=d;var e,g,h;if("addMedicareInformation"==a.visibilityControl)try{h=$("#newShowMedicareInformationDiv").find("form"),g="/Profile/IdentificationAndLicense/AddMedicareInformationAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editMedicareInformation")try{h=$("#MedicareInformationEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateMedicareInformationAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),a.MedicareError="",e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.MedicareInformation.IssueDate=ConvertDateFormat(c.MedicareInformation.IssueDate),"addMedicareInformation"==a.visibilityControl?(a.MedicareInformations.push(c.MedicareInformation),b.operateCancelControl(""),f.callAlertMessage("addedMedicare","Medicare information saved successfully. !!!!","success",!0)):(a.MedicareInformations[d]=c.MedicareInformation,b.operateViewAndAddControl(d+"_viewMedicareInformation"),f.callAlertMessage("updatedMedicare"+d,"Medicare Information Updated Successfully!!!!","success",!0)),FormReset(h),a.resetDates()):(a.MedicareError=c.status.split(","),f.callAlertMessage("MedicareError","","danger",!0))}catch(e){}},error:function(){try{a.MedicareError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("MedicareError","","danger",!0)}catch(b){}}})},a.MedicaidInformations=[],b.$on("MedicaidInformations",function(b,c){try{a.MedicaidInformations=c;for(var d=0;d<a.MedicaidInformations.length;d++)a.MedicaidInformations[d].IssueDate=ConvertDateFormat(a.MedicaidInformations[d].IssueDate)}catch(e){}}),a.IndexValue4="",a.saveMedicaidInformation=function(c,d){a.IndexValue4=d;var e,g,h;if("addMedicaidInformation"==a.visibilityControl)try{h=$("#newShowMedicaidInformationDiv").find("form"),g="/Profile/IdentificationAndLicense/AddMedicaidInformationAsync?profileId="+profileId}catch(i){}else if(a.visibilityControl==d+"_editMedicaidInformation")try{h=$("#MedicaidInformationEditDiv"+d).find("form"),g="/Profile/IdentificationAndLicense/UpdateMedicaidInformationAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),e=h.valid(),a.MedicaidError="",e&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(c.MedicaidInformation.IssueDate=ConvertDateFormat(c.MedicaidInformation.IssueDate),"addMedicaidInformation"==a.visibilityControl?(a.MedicaidInformations.push(c.MedicaidInformation),b.operateCancelControl(""),f.callAlertMessage("addedMedicaid","Medicaid information saved successfully. !!!!","success",!0)):(a.MedicaidInformations[d]=c.MedicaidInformation,b.operateViewAndAddControl(d+"_viewMedicaidInformation"),f.callAlertMessage("updatedMedicaid"+d,"Medicaid Information Updated Successfully. !!!!","success",!0)),FormReset(h),a.resetDates()):(a.MedicaidError=c.status.split(","),f.callAlertMessage("MedicaidError","","danger",!0))}catch(e){}},error:function(){try{a.MedicaidError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("MedicaidError","","danger",!0)}catch(b){}}})},a.OtherIdentificationNumbers={},b.$on("OtherIdentificationNumber",function(b,c){try{a.OtherIdentificationNumbers=c}catch(d){}}),a.showOtherId=!1,a.OtherIdError="",a.saveOtherIdentificationNumber=function(c,d){a.typeOfSave=0!=d.OtherIdentificationNumberID?"Edit":"Add",$("#"+c).valid()&&$.ajax({url:"/Profile/IdentificationAndLicense/UpdateOtherIdentificationNumberAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){try{"true"==c.status?(d.OtherIdentificationNumberID=c.OtherIdentificationNumber.OtherIdentificationNumberID,a.OtherIdentificationNumbers=angular.copy(d),b.tempObject={},"Add"==a.typeOfSave?f.callAlertMessage("addedID","Other Identification information saved successfully. !!!!","success",!0):f.callAlertMessage("updatedID","Other Identification information updated successfully. !!!!","success",!0),b.visibilityControl=""):(a.OtherIdError=c.status.split(","),f.callAlertMessage("OtherIdError","","danger",!0))}catch(e){}},error:function(){try{a.OtherIdError="Sorry for Inconvenience !!!! Please Try Again Later...",f.callAlertMessage("OtherIdError","","danger",!0)}catch(b){}}})},a.resetDates=function(){try{a.tempObject.IssueDate=new Date,a.tempObject.ExpiryDate=new Date,a.tempObject.CurrentIssueDate=new Date
}catch(b){}}}]),profileApp.controller("practiceLocationController",["$scope","$rootScope","$http","$filter","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){a.GeneralInformationEdit=!1,a.PanelToggle=function(a){$("#"+a).toggle()},a.getOrganizationById=function(b){for(org in a.organizations)if(a.organizations[org].OrganizationID===parseInt(b))return a.organizations[org];return null},b.$on("LoadRequireMasterData",function(){e.getMasterData("/Profile/MasterData/GetAllAccessibilityQuestions").then(function(b){a.masterAccessibilityQuestions=b}),e.getMasterData("/Profile/MasterData/GetAllServiceQuestions").then(function(b){a.masterServiceQuestions=b}),e.getMasterData("/Profile/MasterData/GetAllPracticeTypes").then(function(b){a.masterPracticeTypes=b}),e.getMasterData("/Profile/MasterData/GetAllOrganizations").then(function(b){a.organizations=b}),e.getMasterData("/Profile/MasterData/GetAllFacilities").then(function(b){a.facilities=b}),e.getMasterData("/Profile/MasterData/GetAllOpenPracticeStatusQuestions").then(function(b){a.masterOpenPracticeStatusQuestions=b}),e.getMasterData("/MasterData/Organization/GetGroups").then(function(b){a.groups=b}),e.getMasterData("/Profile/MasterData/GetAllBusinessContactPerson").then(function(b){console.log("============"),console.log(b),console.log("============"),a.managers=b}),e.getMasterData("/Profile/MasterData/GetAllPaymentAndRemittance").then(function(b){a.payments=b}),e.getMasterData("/Profile/MasterData/GetAllCredentialingContact").then(function(b){a.credentialingContact=b,console.log(b)})}),b.getPractitionerData=function(){console.log(profileId),e.getPractitioners("/Profile/MasterData/GetPractitionersByProviderLevel","Mid-Level",profileId).then(function(b){a.midLevelPractitioners=b}),e.getPractitioners("/Profile/MasterData/GetPractitionersByProviderLevel","Physician",profileId).then(function(b){console.log("Supervisor called"),console.log(b),a.supervisingProviders=b}),e.getProviderLevels("/Profile/MasterData/GetAllProviderLevelByProfileId",profileId).then(function(b){console.log("Provider Level  ==>>  "),console.log(b),a.providerLevel=b})},a.IsRenew=!1;var h=[],i=[];b.$on("LoadRequireMasterData",function(){e.getMasterData("/Profile/MasterData/GetAllSpecialities").then(function(b){a.masterSpecialties=b,h=angular.copy(a.masterSpecialties)}),e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.masterProviderTypes=b,i=angular.copy(a.masterProviderTypes)})}),a.setFacilities=function(b){""===b&&(a.facilities=[]),a.facilities=a.getOrganizationById(b).Facilities},a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempSecondObject.City=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempSecondObject.City="",a.tempSecondObject.State="",a.tempSecondObject.Country=""},a.setAddressModels=function(b){a.tempSecondObject.City=b.City,a.tempSecondObject.State=b.State,a.tempSecondObject.Country=b.Country},a.PracticeLocationDetails=[],a.operateViewControlPracLoc=function(c){b.tempObject={},a.visibilityControlPracLoc=c},a.operateAddControlPracLoc=function(c){b.tempObject={},b.tempSecondObject={},a.visibilityControlPracLoc=c,$(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid"),$(".input-validation-error").removeClass("input-validation-error").addClass("valid"),b.tempObject.FacilityDetail={Language:{NonEnglishLanguages:[]}},a.tempObject.PracticeOfficeHours={}},a.editGeneralInfo=function(c){a.GeneralInformationEdit=!0,b.operateSecondEditControl(null,c)},a.editGeneralCancel=function(){a.GeneralInformationEdit=!1},b.$on("PracticeLocationDetails",function(b,c){if(a.PracticeLocationDetails=c,c)for(var d=0;d<a.PracticeLocationDetails.length;d++){a.PracticeLocationDetails[d].MidlevelPractioners=[],a.PracticeLocationDetails[d].SupervisingProviders=[],a.PracticeLocationDetails[d].PracticeColleagues=[],a.PracticeLocationDetails[d].StartDate&&(a.PracticeLocationDetails[d].StartDate=ConvertDateFormat(a.PracticeLocationDetails[d].StartDate)),a.PracticeLocationDetails[d].WorkersCompensationInformation&&(a.PracticeLocationDetails[d].WorkersCompensationInformation.IssueDate=ConvertDateFormat(a.PracticeLocationDetails[d].WorkersCompensationInformation.IssueDate),a.PracticeLocationDetails[d].WorkersCompensationInformation.ExpirationDate=ConvertDateFormat(a.PracticeLocationDetails[d].WorkersCompensationInformation.ExpirationDate)),a.PracticeLocationDetails[d].OfficeHour||(a.PracticeLocationDetails[d].OfficeHour=a.PracticeLocationDetails[d].Facility.FacilityDetail.PracticeOfficeHour);for(var e=0;e<a.PracticeLocationDetails[d].PracticeProviders.length;e++)"Supervisor"==a.PracticeLocationDetails[d].PracticeProviders[e].Practice&&"Active"==a.PracticeLocationDetails[d].PracticeProviders[e].Status&&a.PracticeLocationDetails[d].SupervisingProviders.push(a.PracticeLocationDetails[d].PracticeProviders[e]),"Midlevel"==a.PracticeLocationDetails[d].PracticeProviders[e].Practice&&"Active"==a.PracticeLocationDetails[d].PracticeProviders[e].Status&&a.PracticeLocationDetails[d].MidlevelPractioners.push(a.PracticeLocationDetails[d].PracticeProviders[e]),"CoveringColleague"==a.PracticeLocationDetails[d].PracticeProviders[e].Practice&&"Active"==a.PracticeLocationDetails[d].PracticeProviders[e].Status&&a.PracticeLocationDetails[d].PracticeColleagues.push(a.PracticeLocationDetails[d].PracticeProviders[e])}console.log("New Bhagwan"),console.log(a.PracticeLocationDetails)}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.changemade=function(){$(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid"),$(".input-validation-error").removeClass("input-validation-error").addClass("valid")},a.clear=function(){a.tempSecondObject.FirstName="",a.tempSecondObject.MiddleName="",a.tempSecondObject.LastName="",a.tempSecondObject.Telephone="",a.tempSecondObject.EmailAddress="",a.tempSecondObject.Fax="",a.tempSecondObject.CountryCodeFax="",a.tempSecondObject.CountryCodeTelephone="",a.tempSecondObject.County="",a.tempSecondObject.POBoxAddress="",a.tempSecondObject.State="",a.tempSecondObject.Street="",a.tempSecondObject.City="",a.tempSecondObject.Building="",a.tempSecondObject.Country="",a.PracticeSpecialties=[],a.PracticeProviderTypes=[],a.tempSecondObject.NPINumber=""},a.clearPayment=function(){a.tempSecondObject.ElectronicBillingCapabilityYesNoOption="",a.tempSecondObject.BillingDepartment="",a.tempSecondObject.CheckPayableTo="",a.tempSecondObject.Office="",a.tempSecondObject.PaymentAndRemittancePerson.FirstName="",a.tempSecondObject.PaymentAndRemittancePerson.MiddleName="",a.tempSecondObject.PaymentAndRemittancePerson.LastName="",a.tempSecondObject.PaymentAndRemittancePerson.Telephone="",a.tempSecondObject.PaymentAndRemittancePerson.EmailAddress="",a.tempSecondObject.PaymentAndRemittancePerson.Fax="",a.tempSecondObject.PaymentAndRemittancePerson.CountryCodeFax="",a.tempSecondObject.PaymentAndRemittancePerson.CountryCodeTelephone="",a.tempSecondObject.PaymentAndRemittancePerson.County="",a.tempSecondObject.PaymentAndRemittancePerson.Country="",a.tempSecondObject.PaymentAndRemittancePerson.POBoxAddress="",a.tempSecondObject.PaymentAndRemittancePerson.State="",a.tempSecondObject.PaymentAndRemittancePerson.Street="",a.tempSecondObject.PaymentAndRemittancePerson.City="",a.tempSecondObject.PaymentAndRemittancePerson.Building="",a.tempSecondObject.PaymentAndRemittancePerson.ZipCode=""},a.provideData=function(b,c,e){var f=d("filter")(c,{EmployeeID:b})[0];a.tempSecondObject.FirstName=f.FirstName,a.tempSecondObject.MiddleName=f.MiddleName,a.tempSecondObject.LastName=f.LastName,a.tempSecondObject.Telephone=f.Telephone,a.tempSecondObject.EmailAddress=f.EmailAddress,a.tempSecondObject.Fax=f.Fax,a.tempSecondObject.CountryCodeFax=f.CountryCodeFax,a.tempSecondObject.CountryCodeTelephone=f.CountryCodeTelephone,a.tempSecondObject.POBoxAddress=f.POBoxAddress,a.tempSecondObject.Country=e.Facility.Country,a.tempSecondObject.County=e.Facility.County,a.tempSecondObject.State=e.Facility.State,a.tempSecondObject.Street=e.Facility.Street,a.tempSecondObject.City=e.Facility.City,a.tempSecondObject.Building=e.Facility.Building,a.tempSecondObject.ZipCode=e.Facility.ZipCode},a.paymentData=function(b,c){var e=d("filter")(c,{PracticePaymentAndRemittanceID:b})[0];a.tempSecondObject.ElectronicBillingCapabilityYesNoOption=e.ElectronicBillingCapabilityYesNoOption,a.tempSecondObject.BillingDepartment=e.BillingDepartment,a.tempSecondObject.CheckPayableTo=e.CheckPayableTo,a.tempSecondObject.Office=e.Office,a.tempSecondObject.PaymentAndRemittancePerson={},a.tempSecondObject.PaymentAndRemittancePerson.FirstName=e.PaymentAndRemittancePerson.FirstName,a.tempSecondObject.PaymentAndRemittancePerson.MiddleName=e.PaymentAndRemittancePerson.MiddleName,a.tempSecondObject.PaymentAndRemittancePerson.LastName=e.PaymentAndRemittancePerson.LastName,a.tempSecondObject.PaymentAndRemittancePerson.Telephone=e.PaymentAndRemittancePerson.Telephone,a.tempSecondObject.PaymentAndRemittancePerson.EmailAddress=e.PaymentAndRemittancePerson.EmailAddress,a.tempSecondObject.PaymentAndRemittancePerson.Fax=e.PaymentAndRemittancePerson.Fax,a.tempSecondObject.PaymentAndRemittancePerson.CountryCodeFax=e.PaymentAndRemittancePerson.CountryCodeFax,a.tempSecondObject.PaymentAndRemittancePerson.CountryCodeTelephone=e.PaymentAndRemittancePerson.CountryCodeTelephone,a.tempSecondObject.PaymentAndRemittancePerson.County=e.PaymentAndRemittancePerson.County,a.tempSecondObject.PaymentAndRemittancePerson.State=e.PaymentAndRemittancePerson.State,a.tempSecondObject.PaymentAndRemittancePerson.Street=e.PaymentAndRemittancePerson.Street,a.tempSecondObject.PaymentAndRemittancePerson.City=e.PaymentAndRemittancePerson.City,a.tempSecondObject.PaymentAndRemittancePerson.Building=e.PaymentAndRemittancePerson.Building,a.tempSecondObject.PaymentAndRemittancePerson.Country=e.PaymentAndRemittancePerson.Country},a.saveOfficeManager=function(c,d){var e=null,f=null,h=null;h=$("#BusinessOfficeContactPersonForm"+d),ResetFormForValidation(h),e=h.valid(),f="/Profile/PracticeLocation/AddOfficeManagerAsync?profileId="+profileId,e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(c.BusinessOfficeManagerOrStaff=d.officemanager,a.PracticeLocationDetails.push(d.practiceLocationDetail),a.managers.push(d.officemanager),b.operateSecondCancelControl(""),g.callAlertMessage("businessManagerSuccessMsg","Office manager/Business Office Staff Contact Information Updated successfully.","success",!0)):g.callAlertMessage("alertOfficeManager",d.status,"danger",!0)},error:function(){}})},a.saveBillingContact=function(c,d){var e=null,f=null,h=null;h=$("#BillingContactForm"+d),ResetFormForValidation(h),e=h.valid(),f="/Profile/PracticeLocation/AddBillingContactAsync?profileId="+profileId,e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(c.BillingContactPerson=d.billingcontact,a.PracticeLocationDetails.push(d.practiceLocationDetail),b.operateSecondCancelControl(""),g.callAlertMessage("billingContactSuccessMsg","Billing Contact Information Updated successfully.","success",!0)):g.callAlertMessage("alertBillingContact",d.status,"danger",!0)},error:function(){}})},a.addressAutocomplete1=function(b){0==b.length&&a.resetAddressModels1(),a.tempSecondObject.City=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels1(b)},a.selectedLocation1=function(b){a.setAddressModels1(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels1=function(){a.tempSecondObject.City="",a.tempSecondObject.State="",a.tempSecondObject.Country=""},a.setAddressModels1=function(b){a.tempSecondObject.City=b.City,a.tempSecondObject.State=b.State,a.tempSecondObject.Country=b.Country},a.addressAutocomplete4=function(b){0==b.length&&a.resetAddressModels4(),a.tempObject.City=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels4(b)},a.selectedLocation4=function(b){a.setAddressModels4(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels4=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels4=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.savePayment=function(a,c){var d=null,e=null,f=null;f=$("#PaymentForm"+c),ResetFormForValidation(f),d=f.valid(),e="/Profile/PracticeLocation/AddPaymentAndRemittanceAsync?profileId="+profileId,d&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.PaymentAndRemittance=c.paymentandremittance,b.operateSecondCancelControl(""),g.callAlertMessage("paymentSuccessMsg","Payment and Remittance Information Updated successfully.","success",!0)):g.callAlertMessage("alertPayment",c.status,"danger",!0)},error:function(){}})},a.addressAutocomplete2=function(b){0==b.length&&a.resetAddressModels2(),a.tempSecondObject.City=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels2(b)},a.selectedLocation2=function(b){a.setAddressModels2(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels2=function(){a.tempSecondObject.PaymentAndRemittancePerson.City="",a.tempSecondObject.PaymentAndRemittancePerson.State="",a.tempSecondObject.PaymentAndRemittancePerson.Country=""},a.setAddressModels2=function(b){a.tempSecondObject.PaymentAndRemittancePerson.City=b.City,a.tempSecondObject.PaymentAndRemittancePerson.State=b.State,a.tempSecondObject.PaymentAndRemittancePerson.Country=b.Country},a.saveFacilityInformaton=function(b,c){var d=!1,e=null,f=null;f=$("#newFacilityDataForm"+c),e="/Profile/PracticeLocation/AddFacilityAsync?profileId="+profileId,"Update"==b&&(e="/Profile/PracticeLocation/UpdateFacilityAsync?profileId="+profileId),ResetFormForValidation(f),d=f.valid(),d&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){if("true"==d.status){if("Update"==b){a.PracticeLocationDetails[c].Facility=d.facility,a.operateAddControlPracLoc(c+"_viewPracticeLOcation");for(var e=0;e<a.PracticeLocationDetails.length;e++)a.PracticeLocationDetails[e].FacilityId==d.facility.FacilityID&&(a.PracticeLocationDetails[e].Facility=d.facility,"undefined"==typeof a.PracticeLocationDetails[e].OfficeHour.AnyTimePhoneCoverage&&(a.PracticeLocationDetails[e].OfficeHour.PracticeDays=d.facility.FacilityDetail.PracticeOfficeHour.PracticeDays));a.operateCancelControl(""),g.callAlertMessage("updatedFacility","Facility Information updated successfully !!!!","success",!0)}else a.facilities.push(d.facility),a.operateAddControlPracLoc("addPracticeLocation"),g.callAlertMessage("addedNewFacility","New Facility Information saved successfully !!!!","success",!0),console.log(d.facility),a.tempSecondObject.FacilityId=d.facility.FacilityID,a.tempSecondObject.PracticeLocationCorporateName=d.facility.Name;FormReset(f)}else g.callAlertMessage("facilityDataErrorMsg",d.status,"danger",!0)},error:function(){}})},a.savePracticeLocationDetailInformaton=function(){var b=!1,c=null,d=null;d=$("#addPracticeLocationDetails"),c="/Profile/PracticeLocation/savePracticeLocationDetailInformaton?profileId="+profileId,b=d.valid(),b&&$.ajax({url:c,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(b){if("true"==b.status){null==a.PracticeLocationDetails&&(a.PracticeLocationDetails=new Array),b.practiceLocationDetail.StartDate=ConvertDateFormat(b.practiceLocationDetail.StartDate),b.practiceLocationDetail.Facility=a.getFacilityById(b.practiceLocationDetail.FacilityId);var c=$(d[0]).find($("[name='PracticingGroupId'] option:selected")).text();b.practiceLocationDetail.Group={},b.practiceLocationDetail.Group.Group={},b.practiceLocationDetail.Group.Group.Name=c,b.practiceLocationDetail.OfficeHour||(b.practiceLocationDetail.OfficeHour=b.practiceLocationDetail.Facility.FacilityDetail.PracticeOfficeHour),a.PracticeLocationDetails.push(b.practiceLocationDetail),console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),console.log(a.PracticeLocationDetails),a.operateAddControlPracLoc(a.PracticeLocationDetails.length-1+"_viewPracticeLOcation"),g.callAlertMessage("addedNewPracticeLocation","New Practice Location Information saved successfully !!!!","success",!0)}else g.callAlertMessage("addedNewPracticeLocation",b.status,"danger",!0)},error:function(){}})},a.OriginalPracticeDays=[{DayName:"Monday",DayOfWeek:0,DayOff:"NO",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]},{DayName:"Tuesday",DayOfWeek:1,DayOff:"NO",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]},{DayName:"Wednesday",DayOfWeek:2,DayOff:"NO",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]},{DayName:"Thursday",DayOfWeek:3,DayOff:"NO",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]},{DayName:"Friday",DayOfWeek:4,DayOff:"NO",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]},{DayName:"Saturday",DayOfWeek:5,DayOff:"YES",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]},{DayName:"Sunday",DayOfWeek:6,DayOff:"YES",DailyHours:[{StartTime:"08:30",EndTime:"16:30"}]}],a.resetPracticeDaysList=function(){b.tempObject.PracticeDays=a.OriginalPracticeDays},a.addDailyHour=function(a){a.push({StartTime:"08:00",EndTime:"17:00"})},a.removeDailyHour=function(a,b){a.splice(b,1)},a.dayOffToggel=function(a){a.DayOff="YES"==a.DayOff?"NO":"YES"},a.validateDailyHours=function(b,c,d,e,f){var g=!0;for(practiceDay in b){var h="",i="",j="",k="";for(dailyHour in b[practiceDay].DailyHours)if(!$("#startTime_"+practiceDay+dailyHour).prop("disabled")||!$("#endTime_"+practiceDay+dailyHour).prop("disabled")){var l=$("#startTime_"+practiceDay+dailyHour).val(),m=$("#endTime_"+practiceDay+dailyHour).val();if("Day Off"!=l&&"Day Off"!=m){var n=parseInt(l.split(":")[0]),o=parseInt(l.split(":")[1]),p=parseInt(m.split(":")[0]),q=parseInt(m.split(":")[1]);l.match(":")&&m.match(":")&&0!=l.indexOf(":")&&0!=m.indexOf(":")?n==p&&o>q||n>p?($("#msg_"+practiceDay+dailyHour).text("Start Time Should Not Be Greater than End Time."),g=!1):n==p&&o==q?($("#msg_"+practiceDay+dailyHour).text("Start Time And End Time Should Not Be Same."),g=!1):dailyHour>0&&(j==n&&k>o||j>n)?($("#msg_"+practiceDay+dailyHour).text("Start Time Should not be Less than Previous End Time."),g=!1):$("#msg_"+practiceDay+dailyHour).text(""):($("#msg_"+practiceDay+dailyHour).text("Please Enter a Valid Time."),g=!1),h=n,i=o,j=p,k=q}}}g&&"facility"==d?a.saveFacilityInformaton(f,e):g&&"ProviderOfficeHour"==d&&a.updateOfficeHours(c,e)},a.updateOfficeHours=function(a,c){var d=!1,e=null,f=null;f=$("#OfficeHourForm"+c),e="/Profile/PracticeLocation/updateOfficeHours?profileId="+profileId,ResetFormForValidation(f),d=f.valid(),d&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.OfficeHour=c.providerPracticeOfficeHours,b.operateSecondCancelControl(""),g.callAlertMessage("providerPracticeOfficeHoursSuccessMsg","Office Hour Updated successfully.","success",!0)):g.callAlertMessage("providerPracticeOfficeHoursErrorMsg",c.status,"danger",!0)},error:function(){}})},a.hideClock=function(){$(".clockface").hide()},a.tempLanguages=angular.copy(Languages),a.showLanguageList=function(a){$("#"+a).show()},a.SelectLanguage=function(c){b.tempObject.FacilityDetail.Language.NonEnglishLanguages.push({NonEnglishLanguageID:null,Language:c.name,InterpretersAvailableYesNoOption:1,StatusType:1}),a.tempLanguages.splice(a.tempLanguages.indexOf(c),1),a.searchLang="",$(".LanguageSelectAutoList").hide()},a.DeselectLanguage=function(c){b.tempObject.FacilityDetail.Language.NonEnglishLanguages.splice(b.tempObject.FacilityDetail.Language.NonEnglishLanguages.indexOf(c),1);for(var d in Languages)Languages[d].name==c.Language&&a.tempLanguages.push(Languages[d]);a.tempLanguages.sort(function(a,b){return a.name>b.name?1:a.name<b.name?-1:0})},a.RenewDiv=function(){a.IsRenew=!0},a.RenewHide=function(){a.IsRenew=!1},a.updateWorkersCompensationInformation=function(c,d){var e=!1,f=null,h=null;h=$("#WorkerCompensationForm"+d),f=0==a.IsRenew?"/Profile/PracticeLocation/UpdateWorkersCompensationInformationAsync?profileId="+profileId:"/Profile/PracticeLocation/RenewWorkersCompensationInformationAsync?profileId="+profileId,ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(a){"true"==a.status?(a.workersCompensationInformation.IssueDate=ConvertDateFormat(a.workersCompensationInformation.IssueDate),a.workersCompensationInformation.ExpirationDate=ConvertDateFormat(a.workersCompensationInformation.ExpirationDate),c.WorkersCompensationInformation=a.workersCompensationInformation,b.operateSecondCancelControl(""),g.callAlertMessage("workersCompensationInformationSuccessMsg","Worker's Compensation Information Updated successfully.","success",!0)):g.callAlertMessage("workersCompensationInformationErrorMsg",a.status,"danger",!0)},error:function(){}})},a.saveOpenPracticeStatus=function(a,c){var d=!1,e=null,f=null;f=$("#practiceOpenStatusForm"+c),e="/Profile/PracticeLocation/UpdateOpenPracticeStatusAsync?profileId="+profileId,ResetFormForValidation(f),d=f.valid(),d&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.OpenPracticeStatus=c.openPracticeStatus,b.operateSecondCancelControl(""),g.callAlertMessage("openPracticeStatusSuccessMsg","Open Practice Status Updated successfully.","success",!0)):g.callAlertMessage("openPracticeStatusErrorMsg",c.status,"danger",!0)},error:function(){}})},a.validateForAge=function(a){$formData=$("#practiceOpenStatusForm"+a),ResetFormForValidation($formData),validationStatus=$formData.valid()},b.$on("LoadRequireMasterData",function(){e.getMasterData("/MasterData/Organization/GetGroups").then(function(b){a.groups=b})}),a.getFacilityById=function(b){for(fac in a.facilities)if(a.facilities[fac].FacilityID==parseInt(b))return a.facilities[fac];return null},a.updatePracticeLocationDetailInformaton=function(b){var c=!1,d=null,e=null;e=$("#updatePracticeLocationDetails"+b),d="/Profile/PracticeLocation/updatePracticeLocationDetailInformaton?profileId="+profileId,ResetFormForValidation(e),c=e.valid(),c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.PracticeLocationDetails[b].StartDate=ConvertDateFormat(c.practiceLocationDetail.StartDate),a.PracticeLocationDetails[b].IsPrimary=c.practiceLocationDetail.IsPrimary,a.PracticeLocationDetails[b].GroupName=c.practiceLocationDetail.GroupName,a.PracticeLocationDetails[b].PrimaryYesNoOption=c.practiceLocationDetail.PrimaryYesNoOption,a.PracticeLocationDetails[b].PracticeExclusively=c.practiceLocationDetail.PracticeExclusively,a.PracticeLocationDetails[b].PracticeExclusivelyYesNoOption=c.practiceLocationDetail.PracticeExclusivelyYesNoOption,a.PracticeLocationDetails[b].CurrentlyPracticingAtThisAddress=c.practiceLocationDetail.CurrentlyPracticingAtThisAddress,a.PracticeLocationDetails[b].CurrentlyPracticingYesNoOption=c.practiceLocationDetail.CurrentlyPracticingYesNoOption,a.PracticeLocationDetails[b].SendGeneralCorrespondence=c.practiceLocationDetail.SendGeneralCorrespondence,a.PracticeLocationDetails[b].GeneralCorrespondenceYesNoOption=c.practiceLocationDetail.GeneralCorrespondenceYesNoOption,a.PracticeLocationDetails[b].PrimaryTaxId=c.practiceLocationDetail.PrimaryTaxId,a.PracticeLocationDetails[b].PrimaryTax=c.practiceLocationDetail.PrimaryTax,a.PracticeLocationDetails[b].PracticingGroupId=c.practiceLocationDetail.PracticingGroupId,a.PracticeLocationDetails[b].PracticeLocationCorporateName=c.practiceLocationDetail.PracticeLocationCorporateName,a.PracticeLocationDetails[b].Group.Group.Name=$(e[0]).find($("[name='PracticingGroupId'] option:selected")).text(),a.PracticeLocationDetails[b].Group.Group.GroupID=$(e[0]).find($("[name='PracticingGroupId'] option:selected")).val(),a.GeneralInformationEdit=!1,g.callAlertMessage("UpdatePracticeLocation","Practice Location Information updated successfully !!!!","success",!0)):g.callAlertMessage("otherInformationErrorMsg",c.status,"danger",!0)},error:function(){g.callAlertMessage("otherInformationErrorMsg","Sorry for Inconvenience !!!! Please Try Again Later...","danger",!0)}})},b.$on("LoadRequireMasterData",function(){e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b})}),a.saveMidLevel=function(b){var c=null,d=null,e=null;e=$("#addnewMidLevel"),c=e.valid(),d="/Profile/PracticeLocation/addMidLevelAsync?practiceLocationDetailID="+b+"&profileId="+profileId,c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(b){"true"==b.status&&(null===a.PracticeLocationDetails&&(a.PracticeLocationDetails=[]),a.PracticeLocationDetails.push(b.practiceLocationDetail))},error:function(){}})},a.radioOption1=function(b){a.credDropDown=!1,null!=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff&&(a.tempObject.FirstName=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff.FirstName,a.tempObject.MiddleName=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff.MiddleName,a.tempObject.LastName=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff.LastName,a.tempObject.Telephone=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff.Telephone,a.tempObject.Fax=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff.Fax,a.tempObject.EmailAddress=a.PracticeLocationDetails[b].BusinessOfficeManagerOrStaff.EmailAddress,a.tempObject.Building=a.PracticeLocationDetails[b].Facility.Building,a.tempObject.City=a.PracticeLocationDetails[b].Facility.City,a.tempObject.Country=a.PracticeLocationDetails[b].Facility.Country,a.tempObject.Street=a.PracticeLocationDetails[b].Facility.Street,a.tempObject.ZipCode=a.PracticeLocationDetails[b].Facility.ZipCode,a.tempObject.State=a.PracticeLocationDetails[b].Facility.State,a.tempObject.County=a.PracticeLocationDetails[b].Facility.County)},a.radioOption3=function(){a.credDropDown=!1,a.tempObject.FirstName="",a.tempObject.MiddleName="",a.tempObject.LastName="",a.tempObject.Telephone="",a.tempObject.Fax="",a.tempObject.EmailAddress="",a.tempObject.Building="",a.tempObject.City="",a.tempObject.Country="",a.tempObject.Street="",a.tempObject.ZipCode="",a.tempObject.State="",a.tempObject.County=""},a.radioOption2=function(){a.tempObject.FirstName="",a.tempObject.MiddleName="",a.tempObject.LastName="",a.tempObject.Telephone="",a.tempObject.Fax="",a.tempObject.EmailAddress="",a.tempObject.Building="",a.tempObject.City="",a.tempObject.Country="",a.tempObject.Street="",a.tempObject.ZipCode="",a.tempObject.State="",a.tempObject.County="",a.credDropDown=!0},a.getDropDownValue=function(b){b=d("filter")(a.credentialingContact,{EmployeeID:b})[0],a.tempObject.FirstName=b.FirstName,a.tempObject.MiddleName=b.MiddleName,a.tempObject.LastName=b.LastName,a.tempObject.Telephone=b.Telephone,a.tempObject.Fax=b.Fax,a.tempObject.EmailAddress=b.EmailAddress,a.tempObject.Building=b.Building,a.tempObject.City=b.City,a.tempObject.Country=b.Country,a.tempObject.Street=b.Street,a.tempObject.ZipCode=b.ZipCode,a.tempObject.State=b.State,a.tempObject.County=b.County},a.saveCredentialingContact=function(c){var d=!1,e=null,f=null;a.credDropDown=!1,"addCc"==a.visibilityControl?(f=$("#newShowCredentialingContactDiv").find("form"),e="/Profile/PracticeLocation/AddCredentialingContact"):"editCc"==a.visibilityControl&&(f=$("#CredentialingContactEditDiv").find("form"),e="/Profile/PracticeLocation/UpdateCredentialingContact?profileId="+profileId),ResetFormForValidation(f),d=f.valid(),d&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?("addCc"==a.visibilityControl?(a.PracticeLocationDetails[c].PrimaryCredentialingContactPerson=d.credentialingContact,b.operateCancelControl(""),g.callAlertMessage("addedNewCredentialingContactInformation","Primary Credentialing Contact added successfully !!!!","success",!0)):(a.PracticeLocationDetails[c].PrimaryCredentialingContactPerson=d.credentialingContact,b.operateCancelControl(""),g.callAlertMessage("updatedCredentialingContactInformation","Primary Credentialing Contact updated successfully !!!!","success",!0)),FormReset(f)):(g.callAlertMessage("errorCredentialingContractInformation","","danger",!0),a.errorCredentialingContractInformation=d.status.split(","))},error:function(){g.callAlertMessage("errorCredentialingContractInformation"+c,"","danger",!0),a.errorCredentialingContractInformation="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.setMidLevelPractitioner=function(b){angular.isObject(b)&&(a.tempThirdObject.FirstName=b.PersonalDetail.FirstName,a.tempThirdObject.MiddleName=b.PersonalDetail.MiddleName,a.tempThirdObject.LastName=b.PersonalDetail.LastName,a.tempThirdObject.NPINumber=b.OtherIdentificationNumber.NPINumber,$(".ProviderTypeSelectAutoList").hide())},a.resetMidLevelPractitioner=function(){a.MidLevelPractitioner={}},a.initWarning=function(b){angular.isObject(b)&&(a.tempMidLevelpractitioner=b),$("#warningModal").modal()},a.addMidlevelPractioners=function(c,d){var e=!1,f=null,h=null;h=$("#MidLevelPractitionerForm"+d),f="/Profile/PracticeLocation/AddPracticeProviderAsync",a.tempThirdObject.PracticeProviderID&&(f="/Profile/PracticeLocation/UpdatePracticeProviderAsync"),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"true"==e.status?a.tempThirdObject.PracticeProviderID?(c.MidlevelPractioners[d]=e.practiceProvider,b.operateThirdViewAndAddControl(d+"_ViewMidLevelPractitioner"),g.callAlertMessage("midlevelPractionersEditSuccessMsg","Mid-Level Practitioner Updated successfully.","success",!0)):(null==c.MidlevelPractioners&&(c.MidlevelPractioners=[]),c.MidlevelPractioners.push(e.practiceProvider),b.operateSecondCancelControl(""),a.resetMidLevelPractitioner(),g.callAlertMessage("midlevelPractionersSuccessMsg","Mid-Level Practitioner Added successfully.","success",!0)):g.callAlertMessage("midlevelPractionersErrorMsg",e.status,"danger",!0)},error:function(){}})},a.removeMidLevelPractitioner=function(a){var c=!1,e=null,f=null;f=$("#editMidlevelPractioner"),e="/Profile/PracticeLocation/RemovePracticeProviderAsync",ResetFormForValidation(f),c=f.valid(),c&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){var e=d("filter")(a.MidlevelPractioners,{PracticeProviderID:c.practiceProvider.PracticeProviderID})[0];a.MidlevelPractioners.splice(a.MidlevelPractioners.indexOf(e),1),$("#warningModal").modal("hide"),a.MidlevelPractioners.splice(),b.operateThirdCancelControl(""),g.callAlertMessage("midlevelPractionersSuccessMsg","Mid-Level Practitioner Removed successfully.","success",!0)}else g.callAlertMessage("midlevelPractionersRemoveErrorMsg",c.status,"danger",!0)},error:function(){}})},a.toggleList=function(){$(".ProviderTypeSelectAutoList").show()},a.setSupervisingProvider=function(b){angular.isObject(b)&&(a.tempThirdObject.FirstName=b.PersonalDetail.FirstName,a.tempThirdObject.MiddleName=b.PersonalDetail.MiddleName,a.tempThirdObject.LastName=b.PersonalDetail.LastName,a.tempThirdObject.NPINumber=b.OtherIdentificationNumber.NPINumber,$(".ProviderTypeSelectAutoList").hide())
},a.resetSupervisingProvider=function(){a.SupervisingProvider={}},a.initSupervisingWarning=function(b){angular.isObject(b)&&(a.tempSupervisingProvider=b),$("#supervisingWarningModal").modal()},a.addSupervisingProvider=function(c,d){var e=!1,f=null,h=null;h=$("#SupervisingProvider"+d),f="/Profile/PracticeLocation/AddPracticeProviderAsync",a.tempThirdObject.PracticeProviderID&&(f="/Profile/PracticeLocation/UpdatePracticeProviderAsync"),ResetFormForValidation(h),e=h.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"true"==e.status?a.tempThirdObject.PracticeProviderID?(c.SupervisingProviders[d]=e.practiceProvider,b.operateThirdViewAndAddControl(d+"_ViewSupervisingPractitioner"),g.callAlertMessage("supervisingProvidersEditSuccessMsg","Supervising Provider Updated successfully.","success",!0)):(null==c.SupervisingProviders&&(c.SupervisingProviders=[]),c.SupervisingProviders.push(e.practiceProvider),b.operateSecondCancelControl(""),a.resetSupervisingProvider(),g.callAlertMessage("supervisingProvidersSuccessMsg","Supervising Provider Added successfully.","success",!0)):g.callAlertMessage("supervisingProvidersErrorMsg",e.status,"danger",!0)},error:function(){}})},a.removeSupervisingProvider=function(a){var c=!1,e=null,f=null;f=$("#editSupervisingPractioner"),e="/Profile/PracticeLocation/RemovePracticeProviderAsync",ResetFormForValidation(f),c=f.valid(),c&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){var e=d("filter")(a.SupervisingProviders,{PracticeProviderID:c.practiceProvider.PracticeProviderID})[0];a.SupervisingProviders.splice(a.SupervisingProviders.indexOf(e),1),$("#supervisingWarningModal").modal("hide"),a.SupervisingProviders.splice(),b.operateThirdCancelControl(""),g.callAlertMessage("supervisingProvidersSuccessMsg","Supervising Provider Removed successfully.","success",!0)}else $("#supervisingWarningModal").modal("hide"),g.callAlertMessage("supervisingProvidersRemoveErrorMsg",c.status,"danger",!0)},error:function(){}})},a.fillCorporateName=function(b){var c=d("filter")(a.facilities,{FacilityID:b})[0];a.tempSecondObject.PracticeLocationCorporateName=c.Name},a.assignCityComponentForFacility=function(){a.tempSecondObject.City=a.tempObject.City,a.tempSecondObject.State=a.tempObject.State,a.tempSecondObject.Country=a.tempObject.Country},a.searchCumDropDown=function(a){$(a.target).parent().find(".ProviderTypeSelectAutoList").first().show()},a.showContryCodeDivForColleague=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.addIntoSupervisorDropDown=function(b){a.tempSecondObject.NPINumber=b.OtherIdentificationNumber.NPINumber,a.tempSecondObject.FirstName=b.PersonalDetail.FirstName,a.tempSecondObject.MiddleName=b.PersonalDetail.MiddleName,a.tempSecondObject.LastName=b.PersonalDetail.LastName,a.PracticeSpecialties=[];for(var c=0;c<b.SpecialtyDetails.length;c++)a.PracticeSpecialties.push({PracticeProviderSpecialtyId:null,Specialty:b.SpecialtyDetails[c].Specialty,SpecialtyID:b.SpecialtyDetails[c].SpecialtyID,StatusType:1});a.PracticeProviderTypes=[];for(var c=0;c<b.PersonalDetail.ProviderTitles.length;c++)a.PracticeProviderTypes.push({PracticeProviderTypeId:null,ProviderType:b.PersonalDetail.ProviderTitles[c].ProviderType,ProviderTypeID:b.PersonalDetail.ProviderTitles[c].ProviderTypeId,StatusType:1});for(var c=0;c<b.PracticeLocationDetails.length;c++)1==b.PracticeLocationDetails[c].PrimaryYesNoOption&&(a.tempSecondObject.Street=b.PracticeLocationDetails[c].Facility.Street,a.tempSecondObject.Building=b.PracticeLocationDetails[c].Facility.Building,a.tempSecondObject.City=b.PracticeLocationDetails[c].Facility.City,a.tempSecondObject.State=b.PracticeLocationDetails[c].Facility.State,a.tempSecondObject.ZipCode=b.PracticeLocationDetails[c].Facility.ZipCode,a.tempSecondObject.Country=b.PracticeLocationDetails[c].Facility.Country,a.tempSecondObject.County=b.PracticeLocationDetails[c].Facility.County,a.tempSecondObject.CountryCodeTelephone=b.PracticeLocationDetails[c].Facility.CountryCodeTelephone,a.tempSecondObject.Telephone=b.PracticeLocationDetails[c].Facility.Telephone);$(".ProviderTypeSelectAutoList").hide()},a.addressAutocomplete3=function(b){0==b.length&&a.resetAddressModels3(),a.tempSecondObject.City=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels3(b)},a.selectedLocation3=function(b){a.setAddressModels3(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels3=function(){a.tempSecondObject.City="",a.tempSecondObject.State="",a.tempSecondObject.Country=""},a.setAddressModels3=function(b){a.tempSecondObject.City=b.City,a.tempSecondObject.State=b.State,a.tempSecondObject.Country=b.Country},a.showProviderTypeList=function(a){$(a.target).parent().find(".ProviderTypeSelectAutoList").first().show()},a.PracticeProviderTypes=[],a.SelectProviderType=function(b){a.PracticeProviderTypes.push({PracticeProviderTypeId:null,ProviderType:b,ProviderTypeID:b.ProviderTypeID,StatusType:1}),$(".ProviderTypeSelectAutoList").hide(),a.masterProviderTypes.splice(a.masterProviderTypes.indexOf(b),1)},a.ActionProviderType=function(b){for(var c=0;c<a.PracticeProviderTypes.length;c++)a.PracticeProviderTypes[c].ProviderTypeID==b.ProviderTypeID&&(a.PracticeProviderTypes[c].StatusType=2,a.masterProviderTypes.push(b))},a.PracticeSpecialties=[],a.SelectSpecalties=function(b){a.PracticeSpecialties.push({PracticeProviderSpecialtyId:null,Specialty:b,SpecialtyID:b.SpecialtyID,StatusType:1}),$(".ProviderTypeSelectAutoList").hide(),a.masterSpecialties.splice(a.masterSpecialties.indexOf(b),1)},a.ActionSpecialty=function(b){for(var c=0;c<a.PracticeSpecialties.length;c++)a.PracticeSpecialties[c].SpecialtyID==b.SpecialtyID&&(a.PracticeSpecialties[c].StatusType=2,a.masterSpecialties.push(b))},a.setValue=function(b){a.PracticeSpecialties=[],a.PracticeProviderTypes=[];for(var c=0;c<b.PracticeProviderSpecialties.length;c++)1==b.PracticeProviderSpecialties[c].StatusType&&a.PracticeSpecialties.push({PracticeProviderSpecialtyId:b.PracticeProviderSpecialties[c].PracticeProviderSpecialtyId,Specialty:b.PracticeProviderSpecialties[c].Specialty,SpecialtyID:b.PracticeProviderSpecialties[c].SpecialtyID,StatusType:b.PracticeProviderSpecialties[c].StatusType});for(var c=0;c<b.PracticeProviderTypes.length;c++)1==b.PracticeProviderTypes[c].StatusType&&a.PracticeProviderTypes.push({PracticeProviderTypeId:b.PracticeProviderTypes[c].PracticeProviderTypeId,ProviderType:b.PracticeProviderTypes[c].ProviderType,ProviderTypeID:b.PracticeProviderTypes[c].ProviderTypeID,StatusType:b.PracticeProviderTypes[c].StatusType})},a.clearAll=function(){a.PracticeSpecialties=[],a.PracticeProviderTypes=[]},a.savePatner=function(c,e){var f=!0,j=null,k=null;k=$("#newShowPartnersDiv").find("form"),j="/Profile/PracticeLocation/AddPracticeProviderAsync",a.tempSecondObject.PracticeProviderID&&(k=$("#partnersEditDiv"+e).find("form"),j="/Profile/PracticeLocation/UpdatePracticeProviderAsync"),ResetFormForValidation(k),f=k.valid(),f&&$.ajax({url:j,type:"POST",data:new FormData(k[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(f){if("true"==f.status)if(a.tempSecondObject.PracticeProviderID){for(var j=0;j<a.PracticeSpecialties.length;j++)1==a.PracticeSpecialties[j].StatusType&&(f.practiceProvider.PracticeProviderSpecialties[j].Specialty=a.PracticeSpecialties[j].Specialty);for(var j=0;j<a.PracticeProviderTypes.length;j++)1==a.PracticeProviderTypes[j].StatusType&&(f.practiceProvider.PracticeProviderTypes[j].ProviderType=a.PracticeProviderTypes[j].ProviderType);a.masterSpecialties=h,a.masterProviderTypes=i,c.PracticeColleagues[e]=f.practiceProvider,b.operateSecondViewAndAddControl(e+"_viewPartner"),g.callAlertMessage("updatedPartnerDetails"+e,"Covering Colleagues information Updated successfully.","success",!0)}else{null==c.PracticeColleagues&&(c.PracticeColleagues=[]);for(var j=(d("filter")(c.PracticeColleagues,{PracticeProviderID:f.practiceProvider.PracticeProviderID})[0],0);j<a.PracticeSpecialties.length;j++)1==a.PracticeSpecialties[j].StatusType&&(f.practiceProvider.PracticeProviderSpecialties[j].Specialty=a.PracticeSpecialties[j].Specialty);for(var j=0;j<a.PracticeProviderTypes.length;j++)1==a.PracticeProviderTypes[j].StatusType&&(f.practiceProvider.PracticeProviderTypes[j].ProviderType=a.PracticeProviderTypes[j].ProviderType);a.masterSpecialties=h,a.masterProviderTypes=i,c.PracticeColleagues.push(f.practiceProvider),b.operateSecondCancelControl(""),a.PracticeSpecialties=[],a.PracticeProviderTypes=[],g.callAlertMessage("addedPartnerDetails","Covering Colleagues Information Added successfully.","success",!0)}else g.callAlertMessage("ErrorInPartners"+e,f.status,"danger",!0)},error:function(){}})},a.initWarningMethod=function(b){angular.isObject(b)&&(a.tempPracticeColleague=b),$("#warningModalMethod").modal()},a.removePatner=function(a){var c=!1,e=null,f=null;f=$("#editPracticeColleague"),e="/Profile/PracticeLocation/RemovePracticeProviderAsync",ResetFormForValidation(f),c=f.valid(),c&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){var e=d("filter")(a.PracticeColleagues,{PracticeProviderID:c.practiceProvider.PracticeProviderID})[0];a.PracticeColleagues.splice(a.PracticeColleagues.indexOf(e),1),$("#warningModalMethod").modal("hide"),a.PracticeColleagues.splice(),b.operateSecondCancelControl(""),g.callAlertMessage("addedPartnerDetails","Covering Colleague Removed successfully.","success",!0)}else g.callAlertMessage("ErrorInPartners",c.status,"danger",!0)},error:function(){}})}}]),profileApp.controller("professionalAppCtrl",["$scope","$rootScope","$http","messageAlertEngine",function(a,b,c,d){a.ProfessionalAffiliations=[],a.resetDates=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date}catch(b){}},a.submitButtonText="Add",b.$on("ProfessionalAffiliationInfos",function(b,c){a.ProfessionalAffiliations=c;for(var d=0;d<a.ProfessionalAffiliations.length;d++)a.ProfessionalAffiliations[d].StartDate=ConvertDateFormat(a.ProfessionalAffiliations[d].StartDate),a.ProfessionalAffiliations[d].EndDate=ConvertDateFormat(a.ProfessionalAffiliations[d].EndDate)}),a.saveProfessionalAffiliation=function(c,e){loadingOn();var f,g,h;"addpa"==a.visibilityControl?(h=$("#newShowProfessionalAffiliationDiv").find("form"),g="/Profile/ProfessionalAffiliation/AddProfessionalAffiliation?profileId="+profileId):a.visibilityControl==e+"_editpa"&&(h=$("#professionalAffiliationEditDiv"+e).find("form"),g="/Profile/ProfessionalAffiliation/UpdateProfessionalAffiliation?profileId="+profileId),ResetFormForValidation(h),f=h.valid(),f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.professionalAffiliation.StartDate=ConvertDateFormat(c.professionalAffiliation.StartDate),c.professionalAffiliation.EndDate=ConvertDateFormat(c.professionalAffiliation.EndDate),a.visibilityControl!=e+"_editpa"?(a.ProfessionalAffiliations.push(c.professionalAffiliation),b.operateCancelControl(""),d.callAlertMessage("addedNewProfessionalAffiliation","Professional Affiliation saved successfully !!!!","success",!0)):(a.ProfessionalAffiliations[e]=c.professionalAffiliation,b.operateViewAndAddControl(e+"_viewpa"),d.callAlertMessage("updatedProfessionalAffiliation"+e,"Professional Affiliation updated successfully !!!!","success",!0)),a.IsProfessionalAffiliationHasError=!1,a.resetDates(),FormReset(h)):(d.callAlertMessage("errorProfessionalAffiliation"+e,"","danger",!0),a.errorProfessionalAffiliation=c.status.split(","))},error:function(){d.callAlertMessage("errorProfessionalAffiliation"+e,"","danger",!0),a.errorProfessionalAffiliation="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),profileApp.controller("LiabilityCtrl",["$scope","$rootScope","$http","masterDataService","messageAlertEngine",function(a,b,c,d,e){a.ProfessionalLiabilityInfoes=[],a.submitButtonText="Add",a.getLocation=function(){a.tempObject.InsuranceCarrierAddressID="",a.Location=a.masterInsuranceCarriers.filter(function(b){return b.InsuranceCarrierID==a.tempObject.InsuranceCarrierID})[0]},a.getAddress=function(){a.LocationAddress=a.Location.InsuranceCarrierAddresses.filter(function(b){return b.InsuranceCarrierAddressID==a.tempObject.InsuranceCarrierAddressID})[0],a.tempObject.InsuranceCarrierAddress=a.LocationAddress},a.resetDates=function(){try{a.tempObject.OriginalEffectiveDate=new Date,a.tempObject.EffectiveDate=new Date,a.tempObject.ExpirationDate=new Date}catch(b){}},a.ShowRenewDiv=!1,a.RenewDiv=function(b){a.ShowRenewDiv=null==b.EffectiveDate||null==b.ExpirationDate||null==b.InsuranceCertificatePath?!1:!0},b.$on("LoadRequireMasterData",function(){d.getMasterData("/Profile/MasterData/GetAllInsuranceCarriers").then(function(b){a.masterInsuranceCarriers=b})}),b.$on("ProfessionalLiabilityInfoes",function(b,c){a.ProfessionalLiabilityInfoes=c,console.log("Aagaya Data"),console.log(c);for(var d=0;d<a.ProfessionalLiabilityInfoes.length;d++)a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate),a.ProfessionalLiabilityInfoes[d].EffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].EffectiveDate),a.ProfessionalLiabilityInfoes[d].ExpirationDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].ExpirationDate)}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.cancelProfessionalLiabilty=function(){setProfessionalLiabiltyCancelParameters()},a.saveProfessionalLiabilty=function(c,d){loadingOn();var f,g,h;"addLi"==a.visibilityControl?(h=$("#newShowProfessionalLiabiltyDiv").find("form"),g="/Profile/ProfessionalLiability/AddProfessionalLiabilityAsync?profileId="+profileId):a.visibilityControl==d+"_editLi"?(h=$("#professionalLiabiltyEditDiv"+d).find("form"),g="/Profile/ProfessionalLiability/UpdateProfessionalLiabilityAsync?profileId="+profileId,a.getLocation()):(h=$("#professionalLiabiltyRenewDiv"+d).find("form"),g="/Profile/ProfessionalLiability/RenewProfessionalLiabilityAsync?profileId="+profileId),ResetFormForValidation(h),f=h.valid(),f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalLiability.OriginalEffectiveDate=ConvertDateFormat(c.professionalLiability.OriginalEffectiveDate),c.professionalLiability.EffectiveDate=ConvertDateFormat(c.professionalLiability.EffectiveDate),c.professionalLiability.ExpirationDate=ConvertDateFormat(c.professionalLiability.ExpirationDate),c.professionalLiability.InsuranceCarrierAddress=a.Location.InsuranceCarrierAddresses.filter(function(a){return a.InsuranceCarrierAddressID==c.professionalLiability.InsuranceCarrierAddressID})[0];for(var f=0;f<a.masterInsuranceCarriers.length;f++)if(a.masterInsuranceCarriers[f].InsuranceCarrierID==c.professionalLiability.InsuranceCarrierID){c.professionalLiability.InsuranceCarrier=a.masterInsuranceCarriers[f];break}a.visibilityControl==d+"_editLi"?(a.ProfessionalLiabilityInfoes[d]=c.professionalLiability,b.operateViewAndAddControl(d+"_viewLi"),e.callAlertMessage("updatedProfessionalLiability"+d,"Professional Liability updated successfully !!!!","success",!0)):a.visibilityControl==d+"_RenewLiability"?(a.ProfessionalLiabilityInfoes[d]=c.professionalLiability,b.operateViewAndAddControl(d+"_viewLi"),e.callAlertMessage("renewedProfessionalLiability"+d,"Professional Liability information renewed successfully !!!!","success",!0)):(a.ProfessionalLiabilityInfoes.push(c.professionalLiability),b.operateCancelControl(""),e.callAlertMessage("addedNewProfessionalLiability","Professional Liability saved successfully !!!!","success",!0)),a.IsProfLiabilityHasError=!1,b.tempObject={},a.resetDates(),FormReset(h)}else e.callAlertMessage("errorProfessionalLiability"+d,"","danger",!0),a.errorProfessionalLiability=c.status.split(",")},error:function(){e.callAlertMessage("errorProfessionalLiability"+d,"","danger",!0),a.errorProfessionalLiability="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),$(document).ready(function(){}),profileApp.controller("ProfessionalReference",["$scope","$rootScope","$http","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f){a.ProfessionalReferences=[],b.$on("ProfessionalReferenceInfos",function(b,c){a.ProfessionalReferences=c;for(var d=0;d<a.ProfessionalReferences.length;d++)a.ProfessionalReferences[d].SpecialtyID||(a.ProfessionalReferences[d].SpecialtyID=""),a.ProfessionalReferences[d].Degree||(a.ProfessionalReferences[d].Degree="")}),a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?e.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.CountryDialCodes=countryDailCodes;var g;a.removeDegree=function(b){return(b="? undefined:undefined ?")?"Not Available":(a.tempObject.Degree=b,b)},a.SelectProviderTitle=function(b){a.tempObject.ProviderTypeID=b.ProviderTypeID},a.shoLanguageList=function(a){$("#"+a).show()},a.submitButtonText="Add",a.changeButtonText=function(){a.submitButtonText="Update"==a.submitButtonText?"Add":"Update"},a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.masterSpecialties=[],a.masterDegrees=[],a.masterProviderTypes=[],b.$on("LoadRequireMasterData",function(){d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.masterProviderTypes=b}),d.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b})}),a.saveProfessionalReference=function(c,d){loadingOn();var e,h,i,j,k,l;k=c.SpecialtyID;for(var m in a.masterSpecialties)if(a.masterSpecialties[m].SpecialtyID==k){l=a.masterSpecialties[m];break}j=c.ProviderTypeID;for(var n in a.masterProviderTypes)if(a.masterProviderTypes[n].ProviderTypeID==j){g=a.masterProviderTypes[n];break}"addpr"==a.visibilityControl?(i=$("#newProfessionalReferenceFormDiv").find("form"),h="/Profile/ProfessionalReference/AddProfessionalReference?profileId="+profileId):a.visibilityControl==d+"_editpr"&&(i=$("#professionalReferenceEditDiv"+d).find("form"),console.log(i),h="/Profile/ProfessionalReference/UpdateProfessionalReference?profileId="+profileId),ResetFormForValidation(i),e=i.valid(),e&&$.ajax({url:h,type:"POST",data:new FormData(i[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(c.professionalReference.Specialty=l,c.professionalReference.ProviderType=g,a.visibilityControl!=d+"_editpr"){a.ProfessionalReferences.push(c.professionalReference);for(var e=0;e<a.ProfessionalReferences.length;e++)a.ProfessionalReferences[e].SpecialtyID||(a.ProfessionalReferences[e].SpecialtyID=""),a.ProfessionalReferences[e].Degree||(a.ProfessionalReferences[e].Degree="");b.operateCancelControl(""),f.callAlertMessage("addedNewProfessionalReference","Professional Reference saved successfully !!!!","success",!0)}else{a.ProfessionalReferences[d]=c.professionalReference;for(var e=0;e<a.ProfessionalReferences.length;e++)a.ProfessionalReferences[e].SpecialtyID||(a.ProfessionalReferences[e].SpecialtyID=""),a.ProfessionalReferences[e].Degree||(a.ProfessionalReferences[e].Degree="");b.operateViewAndAddControl(d+"_viewpr"),f.callAlertMessage("updatedProfessionalReference"+d,"Professional Reference updated successfully !!!!","success",!0)}a.IsProfessionalReferenceHasError=!1,FormReset(i)}else f.callAlertMessage("errorProfessionalReference"+d,"","danger",!0),a.errorProfessionalReference=c.status.split(",")},error:function(){f.callAlertMessage("errorProfessionalReference"+d,"","danger",!0),a.errorProfessionalReference="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()}}]),profileApp.controller("SpecialtyController",["$scope","$rootScope","$http","masterDataService","messageAlertEngine",function(a,b,c,d,e){a.Specialties=[],a.practiceInterest={},a.masterSpecialties=[],a.masterSpecialtyBoards=[],a.ShowRenewDiv=!1,a.RenewDiv=function(b){a.ShowRenewDiv=null==b.SpecialtyBoardCertifiedDetail.LastReCerificationDate||null==b.SpecialtyBoardCertifiedDetail.ExpirationDate||null==b.SpecialtyBoardCertifiedDetail.BoardCertificatePath?!1:!0},b.$on("SpecialtyDetails",function(b,c){a.Specialties=c;for(var d=0;d<a.Specialties.length;d++)null!=a.Specialties[d].SpecialtyBoardCertifiedDetail&&(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=a.Specialties[d].SpecialtyBoardNotCertifiedDetail&&(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate))}),b.$on("PracticeInterest",function(b,c){a.practiceInterest=c}),b.$on("LoadRequireMasterData",function(){d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/getAllspecialtyBoards").then(function(b){a.masterSpecialtyBoards=b})}),a.submitButtonText="Add",a.IndexValue=0,a.saveSpecialty=function(){loadingOn();var c,d,f;f=$("#newShowSpecialtyDiv").find("form"),d="/Profile/BoardSpecialty/AddSpecialityDetailAsync?profileId="+profileId,ResetFormForValidation(f),c=f.valid();var g=$(f[0]).find($("[name='SpecialtyID'] option:selected")).text(),h=$(f[0]).find($("[name='SpecialtyBoardCertifiedDetail.SpecialtyBoardID'] option:selected")).text();c&&$.ajax({url:d,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var d=0;d<a.Specialties.length;d++)"Primary"==a.Specialties[d].SpecialtyPreference&&(a.Specialties[d].SpecialtyPreference="Secondary",a.Specialties[d].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:g},c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoard={ID:c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoardID,Name:h}),null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties.push(c.specialty),a.ErrorInSpecialtyDetails=!1,b.operateCancelControl(""),e.callAlertMessage("addedNewBoardSpecialty","Specialty Details saved successfully !!!!","success",!0)}else e.callAlertMessage("errorSpecialty","","danger",!0),a.errorSpecialty=c.status.split(",")},error:function(){e.callAlertMessage("errorSpecialty","","danger",!0),a.errorSpecialty="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.updateSpecialty=function(c,d){loadingOn();var f,g,h;if(a.visibilityControl==d+"_editboardSpecialty")try{h=$("#specialtyEditDiv"+d).find("form"),g="/Profile/BoardSpecialty/UpdateSpecialityDetailAsync?profileId="+profileId}catch(i){}else try{h=$("#specialtyRenewDiv"+d).find("form"),g="/Profile/BoardSpecialty/RenewSpecialityDetailAsync?profileId="+profileId}catch(i){}ResetFormForValidation(h),f=h.valid();var j=$(h[0]).find($("[name='SpecialtyID'] option:selected")).text(),k=$(h[0]).find($("[name='SpecialtyBoardCertifiedDetail.SpecialtyBoardID'] option:selected")).text();f&&$.ajax({url:g,type:"POST",data:new FormData(h[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var f=0;f<a.Specialties.length;f++)"Primary"==a.Specialties[f].SpecialtyPreference&&f!=d&&(a.Specialties[f].SpecialtyPreference="Secondary",a.Specialties[f].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:j},c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoard={ID:c.specialty.SpecialtyBoardCertifiedDetail.SpecialtyBoardID,Name:k}),null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties[d]=c.specialty,a.ErrorInSpecialtyDetails=!1,a.visibilityControl==d+"_editboardSpecialty"?(b.operateViewAndAddControl(d+"_viewboardSpecialty"),e.callAlertMessage("updatedBoardSpecialty"+d,"Specialty Details Updated Successfully !!!!","success",!0)):(b.operateViewAndAddControl(d+"_viewboardSpecialty"),e.callAlertMessage("renewedBoardSpecialty"+d,"Specialty Details Renewed Successfully !!!!","success",!0))}else e.callAlertMessage("errorSpecialty"+d,"","danger",!0),a.errorSpecialty=c.status.split(",")},error:function(){e.callAlertMessage("errorSpecialty"+d,"","danger",!0),a.errorSpecialty="Sorry for Inconvenience !!!! Please Try Again Later..."}}),loadingOff()},a.setPrimary=function(){try{for(var b=0;b<a.Specialties.length;b++)a.Specialties[b].PreferenceType="2"}catch(c){}},a.savePracticeInterest=function(c){loadingOn();var d,f,g;a.typeOfSaveForPracticeInterest=c.PracticeInterestID?"Edit":"Add","editpracticeInterest"==a.visibilityControl&&(g=$("#editShowPracticeInterest").find("form"),f="/Profile/BoardSpecialty/UpdatePracticeInterestAsync?profileId="+profileId),ResetFormForValidation(g),d=g.valid(),d&&($.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.practiceInterest=c.practiceInterest,b.visibilityControl="",a.ErrorInPracticeInterest=!1,"Add"==a.typeOfSaveForPracticeInterest?(b.visibilityControl="addedNewPracticeInterest",e.callAlertMessage("addedNewPracticeInterest","Practice Interest saved successfully !!!!","success",!0)):(b.visibilityControl="updatedPracticeInterest",e.callAlertMessage("updatedPracticeInterest","Practice Interest updated successfully !!!!","success",!0))):(e.callAlertMessage("errorPracticeInterest","","danger",!0),a.errorPracticeInterest=c.status.split(","))},error:function(){e.callAlertMessage("errorPracticeInterest","","danger",!0),a.errorPracticeInterest="Sorry for Inconvenience !!!! Please Try Again Later..."}}),a.changePartial=!1),loadingOff()},b.getSpecilityForThisUser=function(){return a.Specialties},a.fillPercentageOfTime=function(b){a.tempObject.PercentageOfTime="1"==b?100:50},a.fillPreferenceType=function(b){a.tempObject.PreferenceType=100==b?1:100>b&&b>=0?2:""},a.clearOtherModel=function(c){"addboardSpecialty"==b.visibilityControl&&(1==c?a.tempObject.SpecialtyBoardNotCertifiedDetail=null:a.tempObject.SpecialtyBoardCertifiedDetail=null)},a.clearOtherOptions=function(c){"addboardSpecialty"==b.visibilityControl&&(1==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):2==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):3==c?(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.RemarkForExamFail=null):(a.tempObject.SpecialtyBoardNotCertifiedDetail.ExamDate=null,a.tempObject.SpecialtyBoardNotCertifiedDetail.ReasonForNotTakingExam=null))}}]),profileApp.controller("WorkHistoryController",["$scope","$rootScope","$http","$filter","masterDataService","locationService","messageAlertEngine",function(a,b,c,d,e,f,g){a.resetDates=function(){try{a.tempObject.StartDate=new Date,a.tempObject.EndDate=new Date,a.tempObject.DischargeDate=new Date}catch(b){}},a.addressAutocomplete=function(b){0==b.length&&a.resetAddressModels(),a.tempObject.CityOfBirth=b,b.length>1&&!angular.isObject(b)?f.getLocations(b).then(function(b){a.Locations=b}):angular.isObject(b)&&a.setAddressModels(b)},a.selectedLocation=function(b){a.setAddressModels(b),$(".ProviderTypeSelectAutoList").hide()},a.resetAddressModels=function(){a.tempObject.City="",a.tempObject.State="",a.tempObject.Country=""},a.setAddressModels=function(b){a.tempObject.City=b.City,a.tempObject.State=b.State,a.tempObject.Country=b.Country},a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){changeVisibilityOfCountryCode(),$("#"+a).show()},a.currentlyWorkingChange=function(a){1==a&&(b.tempObject.EndDate=null,b.tempObject.DepartureReason=null)},a.militaryDischargeChange=function(a){"Other than honourable"!=a&&(b.tempObject.HonorableExplanation=null)},b.$on("LoadRequireMasterData",function(){e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryBranches").then(function(b){a.militaryBranches=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryRanks").then(function(b){a.militaryRanks=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryPresentDuties").then(function(b){a.militaryPresentDuties=b}),e.getMasterData("/Profile/MasterData/GetAllMilitaryDischarges").then(function(b){a.militaryDischarges=b})}),a.IndexValue=0,a.professionalWorkExperiences=[],b.$on("ProfessionalWorkExperiences",function(b,c){a.professionalWorkExperiences=c;for(var d=0;d<a.professionalWorkExperiences.length;d++)a.professionalWorkExperiences[d].StartDate=ConvertDateFormat(a.professionalWorkExperiences[d].StartDate),a.professionalWorkExperiences[d].EndDate=ConvertDateFormat(a.professionalWorkExperiences[d].EndDate)}),b.$on("CVInformation",function(b,c){a.CVInformation=c}),a.saveProfessionalWorkExperience=function(c,d){var e,f;"addProfessionalWorkExperience"==a.visibilityControl?(f=$("#newProfessionalWorkExperienceFormDiv").find("form"),e="/Profile/WorkHistory/AddProfessionalWorkExperienceAsync?profileId="+profileId):a.visibilityControl==d+"_editProfessionalWorkExperience"&&(f=$("#professionalWorkExperienceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateProfessionalWorkExperienceAsync?profileId="+profileId,ResetFormForValidation(f)),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalWorkExperience.StartDate=ConvertDateFormat(c.professionalWorkExperience.StartDate),c.professionalWorkExperience.EndDate=ConvertDateFormat(c.professionalWorkExperience.EndDate);
var e=$(f[0]).find($("[name='ProviderTypeID'] option:selected")).text();c.professionalWorkExperience.ProviderType={ProviderTypeID:c.professionalWorkExperience.ProviderTypeID,Title:e},a.visibilityControl!=d+"_editProfessionalWorkExperience"?(a.professionalWorkExperiences.push(c.professionalWorkExperience),b.visibilityControl="addedNewProfessionalWorkExperience",g.callAlertMessage("addedNewProfessionalWorkExperience","Professional Work experience Information saved successfully !!!!","success",!0)):(a.professionalWorkExperiences[d]=c.professionalWorkExperience,b.visibilityControl="updatedProfessionalWorkExperience",g.callAlertMessage("addedNewProfessionalWorkExperience","Professional Work experience Information updated successfully !!!!","success",!0)),a.IsProfessionalWorkExperienceHasError=!1,FormReset(f),a.resetDates()}else g.callAlertMessage("addedNewProfessionalWorkExperience",c.status,"danger",!0)}})},a.publicHealthServices=[],b.$on("PublicHealthServices",function(b,c){a.publicHealthServices=c;for(var d=0;d<a.publicHealthServices.length;d++)a.publicHealthServices[d].StartDate=ConvertDateFormat(a.publicHealthServices[d].StartDate),a.publicHealthServices[d].EndDate=ConvertDateFormat(a.publicHealthServices[d].EndDate)}),a.savePublicHealthService=function(c,d){var e,f;"addPublicHealthService"==a.visibilityControl?(f=$("#newPublicHealthServiceFormDiv").find("form"),e="/Profile/WorkHistory/AddPublicHealthServiceAsync?profileId="+profileId):a.visibilityControl==d+"_editPublicHealthService"&&(f=$("#publicHealthServiceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdatePublicHealthServiceAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.publicHealthService.StartDate=ConvertDateFormat(c.publicHealthService.StartDate),c.publicHealthService.EndDate=ConvertDateFormat(c.publicHealthService.EndDate),a.visibilityControl!=d+"_editPublicHealthService"?(a.publicHealthServices.push(c.publicHealthService),b.visibilityControl="addedNewPublicHealthService",g.callAlertMessage("addedNewPublicHealthService","Public Health Service Information saved successfully !!!!","success",!0)):(a.publicHealthServices[d]=c.publicHealthService,b.visibilityControl="updatedPublicHealthService",g.callAlertMessage("addedNewPublicHealthService","Public Health Service Information updated successfully !!!!","success",!0)),a.IsPublicHealthServiceHasError=!1,FormReset(f),a.resetDates()):(a.IsPublicHealthServiceHasError=!0,a.PublicHealthServiceErrorList=c.status.split(","))}}),a.resetDates())},a.workGaps=[],b.$on("WorkGaps",function(b,c){a.workGaps=c;for(var d=0;d<a.workGaps.length;d++)a.workGaps[d].StartDate=ConvertDateFormat(a.workGaps[d].StartDate),a.workGaps[d].EndDate=ConvertDateFormat(a.workGaps[d].EndDate)}),a.saveWorkGap=function(c,d){var e,f;"addWorkGap"==a.visibilityControl?(f=$("#newWorkGapFormDiv").find("form"),e="/Profile/WorkHistory/AddWorkGapAsync?profileId="+profileId):a.visibilityControl==d+"_editWorkGap"&&(f=$("#workGapEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateWorkGapAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.workGap.StartDate=ConvertDateFormat(c.workGap.StartDate),c.workGap.EndDate=ConvertDateFormat(c.workGap.EndDate),a.visibilityControl!=d+"_editWorkGap"?(a.workGaps.push(c.workGap),b.visibilityControl="addedNewWorkGap",g.callAlertMessage("addedNewWorkGap","Work Gap Information saved successfully !!!!","success",!0)):(a.workGaps[d]=c.workGap,b.visibilityControl="updatedWorkGap",g.callAlertMessage("addedNewWorkGap","Work Gap Information updated successfully !!!!","success",!0)),a.IsWorkGapHasError=!1,FormReset(f),a.resetDates()):(a.IsWorkGapHasError=!0,a.WorkGapErrorList=c.status.split(","))}})},a.militaryServiceInformations=[],b.$on("MilitaryServiceInformations",function(b,c){a.militaryServiceInformations=c;for(var d=0;d<a.militaryServiceInformations.length;d++)a.militaryServiceInformations[d].StartDate=ConvertDateFormat(a.militaryServiceInformations[d].StartDate),a.militaryServiceInformations[d].DischargeDate=ConvertDateFormat(a.militaryServiceInformations[d].DischargeDate),a.militaryServiceInformations[d].MilitaryDischarge||(a.militaryServiceInformations[d].MilitaryDischarge="")}),a.saveMilitaryServiceInformation=function(c,d){var e,f;"addMilitaryServiceInformation"==a.visibilityControl?(f=$("#newMilitaryServiceInformationFormDiv").find("form"),e="/Profile/WorkHistory/AddMilitaryServiceInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMilitaryServiceInformation"&&(f=$("#militaryServiceInformationEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateMilitaryServiceInformationAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.militaryServiceInformation.MilitaryDischarge||(c.militaryServiceInformation.MilitaryDischarge=""),c.militaryServiceInformation.StartDate=ConvertDateFormat(c.militaryServiceInformation.StartDate),c.militaryServiceInformation.DischargeDate=ConvertDateFormat(c.militaryServiceInformation.DischargeDate),a.visibilityControl!=d+"_editMilitaryServiceInformation"?(a.militaryServiceInformations.push(c.militaryServiceInformation),b.visibilityControl="addedNewMilitaryServiceInformation",g.callAlertMessage("addedNewMilitaryServiceInformation","Military Service Information saved successfully !!!!","success",!0)):(a.militaryServiceInformations[d]=c.militaryServiceInformation,b.visibilityControl="updatedMilitaryServiceInformation",g.callAlertMessage("addedNewMilitaryServiceInformation","Military Service Information updated successfully !!!!","success",!0)),a.IsMilitaryServiceInfoHasError=!1,FormReset(f),a.resetDates()):(a.IsMilitaryServiceInfoHasError=!0,a.MilitaryServiceInfoErrorList=c.status.split(","))}}),a.resetDates())}}]),profileApp.controller("hospitalcltr",["$scope","$rootScope","$http","messageAlertEngine",function(a,b,c,d){b.$on("LoadRequireMasterData",function(){c.get("/Profile/MasterData/GetAllHospitals").then(function(b){a.hospitals=b.data}),c.get("/Profile/MasterData/GetAllStaffCategories").then(function(b){a.staffCategories=b.data}),c.get("/Profile/MasterData/GetAllAdmittingPrivileges").then(function(b){a.admittingPrivileges=b.data}),c.get("/Profile/MasterData/GetAllHospitalContactPersons").then(function(b){a.ContactPersons=b.data})}),a.HaveHospitalPrivilege="True",a.HospitalPrivilegeInformations=[],a.ShowRenewDiv=!1,a.RenewDiv=function(b){a.ShowRenewDiv=null==b.AffilicationStartDate||null==b.AffiliationEndDate||null==b.HospitalPrevilegeLetterPath?!1:!0},b.$on("HospitalPrivilegeInformation",function(c,d){try{if(a.HospitalPrivilegeInformations=d,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length>0)for(var e=0;e<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;e++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate),a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate),a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].SpecialtyID||(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].SpecialtyID="")}catch(f){}}),a.locations="",a.filterData=function(b){try{a.locations=a.hospitals.filter(function(a){return a.HospitalID==b})[0].HospitalContactInfoes}catch(c){}},a.getAddress=function(b){try{a.LocationAddress=a.locations.filter(function(a){return a.HospitalContactInfoID==b})[0],a.tempObject.HospitalContactInfo=a.LocationAddress,a.contactPersons=a.LocationAddress.HospitalContactPersons}catch(c){}},a.getContactPersonDetail=function(b){try{a.contactPersonDetail=a.contactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0],a.tempObject.HospitalContactPerson=a.contactPersonDetail}catch(c){}},a.specialties=b.getSpecilityForThisUser(),a.getSpecialityForProvider=function(a){try{return b.getSpecilityForThisUser().filter(function(b){return b.Specialty.SpecialtyID==a})[0]}catch(c){}},a.getHospitalNameForProvider=function(b){try{return a.hospitals.filter(function(a){return a.HospitalID==b})[0]}catch(c){}},a.getStaffCategoryForProvider=function(b){try{return a.staffCategories.filter(function(a){return a.StaffCategoryID==b})[0]}catch(c){}},a.getHospitalLocationForProvider=function(b,c){try{return a.locations=a.hospitals.filter(function(a){return a.HospitalID==b})[0].HospitalContactInfoes,a.locations.filter(function(a){return a.HospitalContactInfoID==c})[0]}catch(d){}},a.getContactPersonForProvider=function(b){try{return a.ContactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0]}catch(c){}},a.getAdmittingPrivilageStatusForProvider=function(b){try{return a.admittingPrivileges.filter(function(a){return a.AdmittingPrivilegeID==b})[0]}catch(c){}},a.setPrimary=function(){try{for(var b=0;b<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;b++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[b].PreferenceType="2"}catch(c){}},a.indexVal="",a.visibilityControl="",a.tempObject={},a.operateViewAndAddControl=function(c){b.closeAlertMessage(),a.tempObject={},a.buttonLabel="Add",a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(d){}},a.operateEditControl=function(c,d){b.closeAlertMessage(),a.tempObject={},a.tempObject.selectedEduLocation={},a.buttonLabel="Update",a.tempObject=angular.copy(d),a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(e){}},a.operateRenewControl=function(c,d){b.closeAlertMessage(),a.tempObject={},a.tempObject.selectedEduLocation={},a.buttonLabel="Renew",a.tempObject=angular.copy(d),a.visibilityControl=c,$('[data-toggle="tooltip"]').tooltip();try{$(".fileinput-exists").find("a").trigger("click")}catch(e){}},a.operateCancelControl=function(){b.closeAlertMessage(),a.tempObject={},$(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid"),$(".input-validation-error").removeClass("input-validation-error").addClass("valid"),a.visibilityControl=""},a.message={desc:"",status:""},a.saveHopitalPrivilegeInformation=function(b){loadingOn(),a.message.desc="";var c,e;if($formDataHospitalPrivilege=$("#hospitalPrivilegeInfoForm"),c=$("#hospitalPrivilegeInfoForm").valid(),e="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeInfoAsync?profileId="+profileId,c){if("1"==b.HospitalPrivilegeYesNoOption)b.OtherAdmittingArrangements="",$($formDataHospitalPrivilege[0]).find($("[name='OtherAdmittingArrangements']")).val("");else try{a.HospitalPrivilegeInformations.HospitalPrivilegeDetails=[]}catch(f){}$.ajax({url:e,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(b){if("true"==b.status){try{a.HospitalPrivilegeInformations,a.HospitalPrivilegeInformations=angular.copy(b.hospitalPrivilegeInformation)}catch(c){}a.operateCancelControl(""),d.callAlertMessage("alertHospitalPrivilegeInformation","Hospital Privilege Information Saved Successfully!!!!","success",!0),a.resetDates()}else d.callAlertMessage("alertHospitalPrivilegeInformation",b.status,"danger",!0)},error:function(){d.callAlertMessage("alertHospitalPrivilegeInformation","Sorry for Inconvenience !!!! Please Try Again Later...","danger",!0)}})}loadingOff()},a.saveHospitalPrivilegeDetail=function(b,c){a.HospitalPrivilegeError="",a.indexVal=c;var e,f;"addhospitalPrivilegeInformation"==a.visibilityControl?(e=$("#newShowHosPrvDiv").find("form").valid(),$formDataHospitalPrivilege=$("#newShowHosPrvDiv").find("form"),f="/Profile/HospitalPrivilege/AddHospitalPrivilegeAsync?profileId="+profileId):a.visibilityControl==c+"_edithospitalPrivilegeInformation"?(e=$("#hospitalPrivilegeInformationEditDiv"+c).find("form").valid(),$formDataHospitalPrivilege=$("#hospitalPrivilegeInformationEditDiv"+c).find("form"),f="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeAsync?profileId="+profileId):(e=$("#hospitalPrivilegeInformationRenewDiv"+c).find("form").valid(),$formDataHospitalPrivilege=$("#hospitalPrivilegeInformationRenewDiv"+c).find("form"),f="/Profile/HospitalPrivilege/RenewHospitalPrivilegeAsync?profileId="+profileId),e&&$.ajax({url:f,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"1"==b.PreferenceType&&a.setPrimary(),"true"==e.status?("addhospitalPrivilegeInformation"==a.visibilityControl?(b.HospitalPrivilegeDetailID=e.id,b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.push(b),a.operateCancelControl(""),d.callAlertMessage("addedNewHospitalPrivilege","New Hospital Privilege Added Successfully !!!!","success",!0),a.tempObject={},a.tempObject={}):a.visibilityControl==c+"_edithospitalPrivilegeInformation"?(b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[c]=b,a.operateViewAndAddControl(c+"_viewhospitalPrivilegeInformation"),d.callAlertMessage("updateHospitalPrivilege"+c,"Hospital Privilege Information Updated Successfully !!!!","success",!0)):(b.Hospital.HospitalName=a.getHospitalNameForProvider(b.Hospital.HospitalID).HospitalName,b.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(b.Hospital.HospitalID,b.HospitalContactInfo.HospitalContactInfoID).LocationName,b.HospitalPrevilegeLetterPath=e.hospitalPrivilege.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[c]=b,a.operateViewAndAddControl(c+"_viewhospitalPrivilegeInformation"),d.callAlertMessage("renewHospitalPrivilege"+c,"Hospital Privilege Information Renewed Successfully !!!!","success",!0)),a.resetDates()):(d.callAlertMessage("HospitalPrivilegeError","","danger",!0),a.HospitalPrivilegeError=e.status.split(","))},error:function(){d.callAlertMessage("HospitalPrivilegeError","","danger",!0),a.HospitalPrivilegeError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.resetDates=function(){try{a.tempObject.AffilicationStartDate=new Date,a.tempObject.AffiliationEndDate=new Date}catch(b){}}}]);