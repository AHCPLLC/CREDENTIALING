@{
    ViewBag.Title = "EmailTemplate";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model AHC.CD.WebUI.MVC.Models.EmailTemplate.EmailTemplateViewModel
@section AddToHead{
    <script src="~/Scripts/Lib/Jquery/jquery-1.11.0.js"></script>
    <script src="~/Scripts/Lib/Angular/angular.min.js"></script>
    <script src="~/Scripts/Lib/Angular/ng-table.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
    <script src="~/Scripts/Lib/bootstrap-colorpicker-module.js"></script>
    <script src="~/Scripts/Lib/angular-wysiwyg.js"></script>
    <script src="~/Scripts/Custom/Email%20Template/EmailTemplate.js"></script>
    <link href="~/Content/Provider/ng-table.css" rel="stylesheet" />
    <link href="~/Content/SharedCss/Colorpicker.css" rel="stylesheet" />
}
<script>
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover();
    });
</script>
<div id="page-wrapper">
    <div class="container-fluid" ng-app="EmailTemplateApp" ng-controller="EmailTemplateController">
        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li>
                        <i class="fa fa-database"></i>  <a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/MasterDataNew">MasterDataNew</a>
                    </li>
                    <li class="active">
                        <i class="fa fa-envelope"></i> Letter Template Generator
                    </li>
                </ol>
            </div>
        </div>
        <!-- /.row -->
        <!-- Page Heading -->
        <div class="row">
            <div class="panel panel-default content-panel" id="templateList">
                <div class="panel-heading">
                    Email Templates List
                    <button data-container="body"  data-toggle="popover" popover data-placement="left" data-trigger="hover" data-content="Add Email" style=" cursor pointer; text-decoration none;" ng-class="{disabled:loadingAjax}" ng-click="AddOrSaveEmailTemplate()" class="btn btn-xs btn-primary pull-right"><i class="fa fa-plus"></i>Add New Email Template</button>
                </div>
                <div class="panel-body" ng-if="!AddNewEmailTemplate" ng-cloak>
                    <div ng-show="loadingAjax" class="progress col-lg-12" ng-cloak>
                        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                            Loading...Please wait...
                        </div>
                    </div>
                    <div ng-show="!loadingAjax && data.length<1">
                        <label>No Email Templates Available.</label>
                    </div>
                    <div ng-show="!loadingAjax && data.length>0" ng-cloak>
                        <table ng-table="tableParams" show-filter="true" class="table table-hover ng-table-resizable-columns ng-table-rowselected">
                            <tbody ng-repeat="c in $data track by $index">
                                <tr>
                                    @*<td class=" wrap-words" data-title="'Action'" header-class="text-centre" sortable="'Action'" filter="{ 'Action': 'text' }">{{c.Action}}</td>*@
                                    <td class=" wrap-words" data-title="'Title'" header-class="text-left" sortable="'Title'" filter="{ 'Title': 'text' }">{{c.Title}}</td>
                                    <td class=" wrap-words" data-title="'Description'" header-class="text-left" sortable="'Description'" filter="{ 'Description': 'text' }">{{c.Description}}</td>
                                    <td class=" wrap-words" data-title="'Subject'" header-class="text-left" sortable="'Subject'" filter="{ 'Subject': 'text' }">{{c.Subject}}</td>
                                    <td class=" wrap-words" data-title="'Action'" header-class="text-left">
                                        <button class="btn btn-xs btn-primary" tooltip data-toggle="tooltip" data-placement="left" title="Edit" ng-click="EditEmailTemplate(c);"><i class=" fa fa-edit"></i></button>
                                    </td>
                                </tr>
                                <tr ng-if="c.EditStatus">
                                    <td colspan="5" class="col-md-12">
                                        <div class="form-style">
                                            <form id="EditEmailTemplate" ng-submit="AddingEmailTemplate('EditEmailTemplate','true')">
                                                <fieldset class="">
                                                    <legend>
                                                        Edit Email Template
                                                    </legend>
                                                    <div id="newOtherLegalFormDiv">
                                                        <div class="col-lg-12 zero-padding-left-right-div ng-scope">
                                                            @Html.HiddenFor(model => model.EmailTemplateID, new { ng_value = "tempObject.EmailTemplateID" })
                                                            @Html.HiddenFor(model => model.StatusType, new { ng_value = "1" })
                                                            <div class="col-lg-12 form-group">
                                                                <label class="control-label small">Title *</label>
                                                                @Html.TextBoxFor(model => model.Title, new { @class = "form-control input-sm", data_ng_model = "tempObject.Title" })
                                                                @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
                                                            </div>
                                                            <div class="form-group col-lg-12">
                                                                <label class="control-label small">Description</label>
                                                                <div>
                                                                    @Html.TextAreaFor(model => model.Description, new { style = "width:100%;resize: vertical;", data_ng_model = "tempObject.Description" })
                                                                    @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="clearfix">
                                                            </div>
                                                            <div class="form-group col-md-12">
                                                                <label class="control-label small">Subject *</label>
                                                                <div>
                                                                    @Html.TextBoxFor(model => model.Subject, new { @class = "form-control input-sm", data_ng_model = "tempObject.Subject" })
                                                                    @Html.ValidationMessageFor(model => model.Subject, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="clearfix">
                                                            </div>
                                                            <div class="col-md-12 form-group">
                                                                <label class="control-label small">Body *</label>
                                                                <wysiwyg textarea-id="wysiwygBody" textarea-class="form-control wrap-words" textarea-height="400px" textarea-style="width:100%;resize: none;overflow-y: scroll;" textarea-name="wysiwygBody" textarea-required ng-model="tempObject.Body" enable-bootstrap-title="true"></wysiwyg>
                                                                @Html.HiddenFor(model => model.Body, new { ng_value = "tempObject.Body" })
                                                                @Html.ValidationMessageFor(model => model.Body, "", new { @class = "text-danger" })
                                                            </div>
                                                            <div class="col-md-12 form-group">
                                                                <button type="button" class="btn btn-warning btn-sm" ng-click="EditCancle(tempObject);">Cancel</button>
                                                                <button id="saveButton" type="submit" class="btn btn-primary btn-sm pull-right">Update</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-lg-12">
                        <div ng-if="activeMessageDiv=='EmailTemplateMessage'" class="col-lg-12 alert alert-{{messageType}}" role="alert">
                            <button ng-click="closeAlertMessage()" class="close"><span>&times;</span></button>
                            {{messageDesc}}
                        </div>
                    </div>
                </div>
                <div class="panel-body" ng-if="AddNewEmailTemplate" ng-cloak>
                    <div id="AddNewEmailTemplate">
                        <!---AddEmailTemplate partial starts here-->
                        @Html.Partial("_AddNewEmailTemplate")
                        <!---AddEmailTemplate partial ends here-->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
