@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section AddToHead{
    @Scripts.Render("~/bundles/jquery")

    @Scripts.Render("~/bundles/angular")

    <script src="~/Areas/Profile/Scripts/JavaScripts/LocationTracker.js"></script>
    <link href="~/Content/SharedFonts/font-awesome-4.1.0/css/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/SharedFonts/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" />

    <script>
        $(function () {
            $("#sidemenu").addClass("menu-in");
            $("#page-wrapper").addClass("menuup");
            $("#menu-toggle").toggleClass("btn-menuup");
        });

    </script>

    <style>
        table {
            table-layout: fixed;
        }

            table th, table td {
                overflow: hidden;
                word-wrap: break-word;
            }
    </style>




}

<div id="page-wrapper" ng-app="locationApp" ng-controller="locationController" ng-cloak>
    <div class="container-fluid wrap-words">
        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li class="active">
                        <i class="fa fa-list"></i>
                        Location Tracker
                    </li>
                </ol>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4">
                <div class="input-group">
                    <div class="input-group-btn">
                        <button type="button" class="btn btn-default btn-sm dropdown-toggle" ng-init="selectedOption = 'Location'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{selectedOption}} <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a ng-click="selectedOption = 'Provider';searchFor = ''; error = false" href="#">Provider</a></li>
                            <li><a ng-click="selectedOption = 'Location';searchFor = ''; error = false" href="#">Location</a></li>
                        </ul>
                    </div>
                    <input type="text" class="form-control input-sm" placeholder="Search for..." name="search" ng-change="errorText=false" ng-model="searchFor" />
                    <span class="input-group-btn">
                        <button class="btn btn-primary btn-sm" ng-click="getDetails(searchFor)" id="searchbtn" type="button">Go!</button>{{selectedOption}}
                    </span>
                </div>
                <div class="text-danger" ng-if="error">Please select an option</div>
                <div class="text-danger" ng-if="errorText">Please provide your input to search</div>
                <div class="clearfix"></div><br />
                <div class="progress col-lg-12" ng-show="progressbar" ng-cloak>
                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        Loading...Please wait...
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div>
                <div class="col-lg-10 pull-right" ng-if="providerName != ''">Results For : {{providerName}}</div>
                <button ng-if="providerName != '' && providersList.length != 0" class="btn btn-info btn-xs" ng-click="getDetails(previousSearchString)" type="button" data-container="body" data-toggle="popover" popover data-placement="left" data-trigger="hover" data-content="Back" title="Back"><i class="fa fa-chevron-left"></i></button>
            </div>
            <div ng-if="showProviderDetails" class="row form-style">
                <fieldset>
                    <legend>Provider Information</legend>
                    <table class="table table-hover">
                        <thead>
                            <tr class="small">
                                <th>Title</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th class="col-lg-2">Action</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="profile in providersList track by $index">
                            <tr class="small">
                                <td>{{profile.PersonalDetail.ProviderTitles[0].ProviderType.Title || 'Not Available'}}</td>
                                <td>{{profile.PersonalDetail.FirstName}}</td>
                                <td>{{profile.PersonalDetail.LastName}}</td>
                                <td><a href="#" tooltip data-toggle="tooltip" ng-click="getPracticeLocations(profile)" data-placement="left" title="View Practice Location" class="label label-info pull-left"><i class="fa fa-2x fa-chevron-circle-right"></i></a></td>
                                @*<span ng-if="ld.LicenseStatus.ValidLicense > 0" class="label label-info" tooltip data-toggle="tooltip" data-placement="right" title="Upcoming Renewals">{{ld.LicenseStatus.ValidLicense}}</span>*@
                            </tr>
                            <tr ng-if="providersList.length == 0"><td>No Data Available</td></tr>
                        </tbody>
                    </table>
                    <span ng-if="providersList.length == 0">No Data Available</span>
                </fieldset>
            </div>
            <div class="clearfix"></div><br />
            <div ng-if="showLocationDetails" class="row form-style">
                <fieldset>
                    <legend>Location Information</legend>
                    <table class="table table-hover">
                        <thead>
                            <tr class="small">
                                <th>Facility Name</th>
                                @*<th>City</th>
            <th>State</th>
            <th>Country</th>*@
                                <th>Address</th>
                                <th class="col-lg-2">Action</th>
                            </tr>
                        </thead>
                        <tbody ng-repeat="place in locationList track by $index">
                            <tr class="small">
                                <td>{{place.FacilityName}}</td>
                                @*<td>{{place.City}}</td>
            <td>{{place.State}}</td>
            <td>{{place.Country}}</td>*@
                                <td>{{place.Building}}, {{place.Street}}, {{place.City}}, {{place.State}}, {{place.Country}}</td>
                                <td><a href="#" ng-click="getProvidersList(place)" data-toggle="tooltip" data-placement="left" title="View Providers" class="btn btn-xs btn-info pull-left"><i class="fa fa-2x fa-chevron-circle-right"></i></a></td>
                            </tr>
                            <tr ng-if="locationList.length == 0"><td>No Data Available</td></tr>
                        </tbody>
                    </table>
                    <span ng-if="locationList.length == 0">No Data Available</span>
                </fieldset>

            </div>
        </div>
        <div class="col-lg-8">
            <div class="progress" ng-show="detailprogressbar" ng-cloak>
                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                    Loading...Please wait...
                </div>
            </div>
            <div ng-if="showLocationList">
                @Html.Partial("~/Areas/Profile/Views/LocationTracker/_PracticeLocationList.cshtml")
            </div>
        </div>


    </div>
</div>

<div id="hiddenPrintDiv" style="display:none;">

</div>

