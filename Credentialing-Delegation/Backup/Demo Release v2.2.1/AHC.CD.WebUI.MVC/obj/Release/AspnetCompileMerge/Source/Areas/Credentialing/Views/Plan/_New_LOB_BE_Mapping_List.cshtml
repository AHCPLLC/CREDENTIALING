
<div class="panel-group">
    <div class="form-style">
        <div id="profref" class="panel-body">
            <div class="col-lg-12 zero-padding-left-right-div">
                <table ng-if="tempObject.PlanLOBs.length > 0 " class="table table-bordered table-condensed table-striped customtbodyStyle zero-padding-left-right-div">
                    <thead>
                        <tr>
                            <th class="col-md-2">LOB Name</th>
                            <th class="col-md-3">Sub Plan Name</th>
                            <th class="col-md-2">Contact Person Name</th>
                            <th class="col-md-2">Address Detail</th>
                            <th ng-if="!PlanIsEdit" class="col-md-3">Action</th>
                        </tr>
                    </thead>
                    <tbody ng-repeat="plob in tempObject.PlanLOBs track by $index" ng-init="parentindex=$index">
                        <tr>
                            <td>{{plob.LOB.LOBName}}</td>
                            <td><span ng-repeat="sub in plob.SubPlans">{{sub.SubPlanName}}&nbsp;&nbsp;</span></td>
                            <td><span ng-repeat="con in plob.ContactDetails">{{con.ContactPersonName}}&nbsp;&nbsp;</span></td>
                            <td ng-if="!PlanIsEdit">
                                <span ng-repeat="addr in plob.AddressDetails">
                                    {{addr.Street}}{{addr.Appartment}} {{addr.City}} {{addr.State}}
                                    {{addr.ZipCode}}  {{addr.Country}}  {{addr.County}}&nbsp;&nbsp;
                                </span>
                            </td>
                            <td ng-if="PlanIsEdit">
                                <span ng-repeat="addr in plob.Locations">
                                    {{addr.Street}}{{addr.Appartment}} {{addr.City}} {{addr.State}}
                                    {{addr.ZipCode}}  {{addr.Country}}  {{addr.County}}&nbsp;&nbsp;
                                </span>
                            </td>
                            <td ng-if="!PlanIsEdit">
                                <a ng-hide="visibilityControl == parentindex+'EditLOB'" ng-click="EditLOB(parentindex+'EditLOB', plob,$index);" class="btn btn-xs btn-primary" tooltip data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-edit"></i></a>
                                <a ng-hide="visibilityControl == parentindex+'EditLOB'" ng-click="RemoveLOB($index, plob);" class="btn btn-xs btn-danger" tooltip data-toggle="tooltip" data-placement="right" title="Remove"><i class="fa fa-remove"></i></a>
                                <a ng-if="$index == tempObject.PlanLOBs.length - 1" ng-hide="visibilityControl == parentindex+'EditLOB'" ng-click="AddNewLOB(tempObject.PlanLOBs.length+'EditLOB')" class="btn btn-xs btn-success" tooltip data-toggle="tooltip" data-placement="right" title="Add New"><i class="fa fa-plus"></i></a>
                                @*<a ng-if="visibilityControl == parentindex+'EditLOB' && IsNewLOB" ng-click="CancelNewLOBEdit();" class="btn btn-xs btn-warning">cancel</a>
            <a ng-if="visibilityControl == parentindex+'EditLOB' && !IsNewLOB" ng-click="CancelLOBEdit();" class="btn btn-xs btn-warning">cancel</a>
            <a ng-if="visibilityControl == parentindex+'EditLOB'" ng-click="SaveLOB(parentindex ,tempLob);" class="btn btn-xs btn-primary">Save</a>*@
                            </td>
                        </tr>
                        <tr ng-show="visibilityControl == parentindex+'EditLOB'">
                            <td colspan="5" class="editTableDataStyle">
                                <fieldset>
                                    <legend>
                                        Edit LOB Information
                                    </legend>
                                    @Html.Partial("_LOBDetail")
                                </fieldset>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="panel panel-default">
                <div class="panel-heading">
                    {{ConfirmTitle}}
                    <button type="button" ng-disabled="saving" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                </div>
                <div class="panel-body">
                    {{ConfirmMessage}}
                </div>
                <div class="panel-footer">
                    <div class="clearfix">
                        <a ng-if="!PlanIsEdit" class="btn btn-primary btn-sm pull-right" ng-click="saving = true; confirmPlan();" ng-disabled="saving">Yes</a>
                        <a ng-if="PlanIsEdit" class="btn btn-primary btn-sm pull-right" ng-click="saving = true; UpdatePlan(tempObject);" ng-disabled="saving">Yes</a>
                        <button type="button" class="btn btn-default btn-sm pull-right" style="margin-right: 6px;" data-dismiss="modal" ng-disabled="saving">No</button>
                        <div class="pull-right" style="margin: 3px;">
                            <saving></saving>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-12">
        <input type="button" value="Back" ng-click="cancelNewPlanLOB(0)" class="btn btn-warning btn-sm pull-left" />
        <input ng-if="!PlanIsEdit" type="button" value="Save" ng-click="confirmationAddPlan()" class="btn btn-success btn-sm pull-right" />
        <input ng-if="PlanIsEdit" type="button" value="Update" ng-click="confirmationUpdatePlan()" class="btn btn-primary btn-sm pull-right" />
    </div>
</div>

