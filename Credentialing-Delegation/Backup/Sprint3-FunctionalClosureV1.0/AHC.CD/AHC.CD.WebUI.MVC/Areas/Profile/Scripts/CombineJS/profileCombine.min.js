profileApp.service("dynamicFormGenerateService",["$compile",function(a){this.getForm=function(b,c){return a(c)(b)}}]),profileApp.controller("profileDemographicsController",["$scope","$rootScope","$http","masterDataService","locationService",function(a,b,c,d,e){$(document).ready(function(){$("#Loading_Message").text("Gathering Profile Data..."),c({method:"GET",url:"/Profile/MasterProfile/get?profileId="+profileId}).success(function(a){try{for(key in a)b.$emit(key,a[key]);$("#Loading_Message").text("Inserting Profile Data..."),$("#loadingData").hide("fast")}catch(c){$("#loadingData").hide("fast")}}).error(function(){$("#loadingData").hide("fast")})}),a.Provider={},a.message={},b.$on("ProfilePhotoPath",function(b,c){a.Provider.ProfilePhotoPath=c}),b.$on("PersonalDetail",function(b,c){a.Provider.PersonalDetails=c}),b.$on("OtherLegalNames",function(b,c){if(c.length>0)for(var d in c)c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate);a.Provider.OtherLegalNames=c}),b.$on("HomeAddresses",function(b,c){if(c.length>0)for(var d in c)c[d].LivingEndDate=ConvertDateFormat(c[d].LivingEndDate),c[d].LivingFromDate=ConvertDateFormat(c[d].LivingFromDate);a.HomeAddresses=c}),b.$on("ContactDetail",function(b,c){a.Provider.ContactDetails=c}),b.$on("PersonalIdentification",function(b,c){a.Provider.PersonalIdentification=c}),b.$on("BirthInformation",function(b,c){c&&(c.DateOfBirth=ConvertDateFormat(c.DateOfBirth)),a.Provider.BirthInformation=c}),b.$on("VisaDetail",function(b,c){c&&c.VisaInfo&&(c.VisaInfo.VisaExpirationDate=ConvertDateFormat(c.VisaInfo.VisaExpirationDate)),a.Provider.VisaDetails=c}),b.$on("LanguageInfo",function(b,c){a.Provider.LanguageInfo=c}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),d.getMasterData("/Profile/MasterData/getallvisatypes").then(function(b){a.VisaTypes=b}),d.getMasterData("/Profile/MasterData/getallvisastatus").then(function(b){a.VisaStatuses=b}),a.Languages=Languages,a.CountryDialCodes=countryDailCodes,a.CountryOfissue=CountryOfissue,a.PreferredContacts=[{PreferredContactID:null,ContactType:"Home Phone",PreferredWrittenContactType:1,StatusType:1,PreferredIndex:1},{PreferredContactID:null,ContactType:"Fax",PreferredWrittenContactType:2,StatusType:1,PreferredIndex:2},{PreferredContactID:null,ContactType:"Mobile",PreferredWrittenContactType:3,StatusType:1,PreferredIndex:3},{PreferredContactID:null,ContactType:"Email",PreferredWrittenContactType:4,StatusType:1,PreferredIndex:4},{PreferredContactID:null,ContactType:"Pager",PreferredWrittenContactType:5,StatusType:1,PreferredIndex:5}],a.addressHomeAutocomplete=function(b){2!=b.length||angular.isObject(b)?angular.isObject(b)&&(a.tempObject||(a.tempObject={}),a.tempObject.City=b.City,a.tempObject.ZipCode=b.Zipcode,a.tempObject.State=b.State,a.tempObject.Country=b.Country,a.tempObject.County=b.County):a.Locations=e.getLocations(b)},a.addressAutocompleteForBirthInformation=function(b){b.length>2&&!angular.isObject(b)?a.Locations=e.getLocations(b):angular.isObject(b)&&(a.tempObject||(a.tempObject={}),a.tempObject.CityOfBirth=b.City,a.tempObject.StateOfBirth=b.State,a.tempObject.CountryOfBirth=b.Country,a.tempObject.CountyOfBirth=b.County)},a.ViewPersonalDetails=!0,a.PersonalDetailsToggle=function(){a.ViewPersonalDetails?(a.ViewPersonalDetails=!1,a.getProviderTypesAndTempData()):a.ViewPersonalDetails=!0},a.getProviderTypesAndTempData=function(){if(a.TempPersonalDetailsForEdit=angular.copy(a.Provider.PersonalDetails),a.tempProviderTypes=angular.copy(a.ProviderTypes),a.TempPersonalDetailsForEdit.ProviderTitles)for(var b in a.TempPersonalDetailsForEdit.ProviderTitles)for(var c in a.tempProviderTypes)a.TempPersonalDetailsForEdit.ProviderTitles[b].ProviderType.ProviderTypeID==a.tempProviderTypes[c].ProviderTypeID&&a.tempProviderTypes.splice(c,1);else a.TempPersonalDetailsForEdit.ProviderTitles=[]},a.SelectProviderType=function(b){a.TempPersonalDetailsForEdit.ProviderTitles.push({ProviderType:b,ProviderTitleID:null,ProviderTypeId:b.ProviderTypeID,StatusType:1}),a.tempProviderTypes.splice(a.tempProviderTypes.indexOf(b),1)},a.ActionProviderType=function(b,c){"remove"==c?(a.TempPersonalDetailsForEdit.ProviderTitles.splice(a.TempPersonalDetailsForEdit.ProviderTitles.indexOf(b),1),a.tempProviderTypes.push(b.ProviderType)):"deactivate"==c?b.StatusType=2:"activate"==c&&(b.StatusType=1)},a.ProfileUpload=function(c){if(ResetFormForValidation($("#"+c)),$("#"+c).valid()){var d=$("#ProfilePic")[0];$.ajax({url:"/Profile/Demographic/FileUploadAsync?profileId="+profileId,type:"POST",data:new FormData(d),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl=""):alert(c.status)}})}},a.ProfilePictureRemove=function(c){$.ajax({url:"/Profile/Demographic/FileRemoveAsync?profileId="+profileId,type:"POST",data:new FormData(c),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.Provider.ProfilePhotoPath=c.ProfileImagePath,b.visibilityControl=""):alert(c.status)}})},a.DemographicsUpdatePersonalDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdatePersonalDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){if("true"==d.status){if(d.personalDetail.ProviderTitles.length>0)for(var e in d.personalDetail.ProviderTitles)for(var f=0;f<a.ProviderTypes.length;f++)d.personalDetail.ProviderTitles[e].ProviderTypeId==a.ProviderTypes[f].ProviderTypeID&&1==d.personalDetail.ProviderTitles[e].StatusType?d.personalDetail.ProviderTitles[e].ProviderType=a.ProviderTypes[f]:d.personalDetail.ProviderTitles[e].ProviderTypeId==a.ProviderTypes[f].ProviderTypeID&&2==d.personalDetail.ProviderTitles[e].StatusType&&d.personalDetail.ProviderTitles.splice(d.personalDetail.ProviderTitles[e],1);a.Provider.PersonalDetails=d.personalDetail,a.message.status="success",a.message.desc="Personal Details updated successfully.",b.callAlert("alertPersonalDetailsSuccess"),FormReset($("#"+c)),a.ViewPersonalDetails=!0}else a.message.status="danger",a.message.desc=d.status.split(","),b.callAlert("alertPersonalDetailsError")}})},a.saveOtherLegalName=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames.push(c.otherLegalName),b.tempObject={},b.visibilityControl="",FormReset(d),a.message.status="success",a.message.desc="Other Legal Name saved successfully.",b.callAlert("alertOtherLegalNameSuccess")):(a.message.status="danger",a.message.desc=c.status.split(","),b.callAlert("alertOtherLegalNameError"))}})},a.updateOtherLegalName=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateOtherLegalNameAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.otherLegalName.EndDate=ConvertDateFormat(c.otherLegalName.EndDate),c.otherLegalName.StartDate=ConvertDateFormat(c.otherLegalName.StartDate),a.Provider.OtherLegalNames[d]=c.otherLegalName,b.visibilityControl="",FormReset(e),a.message.status="success",a.message.desc="Other Legal Name updated successfully.",b.callAlert("alertOtherLegalNameSuccess"+d)):(a.message.status="danger",a.message.desc=c.status.split(","),b.callAlert("alertOtherLegalNameError"+d))}})},a.saveHomeAddress=function(c){var d=$("#"+c).find("form");ResetFormForValidation(d),d.valid()&&$.ajax({url:"/Profile/Demographic/AddHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(d[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.homeAddress.AddressPreferenceType)for(var e in a.HomeAddresses)a.HomeAddresses[e].AddressPreferenceType=2,a.HomeAddresses[e].AddressPreference="Secondary";c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),a.HomeAddresses.push(c.homeAddress),b.tempObject={},b.visibilityControl="",FormReset(d),a.message.status="success",a.message.desc="Home Address SuccessFully Added!!!!",b.callAlert("alertHomeAddressSuccess")}else a.message.status="danger",a.message.desc=c.status.split(","),b.callAlert("alertHomeAddressError")}})},a.updateHomeAddress=function(c,d){var e=$("#"+c).find("form");ResetFormForValidation(e),e.valid()&&$.ajax({url:"/Profile/Demographic/UpdateHomeAddressAsync?profileId="+profileId,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.homeAddress.AddressPreferenceType)for(var f in a.HomeAddresses)a.HomeAddresses[f].AddressPreferenceType=2,a.HomeAddresses[f].AddressPreference="Secondary";c.homeAddress.LivingEndDate=ConvertDateFormat(c.homeAddress.LivingEndDate),c.homeAddress.LivingFromDate=ConvertDateFormat(c.homeAddress.LivingFromDate),a.HomeAddresses[d]=c.homeAddress,b.visibilityControl="",FormReset(e),a.message.status="success",a.message.desc="Home Address SuccessFully Updated!!!!",b.callAlert("alertHomeAddressSuccess"+d)}else a.message.status="danger",a.message.desc=c.status.split(","),b.callAlert("alertHomeAddressError"+d)}})},a.removeHomeAddress=function(b){for(var c in a.HomeAddresses)if(b==c){a.HomeAddresses.splice(b,1);break}},a.ViewContactDetails=!0,a.ContactDetailsToggle=function(){a.ViewContactDetails?(a.ViewContactDetails=!1,a.getTempContactDetailsForEdit()):a.ViewContactDetails=!0},a.getTempContactDetailsForEdit=function(){a.TempContactDetailsForEdit=angular.copy(a.Provider.ContactDetails),a.TempPreferredWrittenContacts=angular.copy(a.PreferredWrittenContacts),a.TempPreferredContacts=angular.copy(a.PreferredContacts),null==a.TempContactDetailsForEdit?a.TempContactDetailsForEdit={PhoneDetails:[],EmailIDs:[],PreferredWrittenContacts:[],PreferredContacts:[]}:a.PreferredContactTypesArray=a.TempContactDetailsForEdit.PreferredContacts},a.PreferredContactTypesArray=[],a.addPreferredContactTypesToArray=function(b){var c=!0;for(var d in a.PreferredContactTypesArray)if(a.PreferredContactTypesArray[d].PreferredWrittenContactType==b){c=!1;break}c&&a.PreferredContactTypesArray.push(a.PreferredContacts[b-1])},a.selectedPrefferdContact=function(b,c){a.pcPriority=b,a.pcIndex=c},a.ChangePreferredContactsPriority=function(b){var c=a.PreferredContactTypesArray.indexOf(a.pcPriority);"increase"==b&&0!==c?(a.PreferredContactTypesArray[c].ProficiencyIndex=c,a.PreferredContactTypesArray[c-1].ProficiencyIndex=c+1,a.pcIndex=c-1):"decrease"==b&&c!==a.PreferredContactTypesArray.length-1&&(a.PreferredContactTypesArray[c].ProficiencyIndex=c+2,a.PreferredContactTypesArray[c+1].ProficiencyIndex=c+1,a.pcIndex=c+1),a.PreferredContactTypesArray.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.IsPersonalIdentificationHasError=!1,a.DemographicsPersonalIdentificationSave=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdatePersonalIdentificationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.PersonalIdentification=d.personalIdentification,b.tempObject={},b.visibilityControl="",a.message.status="success",a.message.desc="Personal Identification updated SuccessFully!!!!",b.callAlert("alertPersonalIdentificationSuccess"),FormReset($("#"+c))):(a.message.status="danger",a.message.desc=d.status.split(","),b.callAlert("alertPersonalIdentificationError"))}})},a.saveBirthInformation=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateBirthInformationAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(d.birthInformation.DateOfBirth=ConvertDateFormat(d.birthInformation.DateOfBirth),a.Provider.BirthInformation=d.birthInformation,b.tempObject={},b.visibilityControl="",a.message.status="success",a.message.desc="Birth Information saved successfully.",b.callAlert("alertBirthInformationSuccess"),FormReset($("#"+c))):(a.message.status="danger",a.message.desc=d.status.split(","),b.callAlert("alertBirthInformationError"))}})},a.saveEthnicityVisaDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateVisaDetailAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.visaDetail.VisaInfo){d.visaDetail.VisaInfo.VisaExpirationDate=ConvertDateFormat(d.visaDetail.VisaInfo.VisaExpirationDate);for(var e in a.VisaTypes)if(d.visaDetail.VisaInfo.VisaTypeID==a.VisaTypes[e].VisaTypeID){d.visaDetail.VisaInfo.VisaType=a.VisaTypes[e];break}for(var e in a.VisaStatuses)if(d.visaDetail.VisaInfo.VisaStatusID==a.VisaStatuses[e].VisaStatusID){d.visaDetail.VisaInfo.VisaStatus=a.VisaStatuses[e];break}}a.Provider.VisaDetails=d.visaDetail,b.tempObject={},b.visibilityControl="",a.message.status="success",a.message.desc="Visa Details updated SuccessFully!!!!",b.callAlert("alertVisaDetailsSuccess"),FormReset($("#"+c))}else a.message.status="danger",a.message.desc=d.status.split(","),b.callAlert("alertVisaDetailsError")},cache:!1,contentType:!1,processData:!1})},a.AddPhones=function(b,c){b.push({PhoneDetailID:null,Number:"",CountryCode:"+1",PhoneTypeEnum:c,Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),$('[data-toggle="tooltip"]').tooltip(),a.addPreferredContactTypesToArray(c)},a.AddEmail=function(b){b.push({EmailDetailID:null,EmailAddress:"",Preference:"Secondary",PreferenceType:2,Status:"Active",StatusType:1}),a.addPreferredContactTypesToArray(4),$('[data-toggle="tooltip"]').tooltip()},a.RemoveContactDetails=function(a,b){b.splice(a,1)},a.PreferredContactChange=function(a,b){a.StatusType=b?1:2},a.PreferredContactPriority=function(a,b,c){"increase"==a?(c[b].PreferredIndex=b,c[b-1].PreferredIndex=b+1):"decrease"==a&&(c[b].PreferredIndex=b+2,c[b+1].PreferredIndex=b+1),c.sort(function(a,b){return a.PreferredIndex-b.PreferredIndex})},a.showContryCodeDiv=function(a){$("#"+a).show()},a.ContactDetailsPhoneConditionFunction=function(a,b,c){if(b.length>1)for(var d in b)b[d].PhoneTypeEnum==c&&(d==b.indexOf(a)?2==b[d].PreferenceType&&(b[d].StatusType=1,b[d].PreferenceType=1):b[d].PreferenceType=2);$('[data-toggle="tooltip"]').tooltip()},a.ContactDetailsEmailConditionFunction=function(a,b){if(b.length>1)for(var c in b)c==a?2==b[c].PreferenceType&&(b[c].StatusType=1,b[c].PreferenceType=1):b[c].PreferenceType=2;$('[data-toggle="tooltip"]').tooltip()},a.showConfirmation=function(b,c,d){a.selectedArrayObject=b,a.selectedObjectIndex=c,a.ConfirmationMessage="phone"==d?"Are you sure, want to remove Number  "+b[c].CountryCode+"-"+b[c].Number+" from DataBase":"Are you sure, want to remove EmailId  "+b[c].EmailAddress+" from DataBase",$("#ConfirmationContactDetails").modal("show")},a.InactiveContactDetails=function(){a.selectedArrayObject[a.selectedObjectIndex].StatusType=2,1==a.selectedArrayObject.length&&(a.selectedArrayObject[0].Preference="Primary",a.selectedArrayObject[0].PreferenceType=1),$("#ConfirmationContactDetails").modal("hide")},a.ContactDetailsErrorList=[],a.saveContactDetails=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateContactDetailsAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,success:function(d){if("true"==d.status){if(d.contactDetail.PhoneDetails.length>0)for(var e=0;e<d.contactDetail.PhoneDetails.length;e++)2==d.contactDetail.PhoneDetails[e].StatusType&&d.contactDetail.PhoneDetails.splice(d.contactDetail.PhoneDetails.indexOf(d.contactDetail.PhoneDetails[e]),1);if(d.contactDetail.EmailIDs.length>0)for(var e=0;e<d.contactDetail.EmailIDs.length;e++)2==d.contactDetail.EmailIDs[e].StatusType&&d.contactDetail.EmailIDs.splice(d.contactDetail.EmailIDs.indexOf(d.contactDetail.EmailIDs[e]),1);a.Provider.ContactDetails=d.contactDetail,a.TempContactDetailsForEdit=[],a.message.status="success",a.message.desc="Contact Details updated successfully.",b.callAlert("alertContactDetailsSuccess"),FormReset($("#"+c)),a.ViewContactDetails=!0}else a.message.status="danger",a.message.desc=d.status.split(","),b.callAlert("alertContactDetailsError")},cache:!1,contentType:!1,processData:!1})},a.TempLanguageForEdit=[],a.SelectLanguageKnown=function(b){a.TempLanguageForEdit.KnownLanguages.push({KnownLanguageID:null,Language:b.name,ProficiencyIndex:a.TempLanguageForEdit.length}),a.tempLanguages.splice(a.tempLanguages.indexOf(b),1)},a.UnselectLanguage=function(b){for(c in a.TempLanguageForEdit.KnownLanguages)a.TempLanguageForEdit.KnownLanguages[c]==b&&a.TempLanguageForEdit.KnownLanguages.splice(a.TempLanguageForEdit.KnownLanguages.indexOf(b),1);for(var c in a.Languages)a.Languages[c].name==b.Language&&a.tempLanguages.push(a.Languages[c])},a.selectedLanguage=function(b,c){a.langForPriority=b,a.selectedIndex=c},a.PriorityChange=function(b){var c=a.TempLanguageForEdit.KnownLanguages.indexOf(a.langForPriority);"increase"==b?(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c,a.TempLanguageForEdit.KnownLanguages[c-1].ProficiencyIndex=c+1,a.selectedIndex=c-1):"decrease"==b&&(a.TempLanguageForEdit.KnownLanguages[c].ProficiencyIndex=c+2,a.TempLanguageForEdit.KnownLanguages[c+1].ProficiencyIndex=c+1,a.selectedIndex=c+1),a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})},a.getArray=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.shoLanguageList=function(a){$("#"+a).show()},a.IsExistInArray=function(a,b){var c=[];return status=!0,angular.forEach(a,function(){-1===c.indexOf(b)?c.push(b):status=!1}),status},a.ViewLanguageKnown=!0,a.LanguageKnownToggle=function(){a.ViewLanguageKnown?(a.ViewLanguageKnown=!1,a.getLanguagesAndTempData()):a.ViewLanguageKnown=!0},a.getLanguagesAndTempData=function(){if(a.TempLanguageForEdit=angular.copy(a.Provider.LanguageInfo),a.tempLanguages=angular.copy(a.Languages),a.TempLanguageForEdit){for(var b in a.TempLanguageForEdit.KnownLanguages)for(var c in a.tempLanguages)a.TempLanguageForEdit.KnownLanguages[b].Language==a.tempLanguages[c].name&&a.tempLanguages.splice(c,1);a.TempLanguageForEdit.KnownLanguages.sort(function(a,b){return a.ProficiencyIndex-b.ProficiencyIndex})}else a.TempLanguageForEdit={KnownLanguages:[]};a.langForPriority=null,a.selectedIndex={}},a.saveLanguages=function(c){ResetFormForValidation($("#"+c)),$("#"+c).valid()&&$.ajax({url:"/Profile/Demographic/UpdateLanguagesAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){"true"==d.status?(a.Provider.LanguageInfo=d.languageInfo,a.TempLanguageForEdit=[],a.message.status="success",a.message.desc="Language Known updated SuccessFully!!!!",b.callAlert("alertLanguageKnownSuccess"),FormReset($("#"+c)),a.ViewLanguageKnown=!0):(a.message.status="danger",a.message.desc=d.status.split(","),b.callAlert("alertLanguageKnownError"))}})}}]),$(document).click(function(a){$(a.target).hasClass("countryCodeClass")||0!==$(a.target).parents(".countryDailCodeContainer").length||$(".countryDailCodeContainer").hide(),$(a.target).hasClass("form-control")||0!==$(a.target).parents(".LanguageSelectAutoList").length||$(".LanguageSelectAutoList").hide(),$(a.target).hasClass("form-control")||0!==$(a.target).parents(".ProviderTypeSelectAutoList").length||$(".ProviderTypeSelectAutoList").hide()}),$(document).ready(function(){$(".countryDailCodeContainer").hide(),$(".ProviderTypeSelectAutoList").hide()}),profileApp.controller("educationController",["$scope","$rootScope","$http","countryDropDownService","masterDataService","locationService",function(a,b,c,d,e,f){a.masterSpecialties=[],e.getMasterData("/Profile/MasterData/GetAllSpecialities").then(function(b){a.masterSpecialties=b}),a.masterSchools=[],e.getMasterData("/Profile/MasterData/GetAllSchools").then(function(b){a.masterSchools=b}),a.masterCertifications=[],e.getMasterData("/Profile/MasterData/GetAllCertificates").then(function(b){a.masterCertifications=b}),a.masterDegrees=[],e.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.masterHospitals=[],e.getMasterData("/Profile/MasterData/GetAllHospitals").then(function(b){a.masterHospitals=b}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){$("#"+a).show()},a.addressAutocomplete=function(b){b.length>2&&!angular.isObject(b)?a.Locations=f.getLocations(b):angular.isObject(b)&&(a.tempObject.SchoolInformation.City=b.City,a.tempObject.SchoolInformation.ZipCode=b.Zipcode,a.tempObject.SchoolInformation.State=b.State,a.tempObject.SchoolInformation.Country=b.Country,a.tempObject.SchoolInformation.County=b.County)},a.searchCumDropDown=function(a){$("#"+a).show()},a.addIntoSchoolDropDown=function(b,c){a.tempObject.SchoolInformation.SchoolName=b,$("#"+c).hide()},a.addIntoDegreeDropDown=function(b,c){a.tempObject.QualificationDegree=b,$("#"+c).hide()},a.addIntoHospitalDropDown=function(b,c){a.tempObject.HospitalName=b,$("#"+c).hide()},a.addIntoCMEDropDown=function(b,c){a.tempObject.Certification=b,$("#"+c).hide()},a.educationDetailViewModels=[],a.GraduationDetailViewModel=[],b.$on("EducationDetails",function(b,c){for(var d=0;d<c.length;d++)null!=c[d]&&(c[d].StartDate=ConvertDateFormat(c[d].StartDate),c[d].EndDate=ConvertDateFormat(c[d].EndDate),1==c[d].EducationQualificationType?a.educationDetailViewModels.push(c[d]):a.GraduationDetailViewModel.push(c[d]))}),a.saveUG=function(c,d){var e,f,g;"addeducationDetailViewModel"==a.visibilityControl?(g=$("#newUGFormDiv").find("form"),f="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editeducationDetailViewModel"&&(g=$("#ugEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInUGDetails=!1,"addeducationDetailViewModel"==a.visibilityControl?(b.visibilityControl="addedNewUGDetails",c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels.push(c.educationDetails)):a.visibilityControl==d+"_editeducationDetailViewModel"&&(b.visibilityControl="updatedUGDetails",c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.educationDetailViewModels[d]=c.educationDetails),b.tempObject={},FormReset(g)):(a.ErrorInUGDetails=!0,a.UGDetailsErrorList=c.status.split(","))},error:function(){a.UGDetailsErrorList="Please Ensure the details and try again"}})},a.saveGraduation=function(c,d){var e,f,g;a.IndexValue=0,"addgraduationDetailViewModel"==a.visibilityControl?(g=$("#newGraduationFormDiv").find("form"),f="/Profile/EducationHistory/AddEducationDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(g=$("#graduationEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateEducationDetailAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInPGDetails=!1,"addgraduationDetailViewModel"==a.visibilityControl?(b.visibilityControl="addedNewPGDetails",c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel.push(c.educationDetails)):a.visibilityControl==d+"_editgraduationDetailViewModel"&&(b.visibilityControl="updatedPGDetails",c.educationDetails.StartDate=ConvertDateFormat(c.educationDetails.StartDate),c.educationDetails.EndDate=ConvertDateFormat(c.educationDetails.EndDate),a.GraduationDetailViewModel[d]=c.educationDetails),b.tempObject={},FormReset(g)):(a.ErrorInPGDetails=!0,a.PGDetailsErrorList=c.status.split(","))},error:function(){a.PGDetailsErrorList="Please Ensure the details and try again"}})},b.$on("ECFMGDetail",function(b,c){null!=c&&(c.ECFMGIssueDate=ConvertDateFormat(c.ECFMGIssueDate),a.ecfmgDetail=c)}),a.saveECFMGDetails=function(){var c,d,e;"editecfmgDetail"==a.visibilityControl&&(e=$("#ecfmgEditDiv").find("form"),d="/Profile/EducationHistory/UpdateECFMGDetailAsync?profileId="+profileId),ResetFormForValidation(e),c=e.valid(),c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInUGDetails=!1,"editecfmgDetail"==a.visibilityControl?(b.visibilityControl="addedNewECFMGDetails",c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),a.ecfmgDetail=c.ecfmgDetails):a.visibilityControl==IndexValue+"updateecfmgDetail"&&(b.visibilityControl="updatedECFMGDetails",c.ecfmgDetails.ECFMGIssueDate=ConvertDateFormat(c.ecfmgDetails.ECFMGIssueDate),a.ecfmgDetail=c.ecfmgDetails),b.tempObject={}):(a.ErrorInECFMGDetails=!0,a.ECFMGDetailsErrorList=c.status.split(","))},error:function(){a.ECFMGDetailsErrorList="Please Ensure the details and try again"}})},a.ResidencyInternshipViewModel=[],b.$on("TrainingDetails",function(b,c){for(var d=0;d<c.length;d++)if(null!=c[d]){for(var e=0;e<c[d].ResidencyInternshipDetails.length;e++)c[d].ResidencyInternshipDetails[e].StartDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].StartDate),c[d].ResidencyInternshipDetails[e].EndDate=ConvertDateFormat(c[d].ResidencyInternshipDetails[e].EndDate);a.ResidencyInternshipViewModel.push(c[d])}}),a.saveProgram=function(c,d){var e,f,g;"addresidencyInternshipViewModel"==a.visibilityControl?(g=$("#newProgramFormDiv").find("form"),f="/Profile/EducationHistory/AddTrainingDetailAsync?profileId="+profileId):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(g=$("#programEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateTrainingDetailAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInProgramDetails=!1,"addresidencyInternshipViewModel"==a.visibilityControl?(b.visibilityControl="addedNewProgramDetails",a.ResidencyInternshipViewModel.push(c.TrainingDetails)):a.visibilityControl==d+"_editresidencyInternshipViewModel"&&(b.visibilityControl="updatedProgramDetails",a.ResidencyInternshipViewModel[d]=c.TrainingDetails),b.tempObject={},FormReset(g)):(a.ErrorInProgramDetails=!0,a.ProgramDetailsErrorList=c.status.split(","))},error:function(){a.ResidencyDetailsErrorList="Please Ensure the details and try again"}})},a.AddView="Add",a.SetAddView=function(b){a.AddView=b},a.updateResidency=function(c,d,e){var f,g,h,i=c.TrainingDetailID;"addresidency"==a.visibilitySecondControl?(g=$("#newResidencyDivFor"+a.AddView+i).find("form"),h=$(g[0]).find($("[name='SpecialtyID'] option:selected")).text(),f="/Profile/EducationHistory/AddResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+i):a.visibilitySecondControl==e+"_editresidency"&&(g=$("#residencyEditDiv"+d.ResidencyInternshipDetailID).find("form"),h=$(g[0]).find($("[name='SpecialtyID'] option:selected")).text(),f="/Profile/EducationHistory/UpdateResidencyInternshipDetailAsync?profileId="+profileId+"&trainingId="+i),ResetFormForValidation(g),validationStatus=g.valid(),validationStatus&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){if("true"==d.status){if(a.ErrorInResidencyDetails=!1,"addresidency"==a.visibilitySecondControl){b.visibilitySecondControl="addedNewResidencyDetails",d.ResidencyDetails.Specialty={ID:d.ResidencyDetails.SpecialtyID,Name:h},d.ResidencyDetails.StartDate=ConvertDateFormat(d.ResidencyDetails.StartDate),d.ResidencyDetails.EndDate=ConvertDateFormat(d.ResidencyDetails.EndDate);for(var f=0;f<a.ResidencyInternshipViewModel.length;f++)a.ResidencyInternshipViewModel[f].TrainingDetailID==i&&(a.ResidencyInternshipViewModel[f].ResidencyInternshipDetails.push(d.ResidencyDetails),c.ResidencyInternshipDetails.push(d.ResidencyDetails))}else if(a.visibilitySecondControl==e+"_editresidency"){b.visibilitySecondControl="updatedResidencyDetails",d.ResidencyDetails.Specialty={ID:d.ResidencyDetails.SpecialtyID,Name:h},d.ResidencyDetails.StartDate=ConvertDateFormat(d.ResidencyDetails.StartDate),d.ResidencyDetails.EndDate=ConvertDateFormat(d.ResidencyDetails.EndDate);for(var f=0;f<a.ResidencyInternshipViewModel.length;f++)a.ResidencyInternshipViewModel[f].TrainingDetailID==i&&(a.ResidencyInternshipViewModel[f].ResidencyInternshipDetails[e]=d.ResidencyDetails,c.ResidencyInternshipDetails[e]=d.ResidencyDetails)}for(var f=0;f<a.ResidencyInternshipViewModel.length;f++)for(var j=0;j<a.ResidencyInternshipViewModel[f].ResidencyInternshipDetails.length;j++)"1"==a.ResidencyInternshipViewModel[f].ResidencyInternshipDetails[j].PreferenceType&&f!=e&&(a.ResidencyInternshipViewModel[f].ResidencyInternshipDetails[j].PreferenceType="2");FormReset(g)}else a.ErrorInResidencyDetails=!0,a.ResidencyDetailsErrorList=d.status.split(",")},error:function(){a.ResidencyDetailsErrorList="Please Ensure the details and try again"}})},a.CertificationCMEViewModel=[],b.$on("CMECertifications",function(c,d){for(var e=0;e<d.length;e++)null!=d[e]&&(d[e].StartDate=ConvertDateFormat(d[e].StartDate),d[e].EndDate=ConvertDateFormat(d[e].EndDate),d[e].ExpiryDate=ConvertDateFormat(d[e].ExpiryDate),d[e].City=b.ConvertCity(d[e].City),a.CertificationCMEViewModel.push(d[e]))}),a.saveCertificate=function(c,d){var e,f,g;"addcertificationCMEViewModel"==a.visibilityControl?(e=$("#newCertificateFormDiv").find("form").valid(),g=$("#newCertificateFormDiv").find("form"),f="/Profile/EducationHistory/AddCMECertificationAsync?profileId="+profileId):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(e=$("#certificateEditDiv"+d).find("form").valid(),g=$("#certificateEditDiv"+d).find("form"),f="/Profile/EducationHistory/UpdateCMECertificationAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.ErrorInCMEDetails=!1,"addcertificationCMEViewModel"==a.visibilityControl?(b.visibilityControl="addedNewCMEDetails",c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel.push(c.CMEDetails)):a.visibilityControl==d+"_editcertificationCMEViewModel"&&(b.visibilityControl="updatedCMEDetails",c.CMEDetails.StartDate=ConvertDateFormat(c.CMEDetails.StartDate),c.CMEDetails.EndDate=ConvertDateFormat(c.CMEDetails.EndDate),c.CMEDetails.ExpiryDate=ConvertDateFormat(c.CMEDetails.ExpiryDate),a.CertificationCMEViewModel[d]=c.CMEDetails),b.tempObject={},FormReset(g)):(a.ErrorInCMEDetails=!0,a.CMEDetailsErrorList=c.status.split(","))},error:function(){a.CMEDetailsErrorList="Please Ensure the details and try again"}})}}]),profileApp.controller("identificationLicenseController",["$scope","$rootScope","$http","dynamicFormGenerateService","masterDataService","locationService",function(a,b,c,d,e){e.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b
}),e.getMasterData("/Profile/MasterData/GetAllLicenseStatus").then(function(b){a.StateLicenseStatuses=b}),angular.element(document).ready(function(){c.get("/Location/GetStates").then(function(b){console.log(b.data),a.States=b.data})}),a.StateLicenses=[],b.$on("StateLicenses",function(b,c){a.StateLicenses=c;for(var d=0;d<a.StateLicenses.length;d++)a.StateLicenses[d].IssueDate=ConvertDateFormat(a.StateLicenses[d].IssueDate),a.StateLicenses[d].ExpiryDate=ConvertDateFormat(a.StateLicenses[d].ExpiryDate),a.StateLicenses[d].CurrentIssueDate=ConvertDateFormat(a.StateLicenses[d].CurrentIssueDate)}),a.IndexValue1="",a.saveStateLicense=function(c,d){var e,f,g,h,i,j,k;a.SLError="",h=c.ProviderTypeID,j=c.StateLicenseStatusID,a.IndexValue1=d;for(var l in a.ProviderTypes)if(a.ProviderTypes[l].ProviderTypeID==h){i=a.ProviderTypes[l];break}for(var m in a.StateLicenseStatuses)if(a.StateLicenseStatuses[m].StateLicenseStatusID==j){k=a.StateLicenseStatuses[m];break}"addStateLicenseInformation"==a.visibilityControl?(g=$("#newStateLicenseDiv").find("form"),f="/Profile/IdentificationAndLicense/AddStateLicenseAsync?profileId="+profileId):a.visibilityControl==d+"_editStateLicenseInformation"&&(g=$("#stateLicenseEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateStateLicenseAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.stateLicense.ProviderType=i,c.stateLicense.StateLicenseStatus=k,c.stateLicense.IssueDate=ConvertDateFormat(c.stateLicense.IssueDate),c.stateLicense.ExpiryDate=ConvertDateFormat(c.stateLicense.ExpiryDate),c.stateLicense.CurrentIssueDate=ConvertDateFormat(c.stateLicense.CurrentIssueDate),-1==d?(a.StateLicenses.push(c.stateLicense),b.visibilityControl="addedStateLicense",b.tempObject={}):(a.StateLicenses[d]=c.stateLicense,b.visibilityControl="updatedStateLicense"),b.tempObject={},FormReset(g)):a.SLError=c.status.split(",")},error:function(){a.SLError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},e.getMasterData("/Profile/MasterData/GetAllDEASchedules").then(function(b){a.Schedules=b}),a.FederalDEA=[],b.$on("FederalDEAInformations",function(b,c){a.FederalDEA=c;for(var d=0;d<a.FederalDEA.length;d++)a.FederalDEA[d].IssueDate=ConvertDateFormat(a.FederalDEA[d].IssueDate),a.FederalDEA[d].ExpiryDate=ConvertDateFormat(a.FederalDEA[d].ExpiryDate)}),a.IndexValue2="",a.saveFederalDEALicense=function(c,d){a.IndexValue2=d;var e,f,g;"addDEAInformation"==a.visibilityControl?(g=$("#newShowFederalDEALicenseDiv").find("form"),f="/Profile/IdentificationAndLicense/AddFederalDEALicenseAsync?profileId="+profileId):a.visibilityControl==d+"_editDEAInformation"&&(g=$("#FederalDEALicenseEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateFederalDEALicenseAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),a.DEAError="",e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.federalDea.IssueDate=ConvertDateFormat(c.federalDea.IssueDate),c.federalDea.ExpiryDate=ConvertDateFormat(c.federalDea.ExpiryDate),-1==d?(a.FederalDEA.push(c.federalDea),b.visibilityControl="addedDEA",b.tempObject={}):(a.FederalDEA[d]=c.federalDea,b.visibilityControl="updatedDEA"),b.tempObject={},FormReset(g)):a.DEAError=c.status.split(",")},error:function(){a.DEAError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.CDSCInformations=[],b.$on("CDSCInformations",function(b,c){a.CDSCInformations=c;for(var d=0;d<a.CDSCInformations.length;d++)a.CDSCInformations[d].IssueDate=ConvertDateFormat(a.CDSCInformations[d].IssueDate),a.CDSCInformations[d].ExpiryDate=ConvertDateFormat(a.CDSCInformations[d].ExpiryDate)}),a.CDSCError="",a.IndexValue5="",a.saveCDSCInformation=function(c,d){a.IndexValue5=d;var e,f,g;"addCDSCInformation"==a.visibilityControl?(g=$("#newShowCDSCInformationDiv").find("form"),f="/Profile/IdentificationAndLicense/AddCDSCLicenseAsync?profileId="+profileId):a.visibilityControl==d+"_editCDSCInformation"&&(g=$("#cDSCInformationEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateCDSCLicenseAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.CDSCInformation.IssueDate=ConvertDateFormat(c.CDSCInformation.IssueDate),c.CDSCInformation.ExpiryDate=ConvertDateFormat(c.CDSCInformation.ExpiryDate),-1==d?(a.CDSCInformations.push(c.CDSCInformation),b.visibilityControl="addedCDS",b.tempObject={}):(a.CDSCInformations[d]=c.CDSCInformation,b.visibilityControl="updatedCDS"),b.tempObject={},FormReset(g)):a.CDSCError=c.status.split(",")},error:function(){a.CDSCError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.MedicareInformations=[],b.$on("MedicareInformations",function(b,c){a.MedicareInformations=c;for(var d=0;d<a.MedicareInformations.length;d++)a.MedicareInformations[d].IssueDate=ConvertDateFormat(a.MedicareInformations[d].IssueDate)}),a.IndexValue3="",a.saveMedicareInformation=function(c,d){a.IndexValue3=d;var e,f,g;"addMedicareInformation"==a.visibilityControl?(g=$("#newShowMedicareInformationDiv").find("form"),f="/Profile/IdentificationAndLicense/AddMedicareInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMedicareInformation"&&(g=$("#MedicareInformationEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateMedicareInformationAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),a.MedicareError="",e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.MedicareInformation.IssueDate=ConvertDateFormat(c.MedicareInformation.IssueDate),-1==d?(a.MedicareInformations.push(c.MedicareInformation),b.visibilityControl="addedMedicare",b.tempObject={}):(a.MedicareInformations[d]=c.MedicareInformation,b.visibilityControl="updatedMedicare"),b.tempObject={},FormReset(g)):a.MedicareError=c.status.split(",")},error:function(){a.MedicareError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.MedicaidInformations=[],b.$on("MedicaidInformations",function(b,c){a.MedicaidInformations=c;for(var d=0;d<a.MedicaidInformations.length;d++)a.MedicaidInformations[d].IssueDate=ConvertDateFormat(a.MedicaidInformations[d].IssueDate)}),a.IndexValue4="",a.saveMedicaidInformation=function(c,d){a.IndexValue4=d;var e,f,g;"addMedicaidInformation"==a.visibilityControl?(g=$("#newShowMedicaidInformationDiv").find("form"),f="/Profile/IdentificationAndLicense/AddMedicaidInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMedicaidInformation"&&(g=$("#MedicaidInformationEditDiv"+d).find("form"),f="/Profile/IdentificationAndLicense/UpdateMedicaidInformationAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),a.MedicaidError="",e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.MedicaidInformation.IssueDate=ConvertDateFormat(c.MedicaidInformation.IssueDate),-1==d?(a.MedicaidInformations.push(c.MedicaidInformation),b.visibilityControl="addedMedicaid",b.tempObject={}):(a.MedicaidInformations[d]=c.MedicaidInformation,b.visibilityControl="updatedMedicaid"),b.tempObject={},FormReset(g)):a.MedicaidError=c.status.split(",")},error:function(){a.MedicaidError="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.OtherIdentificationNumbers={},b.$on("OtherIdentificationNumber",function(b,c){a.OtherIdentificationNumbers=c}),a.showOtherId=!1,a.OtherIdError="",a.saveOtherIdentificationNumber=function(c,d){$("#"+c).valid()&&$.ajax({url:"/Profile/IdentificationAndLicense/UpdateOtherIdentificationNumberAsync?profileId="+profileId,type:"POST",data:new FormData($("#"+c)[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"true"==e.status?(d.OtherIdentificationNumberID=e.OtherIdentificationNumber.OtherIdentificationNumberID,a.OtherIdentificationNumbers=angular.copy(d),FormReset($("#"+c)),a.ErrorId=!1,b.visibilityControl="updatedID"):(a.OtherIdError=e.status.split(","),0==a.OtherIdError.length&&(a.OtherIdError=e.status),a.ErrorId=!0)},error:function(){a.OtherIdError="Sorry for Inconvenience !!!! Please Try Again Later..."}})}}]),profileApp.controller("professionalAppCtrl",["$scope","$rootScope","$http","dynamicFormGenerateService","masterDataService",function(a,b){a.ProfessionalAffiliations=[],a.submitButtonText="Add",b.$on("ProfessionalAffiliationInfos",function(b,c){a.ProfessionalAffiliations=c;for(var d=0;d<a.ProfessionalAffiliations.length;d++)a.ProfessionalAffiliations[d].StartDate=ConvertDateFormat(a.ProfessionalAffiliations[d].StartDate),a.ProfessionalAffiliations[d].EndDate=ConvertDateFormat(a.ProfessionalAffiliations[d].EndDate)}),a.saveProfessionalAffiliation=function(c,d){var e,f,g;"addpa"==a.visibilityControl?(g=$("#newShowProfessionalAffiliationDiv").find("form"),f="/Profile/ProfessionalAffiliation/AddProfessionalAffiliation?profileId="+profileId):a.visibilityControl==d+"_editpa"&&(g=$("#professionalAffiliationEditDiv"+d).find("form"),f="/Profile/ProfessionalAffiliation/UpdateProfessionalAffiliation?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.professionalAffiliation.StartDate=ConvertDateFormat(c.professionalAffiliation.StartDate),c.professionalAffiliation.EndDate=ConvertDateFormat(c.professionalAffiliation.EndDate),a.visibilityControl!=d+"_editpa"?(a.ProfessionalAffiliations.push(c.professionalAffiliation),b.visibilityControl="addedNewProfessionalAffiliation"):(a.ProfessionalAffiliations[d]=c.professionalAffiliation,b.visibilityControl="updatedProfessionalAffiliation"),a.IsProfessionalAffiliationHasError=!1,FormReset(g)):(a.IsProfessionalAffiliationHasError=!0,a.ProfessionalAffiliationErrorList=c.status.split(","))}})}}]),$(document).ready(function(){}),profileApp.controller("LiabilityCtrl",["$scope","$rootScope","$http","dynamicFormGenerateService","masterDataService",function(a,b,c,d,e){a.ProfessionalLiabilityInfoes=[],a.submitButtonText="Add",a.getLocation=function(){a.Location=a.masterInsuranceCarriers.filter(function(b){return b.InsuranceCarrierID==a.tempObject.InsuranceCarrierID})[0]},a.getAddress=function(){a.LocationAddress=a.Location.InsuranceCarrierAddresses.filter(function(b){return b.InsuranceCarrierAddressID==a.tempObject.InsuranceCarrierAddressID})[0],a.tempObject.InsuranceCarrierAddress=a.LocationAddress},e.getMasterData("/Profile/MasterData/GetAllInsuranceCarriers").then(function(b){a.masterInsuranceCarriers=b}),b.$on("ProfessionalLiabilityInfoes",function(b,c){a.ProfessionalLiabilityInfoes=c;for(var d=0;d<a.ProfessionalLiabilityInfoes.length;d++)a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].OriginalEffectiveDate),a.ProfessionalLiabilityInfoes[d].EffectiveDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].EffectiveDate),a.ProfessionalLiabilityInfoes[d].ExpirationDate=ConvertDateFormat(a.ProfessionalLiabilityInfoes[d].ExpirationDate)}),a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){$("#"+a).show()},a.cancelProfessionalLiabilty=function(){setProfessionalLiabiltyCancelParameters()},a.saveProfessionalLiabilty=function(c,d){var e,f,g;"addLi"==a.visibilityControl?(g=$("#newShowProfessionalLiabiltyDiv").find("form"),f="/Profile/ProfessionalLiability/AddProfessionalLiabilityAsync?profileId="+profileId):a.visibilityControl==d+"_editLi"&&(g=$("#professionalLiabiltyEditDiv"+d).find("form"),f="/Profile/ProfessionalLiability/UpdateProfessionalLiabilityAsync?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalLiability.OriginalEffectiveDate=ConvertDateFormat(c.professionalLiability.OriginalEffectiveDate),c.professionalLiability.EffectiveDate=ConvertDateFormat(c.professionalLiability.EffectiveDate),c.professionalLiability.ExpirationDate=ConvertDateFormat(c.professionalLiability.ExpirationDate),c.professionalLiability.InsuranceCarrierAddress=a.Location.InsuranceCarrierAddresses.filter(function(a){return a.InsuranceCarrierAddressID==c.professionalLiability.InsuranceCarrierAddressID})[0];for(var e=0;e<a.masterInsuranceCarriers.length;e++)if(a.masterInsuranceCarriers[e].InsuranceCarrierID==c.professionalLiability.InsuranceCarrierID){c.professionalLiability.InsuranceCarrier=a.masterInsuranceCarriers[e];break}a.visibilityControl!=d+"_editLi"?(a.ProfessionalLiabilityInfoes.push(c.professionalLiability),b.visibilityControl="addedNewProfessionalLiability"):(a.ProfessionalLiabilityInfoes[d]=c.professionalLiability,b.visibilityControl="updatedProfessionalLiability"),a.IsProfLiabilityHasError=!1,b.tempObject={},FormReset(g)}else a.IsProfLiabilityHasError=!0,a.ProfLiabilityErrorList=c.status.split(",")}})}}]),$(document).ready(function(){}),profileApp.controller("ProfessionalReference",["$scope","$rootScope","$http","masterDataService","locationService",function(a,b,c,d,e){a.ProfessionalReferences=[],b.$on("ProfessionalReferenceInfos",function(b,c){a.ProfessionalReferences=c}),a.addressAutocomplete=function(b){b.length>2&&!angular.isObject(b)?a.Locations=e.getLocations(b):angular.isObject(b)&&(a.tempObject.Zipcode=b.Zipcode,a.tempObject.State=b.State,a.tempObject.Country=b.Country,a.tempObject.County=b.County,a.tempObject.City=b.City)},a.CountryDialCodes=countryDailCodes,a.submitButtonText="Add",a.changeButtonText=function(){a.submitButtonText="Update"==a.submitButtonText?"Add":"Update"},a.showContryCodeDiv=function(a){$("#"+a).show()},a.masterSpecialties=[],a.masterDegrees=[],a.masterProviderTypes=[],d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.masterProviderTypes=b}),d.getMasterData("/Profile/MasterData/GetAllQualificationDegrees").then(function(b){a.masterDegrees=b}),a.saveProfessionalReference=function(c,d){var e,f,g,h,i,j,k;j=c.SpecialtyID;for(var l in a.masterSpecialties)if(a.masterSpecialties[l].SpecialtyID==j){k=a.masterSpecialties[l];break}h=c.ProviderTypeID;for(var m in a.masterProviderTypes)if(a.masterProviderTypes[m].ProviderTypeID==h){i=a.masterProviderTypes[m];break}"addpr"==a.visibilityControl?(g=$("#newProfessionalReferenceFormDiv").find("form"),f="/Profile/ProfessionalReference/AddProfessionalReference?profileId="+profileId):a.visibilityControl==d+"_editpr"&&(g=$("#professionalReferenceEditDiv"+d).find("form"),console.log(g),f="/Profile/ProfessionalReference/UpdateProfessionalReference?profileId="+profileId),ResetFormForValidation(g),e=g.valid(),e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.professionalReference.Specialty=k,c.professionalReference.ProviderType=i,a.visibilityControl!=d+"_editpr"?(a.ProfessionalReferences.push(c.professionalReference),b.visibilityControl="addedNewProfessionalReference"):(a.ProfessionalReferences[d]=c.professionalReference,b.visibilityControl="updatedProfessionalReference"),a.IsProfessionalReferenceHasError=!1,FormReset(g)):(a.IsProfessionalReferenceHasError=!0,a.ProfessionalReferenceErrorList=c.status.split(","))}})}}]),profileApp.controller("SpecialtyController",["$scope","$rootScope","$http","masterDataService",function(a,b,c,d){a.Specialties=[],a.practiceInterest={},a.masterSpecialties=[],a.masterSpecialtyBoards=[],b.$on("SpecialtyDetails",function(b,c){a.Specialties=c;for(var d=0;d<a.Specialties.length;d++)null!=a.Specialties[d].SpecialtyBoardCertifiedDetail&&(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.ExpirationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.InitialCertificationDate),a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=a.Specialties[d].SpecialtyBoardNotCertifiedDetail&&(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(a.Specialties[d].SpecialtyBoardNotCertifiedDetail.ExamDate))}),b.$on("PracticeInterest",function(b,c){a.practiceInterest=c}),d.getMasterData("/Profile/MasterData/getAllSpecialities").then(function(b){a.masterSpecialties=b}),d.getMasterData("/Profile/MasterData/getAllspecialtyBoards").then(function(b){a.masterSpecialtyBoards=b}),a.submitButtonText="Add",a.IndexValue=0,a.saveSpecialty=function(){var c,d,e;e=$("#newShowSpecialtyDiv").find("form"),d="/Profile/BoardSpecialty/AddSpecialityDetailAsync?profileId="+profileId,a.typeOfSaveForSpecialty="Add",ResetFormForValidation(e),console.log(" SpecialtyForm Data"),console.log(e),c=e.valid();var f=$(e[0]).find($("[name='SpecialtyID'] option:selected")).text(),g=$(e[0]).find($("[name='SpecialtyBoardID'] option:selected")).text();c&&$.ajax({url:d,type:"POST",data:new FormData(e[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var d=0;d<a.Specialties.length;d++)"Primary"==a.Specialties[d].SpecialtyPreference&&(a.Specialties[d].SpecialtyPreference="Secondary",a.Specialties[d].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:f},c.specialty.SpecialtyBoard={ID:c.specialty.SpecialtyBoardID,Name:g},null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties.push(c.specialty),a.ErrorInSpecialtyDetails=!1,b.visibilityControl="addedNewBoardSpecialty"}else a.ErrorInSpecialtyDetails=!0,a.SpeciatyDetailsErrorList=c.status.split(",")},error:function(){a.SpeciatyDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.updateSpecialty=function(c,d){var e,f,g;g=$("#specialtyEditDiv"+d).find("form"),f="/Profile/BoardSpecialty/UpdateSpecialityDetailAsync?profileId="+profileId,a.typeOfSaveForSpecialty="Edit",ResetFormForValidation(g),e=g.valid();var h=$(g[0]).find($("[name='SpecialtyID'] option:selected")).text(),i=$(g[0]).find($("[name='SpecialtyBoardID'] option:selected")).text();e&&$.ajax({url:f,type:"POST",data:new FormData(g[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){if(1==c.specialty.PreferenceType){a.setPrimary();for(var e=0;e<a.Specialties.length;e++)"Primary"==a.Specialties[e].SpecialtyPreference&&e!=d&&(a.Specialties[e].SpecialtyPreference="Secondary",a.Specialties[e].PercentageOfTime=50)}c.specialty.Specialty={ID:c.specialty.SpecialtyID,Name:h},c.specialty.SpecialtyBoard={ID:c.specialty.SpecialtyBoardID,Name:i},null!=c.specialty.SpecialtyBoardCertifiedDetail&&(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.ExpirationDate),c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.InitialCertificationDate),c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate=ConvertDateFormat(c.specialty.SpecialtyBoardCertifiedDetail.LastReCerificationDate)),null!=c.specialty.SpecialtyBoardNotCertifiedDetail&&(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate=ConvertDateFormat(c.specialty.SpecialtyBoardNotCertifiedDetail.ExamDate)),a.Specialties[d]=c.specialty,a.ErrorInSpecialtyDetails=!1,b.visibilityControl="updatedBoardSpecialty"}else a.ErrorInSpecialtyDetails=!0,a.SpeciatyDetailsErrorList=c.status.split(",")},error:function(){a.SpeciatyDetailsErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}})},a.setPrimary=function(){try{for(var b=0;b<a.Specialties.length;b++)a.Specialties[b].PreferenceType="2"}catch(c){}},a.savePracticeInterest=function(c){var d,e,f;a.typeOfSaveForPracticeInterest=0!=c.PracticeInterestID?"Edit":"Add","editpracticeInterest"==a.visibilityControl&&(f=$("#editShowPracticeInterest").find("form"),e="/Profile/BoardSpecialty/UpdatePracticeInterestAsync?profileId="+profileId),ResetFormForValidation(f),d=f.valid(),d&&($.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(a.practiceInterest=c.practiceInterest,b.visibilityControl="",a.ErrorInPracticeInterest=!1,b.visibilityControl="Add"==a.typeOfSaveForPracticeInterest?"addedNewPracticeInterest":"updatedPracticeInterest"):(a.ErrorInPracticeInterest=!0,a.PracticeInterestErrorList=c.status.split(","))},error:function(){a.PracticeInterestErrorList="Sorry for Inconvenience !!!! Please Try Again Later..."}}),a.changePartial=!1)},b.getSpecilityForThisUser=function(){return a.Specialties},a.fillPercentageOfTime=function(b){a.tempObject.PercentageOfTime="1"==b?100:50},a.fillPreferenceType=function(b){a.tempObject.PreferenceType=100==b?1:2},a.searchCumDropDown=function(a){$("#"+a).show()},a.addIntoDropDown=function(b,c){a.tempObject.SpecialtyID=b.SpecialtyID,a.tempObject.Specialty.Name=b.Name,$("#"+c).hide()}}]),profileApp.controller("WorkHistoryController",["$scope","$rootScope","$http","$filter","countryDropDownService","masterDataService","locationService",function(a,b,c,d,e,f,g){a.addressAutocomplete=function(b){b.length>2&&!angular.isObject(b)?a.Locations=g.getLocations(b):angular.isObject(b)&&(a.tempObject||(a.tempObject={}),a.tempObject.City=b.City,a.tempObject.ZipCode=b.Zipcode,a.tempObject.State=b.State,a.tempObject.Country=b.Country,a.tempObject.County=b.County)},a.CountryDialCodes=countryDailCodes,a.showContryCodeDiv=function(a){$("#"+a).show()},a.currentlyWorkingChange=function(a){1==a&&(b.tempObject.EndDate=null,b.tempObject.DepartureReason=null)},f.getMasterData("/Profile/MasterData/GetAllProviderTypes").then(function(b){a.ProviderTypes=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryBranches").then(function(b){a.militaryBranches=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryRanks").then(function(b){a.militaryRanks=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryPresentDuties").then(function(b){a.militaryPresentDuties=b}),f.getMasterData("/Profile/MasterData/GetAllMilitaryDischarges").then(function(b){a.militaryDischarges=b}),a.IndexValue=0,a.professionalWorkExperiences=[],b.$on("ProfessionalWorkExperiences",function(b,c){console.log(c),a.professionalWorkExperiences=c;for(var d=0;d<a.professionalWorkExperiences.length;d++)a.professionalWorkExperiences[d].StartDate=ConvertDateFormat(a.professionalWorkExperiences[d].StartDate),a.professionalWorkExperiences[d].EndDate=ConvertDateFormat(a.professionalWorkExperiences[d].EndDate)}),a.saveProfessionalWorkExperience=function(c,d){var e,f;"addProfessionalWorkExperience"==a.visibilityControl?(f=$("#newProfessionalWorkExperienceFormDiv").find("form"),e="/Profile/WorkHistory/AddProfessionalWorkExperienceAsync?profileId="+profileId):a.visibilityControl==d+"_editProfessionalWorkExperience"&&(f=$("#professionalWorkExperienceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateProfessionalWorkExperienceAsync?profileId="+profileId,ResetFormForValidation(f)),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){if("true"==c.status){c.professionalWorkExperience.StartDate=ConvertDateFormat(c.professionalWorkExperience.StartDate),c.professionalWorkExperience.EndDate=ConvertDateFormat(c.professionalWorkExperience.EndDate);var e=$(f[0]).find($("[name='ProviderTypeID'] option:selected")).text();c.professionalWorkExperience.ProviderType={ProviderTypeID:c.professionalWorkExperience.ProviderTypeID,Title:e},a.visibilityControl!=d+"_editProfessionalWorkExperience"?(a.professionalWorkExperiences.push(c.professionalWorkExperience),b.visibilityControl="addedNewProfessionalWorkExperience"):(a.professionalWorkExperiences[d]=c.professionalWorkExperience,b.visibilityControl="updatedProfessionalWorkExperience"),a.IsProfessionalWorkExperienceHasError=!1,FormReset(f)}else a.IsProfessionalWorkExperienceHasError=!0,a.ProfessionalWorkExperienceErrorList=c.status.split(",")}})},a.publicHealthServices=[],b.$on("PublicHealthServices",function(b,c){a.publicHealthServices=c;for(var d=0;d<a.publicHealthServices.length;d++)a.publicHealthServices[d].StartDate=ConvertDateFormat(a.publicHealthServices[d].StartDate),a.publicHealthServices[d].EndDate=ConvertDateFormat(a.publicHealthServices[d].EndDate)}),a.savePublicHealthService=function(c,d){var e,f;"addPublicHealthService"==a.visibilityControl?(f=$("#newPublicHealthServiceFormDiv").find("form"),e="/Profile/WorkHistory/AddPublicHealthServiceAsync?profileId="+profileId):a.visibilityControl==d+"_editPublicHealthService"&&(f=$("#publicHealthServiceEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdatePublicHealthServiceAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.publicHealthService.StartDate=ConvertDateFormat(c.publicHealthService.StartDate),c.publicHealthService.EndDate=ConvertDateFormat(c.publicHealthService.EndDate),a.visibilityControl!=d+"_editPublicHealthService"?(a.publicHealthServices.push(c.publicHealthService),b.visibilityControl="addedNewPublicHealthService"):(a.publicHealthServices[d]=c.publicHealthService,b.visibilityControl="updatedPublicHealthService"),a.IsPublicHealthServiceHasError=!1,FormReset(f)):(a.IsPublicHealthServiceHasError=!0,a.PublicHealthServiceErrorList=c.status.split(","))}})},a.workGaps=[],b.$on("WorkGaps",function(b,c){a.workGaps=c;for(var d=0;d<a.workGaps.length;d++)a.workGaps[d].StartDate=ConvertDateFormat(a.workGaps[d].StartDate),a.workGaps[d].EndDate=ConvertDateFormat(a.workGaps[d].EndDate)}),a.saveWorkGap=function(c,d){var e,f;"addWorkGap"==a.visibilityControl?(f=$("#newWorkGapFormDiv").find("form"),e="/Profile/WorkHistory/AddWorkGapAsync?profileId="+profileId):a.visibilityControl==d+"_editWorkGap"&&(f=$("#workGapEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateWorkGapAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.workGap.StartDate=ConvertDateFormat(c.workGap.StartDate),c.workGap.EndDate=ConvertDateFormat(c.workGap.EndDate),a.visibilityControl!=d+"_editWorkGap"?(a.workGaps.push(c.workGap),b.visibilityControl="addedNewWorkGap"):(a.workGaps[d]=c.workGap,b.visibilityControl="updatedWorkGap"),a.IsWorkGapHasError=!1,FormReset(f)):(a.IsWorkGapHasError=!0,a.WorkGapErrorList=c.status.split(","))}})},a.militaryServiceInformations=[],b.$on("MilitaryServiceInformations",function(b,c){a.militaryServiceInformations=c;for(var d=0;d<a.militaryServiceInformations.length;d++)a.militaryServiceInformations[d].StartDate=ConvertDateFormat(a.militaryServiceInformations[d].StartDate),a.militaryServiceInformations[d].DischargeDate=ConvertDateFormat(a.militaryServiceInformations[d].DischargeDate)}),a.saveMilitaryServiceInformation=function(c,d){var e,f;"addMilitaryServiceInformation"==a.visibilityControl?(f=$("#newMilitaryServiceInformationFormDiv").find("form"),e="/Profile/WorkHistory/AddMilitaryServiceInformationAsync?profileId="+profileId):a.visibilityControl==d+"_editMilitaryServiceInformation"&&(f=$("#militaryServiceInformationEditDiv"+d).find("form"),e="/Profile/WorkHistory/UpdateMilitaryServiceInformationAsync?profileId="+profileId),ResetFormForValidation(f),f.valid()&&$.ajax({url:e,type:"POST",data:new FormData(f[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(c){"true"==c.status?(c.militaryServiceInformation.StartDate=ConvertDateFormat(c.militaryServiceInformation.StartDate),c.militaryServiceInformation.DischargeDate=ConvertDateFormat(c.militaryServiceInformation.DischargeDate),a.visibilityControl!=d+"_editMilitaryServiceInformation"?(a.militaryServiceInformations.push(c.militaryServiceInformation),b.visibilityControl="addedNewMilitaryServiceInformation"):(a.militaryServiceInformations[d]=c.militaryServiceInformation,b.visibilityControl="updatedMilitaryServiceInformation"),a.IsMilitaryServiceInfoHasError=!1,FormReset(f)):(a.IsMilitaryServiceInfoHasError=!0,a.MilitaryServiceInfoErrorList=c.status.split(","))}})}}]),profileApp.controller("hospitalcltr",["$scope","$rootScope","$http",function(a,b,c){$(document).ready(function(){c.get("/Profile/MasterData/GetAllHospitals").then(function(b){a.hospitals=b.data}),c.get("/Profile/MasterData/GetAllStaffCategories").then(function(b){a.staffCategories=b.data}),c.get("/Profile/MasterData/GetAllAdmittingPrivileges").then(function(b){a.admittingPrivileges=b.data}),c.get("/Profile/MasterData/GetAllHospitalContactPersons").then(function(b){a.ContactPersons=b.data})}),a.HaveHospitalPrivilege="True",a.HospitalPrivilegeInformations=[],b.$on("HospitalPrivilegeInformation",function(c,d){console.log(d);try{if(a.HospitalPrivilegeInformations=d,0!=a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length)for(var e=0;e<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;e++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffilicationStartDate),a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate=b.ConvertDateFormat(a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[e].AffiliationEndDate)}catch(f){}}),a.filterData=function(){a.locations=a.hospitals.filter(function(b){return b.HospitalID==a.tempObject.Hospital.HospitalID})[0].HospitalContactInfoes},a.getAddress=function(){a.LocationAddress=a.locations.filter(function(b){return b.HospitalContactInfoID==a.tempObject.HospitalContactInfo.HospitalContactInfoID})[0],a.tempObject.HospitalContactInfo.Street=a.LocationAddress.Street,a.tempObject.HospitalContactInfo.Country=a.LocationAddress.Country,a.tempObject.HospitalContactInfo.County=a.LocationAddress.County,a.tempObject.HospitalContactInfo.City=a.LocationAddress.City,a.tempObject.HospitalContactInfo.ZipCode=a.LocationAddress.ZipCode,a.tempObject.HospitalContactInfo.Phone=a.LocationAddress.Phone,a.tempObject.HospitalContactInfo.Fax=a.LocationAddress.Fax,a.tempObject.HospitalContactInfo.Email=a.LocationAddress.Email,a.tempObject.HospitalContactInfo.State=a.LocationAddress.State,a.contactPersons=a.LocationAddress.HospitalContactPersons},a.getContactPersonDetail=function(){a.contactPersonDetail=a.contactPersons.filter(function(b){return b.HospitalContactPersonID==a.tempObject.HospitalContactPerson.HospitalContactPersonID})[0],a.tempObject.HospitalContactPerson.ContactPersonPhone=a.contactPersonDetail.ContactPersonPhone,a.tempObject.HospitalContactPerson.ContactPersonFax=a.contactPersonDetail.ContactPersonFax},a.specialties=b.getSpecilityForThisUser(),a.getSpecialityForProvider=function(a){return b.getSpecilityForThisUser().filter(function(b){return b.Specialty.SpecialtyID==a})[0]},a.getHospitalNameForProvider=function(b){return a.hospitals.filter(function(a){return a.HospitalID==b
})[0]},a.getStaffCategoryForProvider=function(b){return a.staffCategories.filter(function(a){return a.StaffCategoryID==b})[0]},a.getHospitalLocationForProvider=function(b){return a.locations.filter(function(a){return a.HospitalContactInfoID==b})[0]},a.getContactPersonForProvider=function(b){return a.ContactPersons.filter(function(a){return a.HospitalContactPersonID==b})[0]},a.getAdmittingPrivilageStatusForProvider=function(b){return a.admittingPrivileges.filter(function(a){return a.AdmittingPrivilegeID==b})[0]},a.setPrimary=function(){try{for(var b=0;b<a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.length;b++)a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[b].PreferenceType="2"}catch(c){}},a.indexVal="",a.message={desc:"",status:""},a.saveHopitalPrivilegeInformation=function(c){loadingOn(),a.message.desc="";var d,e;d=$("#hospitalPrivilegeInfoForm").valid(),$formDataHospitalPrivilege=$("#hospitalPrivilegeInfoForm"),e="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeInfoAsync?profileId="+profileId,d&&$.ajax({url:e,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(d){if("true"==d.status){a.message.status="success";try{c.HospitalPrivilegeInformationID=d.hospitalPrivilegeInformation.HospitalPrivilegeInformationID,a.HospitalPrivilegeInformations=angular.copy(c)}catch(e){}a.message.desc="Hospital Privilege Information Saved Successfully!!!!",b.callAlert("alertHospitalPrivilegeInformation"),b.operateCancelControl("")}else a.message.status="danger",a.message.desc=d.status,b.callAlert("alertHospitalPrivilegeInformation");if("1"==c.HospitalPrivilegeYesNoOption)a.HospitalPrivilegeInformations.OtherAdmittingArrangements="";else if("2"==c.HospitalPrivilegeYesNoOption)try{a.HospitalPrivilegeInformations.HospitalPrivilegeDetails=[]}catch(e){}},error:function(){a.message.status="danger",a.message.desc="Sorry for Inconvenience !!!! Please Try Again Later...",b.callAlert("alertHospitalPrivilegeInformation")}}),loadingOff()},a.saveHospitalPrivilegeDetail=function(c,d){a.HospitalPrivilegeError="",console.log(c),a.indexVal=d;var e,f;"addhospitalPrivilegeInformation"==a.visibilityControl?(e=$("#newShowHosPrvDiv").find("form").valid(),$formDataHospitalPrivilege=$("#newShowHosPrvDiv").find("form"),f="/Profile/HospitalPrivilege/AddHospitalPrivilegeAsync?profileId="+profileId):(e=$("#hospitalPrivilegeInformationEditDiv"+d).find("form").valid(),$formDataHospitalPrivilege=$("#hospitalPrivilegeInformationEditDiv"+d).find("form"),f="/Profile/HospitalPrivilege/UpdateHospitalPrivilegeAsync?profileId="+profileId),e&&$.ajax({url:f,type:"POST",data:new FormData($formDataHospitalPrivilege[0]),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){"1"==c.PreferenceType&&a.setPrimary(),"true"==e.status?("addhospitalPrivilegeInformation"==a.visibilityControl?(c.Hospital.HospitalPrivilegeDetailID=e.id,c.Hospital.HospitalName=a.getHospitalNameForProvider(c.Hospital.HospitalID).HospitalName,c.HospitalContactInfo.LocationName=a.getHospitalLocationForProvider(c.HospitalContactInfo.HospitalContactInfoID).LocationName,c.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails.push(c),b.callAlert("addedNewHospitalPrivilege")):(c.HospitalPrevilegeLetterPath=e.hospitalPrivilegeDetail.HospitalPrevilegeLetterPath,a.HospitalPrivilegeInformations.HospitalPrivilegeDetails[d]=c,b.callAlert("updatedHospitalPrivilege")),b.operateCancelControl("")):a.HospitalPrivilegeError=e.status.split(",")},error:function(){a.HospitalPrivilegeError="Sorry for Inconvenience !!!! Please Try Again Later..."}})}}]);