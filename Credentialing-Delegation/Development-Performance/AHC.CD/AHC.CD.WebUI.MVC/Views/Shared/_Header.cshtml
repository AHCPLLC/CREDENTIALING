@using Microsoft.AspNet.Identity;
@using Microsoft.AspNet.Identity.Owin;

<!-- Navigation -->
<nav class="navbar navbar-default navbar-static-top navbar-fixed-top small" role="navigation" style="margin-bottom: 0">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand header-logo" href="~/Dashboard/Index"><img src="~/Content/Images/logo2.png" style="width: 98px;height: 49px;" /></a>
    </div>
   
    <button id="menu-toggle" class="btn btn-xs navbar-toggle" onclick="togglemenu()">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>

    <ul class="nav navbar-top-links navbar-right">
        <li class="dropdown ringMyBell" id="alerts">
            <a class="dropdown-toggle pointer" data-toggle="dropdown" id="bell">
                <span class="label label-info" id="numberOfNotifications"></span>
                <i class="fa fa-bell fa-fw" tooltip data-toggle="tooltip" data-placement="bottom" title="Notifications"></i> <i class="fa fa-caret-down"></i>
            </a>
            <ul class="dropdown-menu dropdown-messages pre-scrollable" id="alertArea">
                <li class="pull-right" style="background-color:#ddd"><input class="checkMe" type="checkbox" id="ViewAll" />View All</li>
            </ul>
            <!-- /.dropdown-messages -->
        </li>

        @if (HttpContext.Current.User.Identity.IsAuthenticated)
        {   
            var roles = Context.GetOwinContext().GetUserManager<AHC.CD.WebUI.MVC.ApplicationUserManager>().GetRoles(User.Identity.GetUserId());
            if (roles.Contains("ADM") || roles.Contains("CCO"))
            {
                <span><a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Profile/Verification/Verification" class="btn btn-xs btn-circle btn-default" tooltip="" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Verification Links"><i class="fa fa-link"></i></a></span>
            }
            if (roles.Contains("ADM") || roles.Contains("CCO") || roles.Contains("CRA"))
            {
                if (System.Configuration.ConfigurationManager.AppSettings["SupportsDelegatedPlans"] == "true")
                {
                    <span><a href="@System.Configuration.ConfigurationManager.AppSettings["AppRoot"]/Credentialing/Verification/Index" class="btn btn-xs btn-circle btn-default" tooltip="" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="PSV"><i class="small">PSV</i></a></span>
                }
            }
        }
        <li class="dropdown">

            @if (Session["LoggedInUserView"] == null)
            {
                Session["LoggedInUserView"] = @Html.Partial("_LoggedInUserView");
            }
            @Session["LoggedInUserView"]
            <!-- /.dropdown-user -->
        </li>
        <!-- /.dropdown -->
    </ul>
    <div class="clearfix onlymedia"></div>
    
    @Html.Partial("_Sidebar")

</nav>